From 819a47cca470ff1a0a1bb03ab5e9e45ecfc4dcf7 Mon Sep 17 00:00:00 2001
From: Marcus Comstedt <marcus@mc.pp.se>
Date: Wed, 16 Jul 2025 12:15:52 +0200
Subject: [PATCH 1/5] libvpx base ppc64 patch

---
 .../chromium/third_party/libvpx/BUILD.gn      |   10 +
 .../third_party/libvpx/generate_gni.sh        |    2 +-
 .../source/config/linux/ppc64/vp8_rtcd.h      |    6 +-
 .../source/config/linux/ppc64/vp9_rtcd.h      |  153 +-
 .../source/config/linux/ppc64/vpx_config.asm  |    6 +-
 .../source/config/linux/ppc64/vpx_config.c    |    2 +-
 .../source/config/linux/ppc64/vpx_config.h    |    6 +-
 .../source/config/linux/ppc64/vpx_dsp_rtcd.h  | 3067 +++++++++++++----
 .../config/linux/ppc64/vpx_scale_rtcd.h       |    6 +-
 .../libvpx/source/libvpx/build/make/rtcd.pl   |    5 +-
 .../libvpx/vp9/encoder/ppc/vp9_quantize_vsx.c |   62 +-
 .../source/libvpx/vpx_dsp/ppc/fdct32x32_vsx.c |  100 +-
 .../source/libvpx/vpx_dsp/ppc/quantize_vsx.c  |   62 +-
 13 files changed, 2730 insertions(+), 757 deletions(-)

diff --git a/src/3rdparty/chromium/third_party/libvpx/BUILD.gn b/src/3rdparty/chromium/third_party/libvpx/BUILD.gn
index f34c555646..d8b2053f87 100644
--- a/src/3rdparty/chromium/third_party/libvpx/BUILD.gn
+++ b/src/3rdparty/chromium/third_party/libvpx/BUILD.gn
@@ -108,6 +108,14 @@ config("libvpx_config") {
       "-Wno-sign-compare",
     ]
   }
+
+  if (current_cpu == "ppc64") {
+    cflags += [
+      "-mcpu=power9",
+      "-maltivec",
+      "-mvsx",
+    ]
+  }
 }
 
 # This config is applied to targets that depend on libvpx.
@@ -307,6 +315,8 @@ if (current_cpu == "x86" || (current_cpu == "x64" && !is_msan)) {
     } else if (current_cpu == "x64") {
       deps = [ ":libvpx_x86_64_headers" ]
       sources = libvpx_srcs_x86_64_avx512
+    } else if (current_cpu == "ppc64") {
+      sources = libvpx_srcs_ppc64
     }
   }
 }
diff --git a/src/3rdparty/chromium/third_party/libvpx/generate_gni.sh b/src/3rdparty/chromium/third_party/libvpx/generate_gni.sh
index a605ebb3ab..5282b56d8c 100755
--- a/src/3rdparty/chromium/third_party/libvpx/generate_gni.sh
+++ b/src/3rdparty/chromium/third_party/libvpx/generate_gni.sh
@@ -433,7 +433,7 @@ gen_config_files linux/mipsel "--target=mips32-linux-gcc ${all_platforms}"
 gen_config_files linux/mips64el "--target=mips64-linux-gcc ${all_platforms}"
 gen_config_files linux/loongarch \
   "--target=loongarch64-linux-gcc ${all_platforms}"
-gen_config_files linux/ppc64 "--target=ppc64le-linux-gcc ${all_platforms}"
+gen_config_files linux/ppc64 "--target=generic-gnu $HIGHBD ${all_platforms}"
 gen_config_files linux/generic "--target=generic-gnu $HIGHBD ${all_platforms}"
 gen_config_files win/arm64-highbd \
   "--target=arm64-win64-vs15 ${all_platforms} ${HIGHBD} ${disable_sve}"
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp8_rtcd.h b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp8_rtcd.h
index 6eac039244..9c5fa26107 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp8_rtcd.h
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp8_rtcd.h
@@ -316,11 +316,7 @@ void vp8_rtcd(void);
 #include "vpx_config.h"
 
 #ifdef RTCD_C
-#include "vpx_ports/ppc.h"
-static void setup_rtcd_internal(void) {
-  int flags = ppc_simd_caps();
-  (void)flags;
-}
+static void setup_rtcd_internal(void) {}
 #endif
 
 #ifdef __cplusplus
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp9_rtcd.h b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp9_rtcd.h
index e951af809d..0bf248cfe1 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp9_rtcd.h
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp9_rtcd.h
@@ -115,35 +115,132 @@ void vp9_filter_by_weight8x8_c(const uint8_t* src,
 void vp9_fwht4x4_c(const int16_t* input, tran_low_t* output, int stride);
 #define vp9_fwht4x4 vp9_fwht4x4_c
 
+int64_t vp9_highbd_block_error_c(const tran_low_t* coeff,
+                                 const tran_low_t* dqcoeff,
+                                 intptr_t block_size,
+                                 int64_t* ssz,
+                                 int bd);
+#define vp9_highbd_block_error vp9_highbd_block_error_c
+
+void vp9_highbd_fht16x16_c(const int16_t* input,
+                           tran_low_t* output,
+                           int stride,
+                           int tx_type);
+#define vp9_highbd_fht16x16 vp9_highbd_fht16x16_c
+
+void vp9_highbd_fht4x4_c(const int16_t* input,
+                         tran_low_t* output,
+                         int stride,
+                         int tx_type);
+#define vp9_highbd_fht4x4 vp9_highbd_fht4x4_c
+
+void vp9_highbd_fht8x8_c(const int16_t* input,
+                         tran_low_t* output,
+                         int stride,
+                         int tx_type);
+#define vp9_highbd_fht8x8 vp9_highbd_fht8x8_c
+
+void vp9_highbd_fwht4x4_c(const int16_t* input, tran_low_t* output, int stride);
+#define vp9_highbd_fwht4x4 vp9_highbd_fwht4x4_c
+
+void vp9_highbd_iht16x16_256_add_c(const tran_low_t* input,
+                                   uint16_t* dest,
+                                   int stride,
+                                   int tx_type,
+                                   int bd);
+#define vp9_highbd_iht16x16_256_add vp9_highbd_iht16x16_256_add_c
+
+void vp9_highbd_iht4x4_16_add_c(const tran_low_t* input,
+                                uint16_t* dest,
+                                int stride,
+                                int tx_type,
+                                int bd);
+#define vp9_highbd_iht4x4_16_add vp9_highbd_iht4x4_16_add_c
+
+void vp9_highbd_iht8x8_64_add_c(const tran_low_t* input,
+                                uint16_t* dest,
+                                int stride,
+                                int tx_type,
+                                int bd);
+#define vp9_highbd_iht8x8_64_add vp9_highbd_iht8x8_64_add_c
+
+void vp9_highbd_mbpost_proc_across_ip_c(uint16_t* src,
+                                        int pitch,
+                                        int rows,
+                                        int cols,
+                                        int flimit);
+#define vp9_highbd_mbpost_proc_across_ip vp9_highbd_mbpost_proc_across_ip_c
+
+void vp9_highbd_mbpost_proc_down_c(uint16_t* dst,
+                                   int pitch,
+                                   int rows,
+                                   int cols,
+                                   int flimit);
+#define vp9_highbd_mbpost_proc_down vp9_highbd_mbpost_proc_down_c
+
+void vp9_highbd_post_proc_down_and_across_c(const uint16_t* src_ptr,
+                                            uint16_t* dst_ptr,
+                                            int src_pixels_per_line,
+                                            int dst_pixels_per_line,
+                                            int rows,
+                                            int cols,
+                                            int flimit);
+#define vp9_highbd_post_proc_down_and_across \
+  vp9_highbd_post_proc_down_and_across_c
+
+void vp9_highbd_quantize_fp_c(const tran_low_t* coeff_ptr,
+                              intptr_t n_coeffs,
+                              const int16_t* round_ptr,
+                              const int16_t* quant_ptr,
+                              tran_low_t* qcoeff_ptr,
+                              tran_low_t* dqcoeff_ptr,
+                              const int16_t* dequant_ptr,
+                              uint16_t* eob_ptr,
+                              const int16_t* scan,
+                              const int16_t* iscan);
+#define vp9_highbd_quantize_fp vp9_highbd_quantize_fp_c
+
+void vp9_highbd_quantize_fp_32x32_c(const tran_low_t* coeff_ptr,
+                                    intptr_t n_coeffs,
+                                    const int16_t* round_ptr,
+                                    const int16_t* quant_ptr,
+                                    tran_low_t* qcoeff_ptr,
+                                    tran_low_t* dqcoeff_ptr,
+                                    const int16_t* dequant_ptr,
+                                    uint16_t* eob_ptr,
+                                    const int16_t* scan,
+                                    const int16_t* iscan);
+#define vp9_highbd_quantize_fp_32x32 vp9_highbd_quantize_fp_32x32_c
+
+void vp9_highbd_temporal_filter_apply_c(const uint8_t* frame1,
+                                        unsigned int stride,
+                                        const uint8_t* frame2,
+                                        unsigned int block_width,
+                                        unsigned int block_height,
+                                        int strength,
+                                        int* blk_fw,
+                                        int use_32x32,
+                                        uint32_t* accumulator,
+                                        uint16_t* count);
+#define vp9_highbd_temporal_filter_apply vp9_highbd_temporal_filter_apply_c
+
 void vp9_iht16x16_256_add_c(const tran_low_t* input,
                             uint8_t* dest,
                             int stride,
                             int tx_type);
-void vp9_iht16x16_256_add_vsx(const tran_low_t* input,
-                              uint8_t* dest,
-                              int stride,
-                              int tx_type);
-#define vp9_iht16x16_256_add vp9_iht16x16_256_add_vsx
+#define vp9_iht16x16_256_add vp9_iht16x16_256_add_c
 
 void vp9_iht4x4_16_add_c(const tran_low_t* input,
                          uint8_t* dest,
                          int stride,
                          int tx_type);
-void vp9_iht4x4_16_add_vsx(const tran_low_t* input,
-                           uint8_t* dest,
-                           int stride,
-                           int tx_type);
-#define vp9_iht4x4_16_add vp9_iht4x4_16_add_vsx
+#define vp9_iht4x4_16_add vp9_iht4x4_16_add_c
 
 void vp9_iht8x8_64_add_c(const tran_low_t* input,
                          uint8_t* dest,
                          int stride,
                          int tx_type);
-void vp9_iht8x8_64_add_vsx(const tran_low_t* input,
-                           uint8_t* dest,
-                           int stride,
-                           int tx_type);
-#define vp9_iht8x8_64_add vp9_iht8x8_64_add_vsx
+#define vp9_iht8x8_64_add vp9_iht8x8_64_add_c
 
 void vp9_quantize_fp_c(const tran_low_t* coeff_ptr,
                        intptr_t n_coeffs,
@@ -153,15 +250,7 @@ void vp9_quantize_fp_c(const tran_low_t* coeff_ptr,
                        const int16_t* dequant_ptr,
                        uint16_t* eob_ptr,
                        const struct ScanOrder* const scan_order);
-void vp9_quantize_fp_vsx(const tran_low_t* coeff_ptr,
-                         intptr_t n_coeffs,
-                         const struct macroblock_plane* const mb_plane,
-                         tran_low_t* qcoeff_ptr,
-                         tran_low_t* dqcoeff_ptr,
-                         const int16_t* dequant_ptr,
-                         uint16_t* eob_ptr,
-                         const struct ScanOrder* const scan_order);
-#define vp9_quantize_fp vp9_quantize_fp_vsx
+#define vp9_quantize_fp vp9_quantize_fp_c
 
 void vp9_quantize_fp_32x32_c(const tran_low_t* coeff_ptr,
                              intptr_t n_coeffs,
@@ -171,15 +260,7 @@ void vp9_quantize_fp_32x32_c(const tran_low_t* coeff_ptr,
                              const int16_t* dequant_ptr,
                              uint16_t* eob_ptr,
                              const struct ScanOrder* const scan_order);
-void vp9_quantize_fp_32x32_vsx(const tran_low_t* coeff_ptr,
-                               intptr_t n_coeffs,
-                               const struct macroblock_plane* const mb_plane,
-                               tran_low_t* qcoeff_ptr,
-                               tran_low_t* dqcoeff_ptr,
-                               const int16_t* dequant_ptr,
-                               uint16_t* eob_ptr,
-                               const struct ScanOrder* const scan_order);
-#define vp9_quantize_fp_32x32 vp9_quantize_fp_32x32_vsx
+#define vp9_quantize_fp_32x32 vp9_quantize_fp_32x32_c
 
 void vp9_scale_and_extend_frame_c(const struct yv12_buffer_config* src,
                                   struct yv12_buffer_config* dst,
@@ -192,11 +273,7 @@ void vp9_rtcd(void);
 #include "vpx_config.h"
 
 #ifdef RTCD_C
-#include "vpx_ports/ppc.h"
-static void setup_rtcd_internal(void) {
-  int flags = ppc_simd_caps();
-  (void)flags;
-}
+static void setup_rtcd_internal(void) {}
 #endif
 
 #ifdef __cplusplus
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.asm b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.asm
index 2d04a90390..b2b9ab7b5d 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.asm
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.asm
@@ -11,8 +11,8 @@
 .equ ARCH_X86 ,  0
 .equ VPX_ARCH_X86_64 ,  0
 .equ ARCH_X86_64 ,  0
-.equ VPX_ARCH_PPC ,  1
-.equ ARCH_PPC ,  1
+.equ VPX_ARCH_PPC ,  0
+.equ ARCH_PPC ,  0
 .equ VPX_ARCH_LOONGARCH ,  0
 .equ ARCH_LOONGARCH ,  0
 .equ HAVE_NEON_ASM ,  0
@@ -91,7 +91,7 @@
 .equ CONFIG_TEMPORAL_DENOISING ,  1
 .equ CONFIG_VP9_TEMPORAL_DENOISING ,  1
 .equ CONFIG_COEFFICIENT_RANGE_CHECKING ,  0
-.equ CONFIG_VP9_HIGHBITDEPTH ,  0
+.equ CONFIG_VP9_HIGHBITDEPTH ,  1
 .equ CONFIG_BETTER_HW_COMPATIBILITY ,  0
 .equ CONFIG_EXPERIMENTAL ,  0
 .equ CONFIG_SIZE_LIMIT ,  1
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.c b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.c
index 889a1d6e35..f8a8a3db51 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.c
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.c
@@ -6,5 +6,5 @@
 /* in the file PATENTS.  All contributing project authors may */
 /* be found in the AUTHORS file in the root of the source tree. */
 #include "vpx/vpx_codec.h"
-static const char* const cfg = "--target=ppc64le-linux-gcc --enable-external-build --enable-postproc --enable-multi-res-encoding --enable-temporal-denoising --enable-vp9-temporal-denoising --enable-vp9-postproc --size-limit=16384x16384 --enable-realtime-only --disable-install-docs --disable-libyuv --enable-unit-tests";
+static const char* const cfg = "--target=generic-gnu --enable-vp9-highbitdepth --enable-external-build --enable-postproc --enable-multi-res-encoding --enable-temporal-denoising --enable-vp9-temporal-denoising --enable-vp9-postproc --size-limit=16384x16384 --enable-realtime-only --disable-install-docs --disable-libyuv --enable-unit-tests";
 const char *vpx_codec_build_config(void) {return cfg;}
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.h b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.h
index 8c758ab78d..cf565e8d7f 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.h
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.h
@@ -20,8 +20,8 @@
 #define ARCH_X86 0
 #define VPX_ARCH_X86_64 0
 #define ARCH_X86_64 0
-#define VPX_ARCH_PPC 1
-#define ARCH_PPC 1
+#define VPX_ARCH_PPC 0
+#define ARCH_PPC 0
 #define VPX_ARCH_LOONGARCH 0
 #define ARCH_LOONGARCH 0
 #define HAVE_NEON_ASM 0
@@ -100,7 +100,7 @@
 #define CONFIG_TEMPORAL_DENOISING 1
 #define CONFIG_VP9_TEMPORAL_DENOISING 1
 #define CONFIG_COEFFICIENT_RANGE_CHECKING 0
-#define CONFIG_VP9_HIGHBITDEPTH 0
+#define CONFIG_VP9_HIGHBITDEPTH 1
 #define CONFIG_BETTER_HW_COMPATIBILITY 0
 #define CONFIG_EXPERIMENTAL 0
 #define CONFIG_SIZE_LIMIT 1
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_dsp_rtcd.h b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_dsp_rtcd.h
index 71eb826cbb..6044863934 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_dsp_rtcd.h
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_dsp_rtcd.h
@@ -46,13 +46,7 @@ void vpx_comp_avg_pred_c(uint8_t* comp_pred,
                          int height,
                          const uint8_t* ref,
                          int ref_stride);
-void vpx_comp_avg_pred_vsx(uint8_t* comp_pred,
-                           const uint8_t* pred,
-                           int width,
-                           int height,
-                           const uint8_t* ref,
-                           int ref_stride);
-#define vpx_comp_avg_pred vpx_comp_avg_pred_vsx
+#define vpx_comp_avg_pred vpx_comp_avg_pred_c
 
 void vpx_convolve8_c(const uint8_t* src,
                      ptrdiff_t src_stride,
@@ -65,18 +59,7 @@ void vpx_convolve8_c(const uint8_t* src,
                      int y_step_q4,
                      int w,
                      int h);
-void vpx_convolve8_vsx(const uint8_t* src,
-                       ptrdiff_t src_stride,
-                       uint8_t* dst,
-                       ptrdiff_t dst_stride,
-                       const InterpKernel* filter,
-                       int x0_q4,
-                       int x_step_q4,
-                       int y0_q4,
-                       int y_step_q4,
-                       int w,
-                       int h);
-#define vpx_convolve8 vpx_convolve8_vsx
+#define vpx_convolve8 vpx_convolve8_c
 
 void vpx_convolve8_avg_c(const uint8_t* src,
                          ptrdiff_t src_stride,
@@ -89,18 +72,7 @@ void vpx_convolve8_avg_c(const uint8_t* src,
                          int y_step_q4,
                          int w,
                          int h);
-void vpx_convolve8_avg_vsx(const uint8_t* src,
-                           ptrdiff_t src_stride,
-                           uint8_t* dst,
-                           ptrdiff_t dst_stride,
-                           const InterpKernel* filter,
-                           int x0_q4,
-                           int x_step_q4,
-                           int y0_q4,
-                           int y_step_q4,
-                           int w,
-                           int h);
-#define vpx_convolve8_avg vpx_convolve8_avg_vsx
+#define vpx_convolve8_avg vpx_convolve8_avg_c
 
 void vpx_convolve8_avg_horiz_c(const uint8_t* src,
                                ptrdiff_t src_stride,
@@ -113,18 +85,7 @@ void vpx_convolve8_avg_horiz_c(const uint8_t* src,
                                int y_step_q4,
                                int w,
                                int h);
-void vpx_convolve8_avg_horiz_vsx(const uint8_t* src,
-                                 ptrdiff_t src_stride,
-                                 uint8_t* dst,
-                                 ptrdiff_t dst_stride,
-                                 const InterpKernel* filter,
-                                 int x0_q4,
-                                 int x_step_q4,
-                                 int y0_q4,
-                                 int y_step_q4,
-                                 int w,
-                                 int h);
-#define vpx_convolve8_avg_horiz vpx_convolve8_avg_horiz_vsx
+#define vpx_convolve8_avg_horiz vpx_convolve8_avg_horiz_c
 
 void vpx_convolve8_avg_vert_c(const uint8_t* src,
                               ptrdiff_t src_stride,
@@ -137,18 +98,7 @@ void vpx_convolve8_avg_vert_c(const uint8_t* src,
                               int y_step_q4,
                               int w,
                               int h);
-void vpx_convolve8_avg_vert_vsx(const uint8_t* src,
-                                ptrdiff_t src_stride,
-                                uint8_t* dst,
-                                ptrdiff_t dst_stride,
-                                const InterpKernel* filter,
-                                int x0_q4,
-                                int x_step_q4,
-                                int y0_q4,
-                                int y_step_q4,
-                                int w,
-                                int h);
-#define vpx_convolve8_avg_vert vpx_convolve8_avg_vert_vsx
+#define vpx_convolve8_avg_vert vpx_convolve8_avg_vert_c
 
 void vpx_convolve8_horiz_c(const uint8_t* src,
                            ptrdiff_t src_stride,
@@ -161,18 +111,7 @@ void vpx_convolve8_horiz_c(const uint8_t* src,
                            int y_step_q4,
                            int w,
                            int h);
-void vpx_convolve8_horiz_vsx(const uint8_t* src,
-                             ptrdiff_t src_stride,
-                             uint8_t* dst,
-                             ptrdiff_t dst_stride,
-                             const InterpKernel* filter,
-                             int x0_q4,
-                             int x_step_q4,
-                             int y0_q4,
-                             int y_step_q4,
-                             int w,
-                             int h);
-#define vpx_convolve8_horiz vpx_convolve8_horiz_vsx
+#define vpx_convolve8_horiz vpx_convolve8_horiz_c
 
 void vpx_convolve8_vert_c(const uint8_t* src,
                           ptrdiff_t src_stride,
@@ -185,18 +124,7 @@ void vpx_convolve8_vert_c(const uint8_t* src,
                           int y_step_q4,
                           int w,
                           int h);
-void vpx_convolve8_vert_vsx(const uint8_t* src,
-                            ptrdiff_t src_stride,
-                            uint8_t* dst,
-                            ptrdiff_t dst_stride,
-                            const InterpKernel* filter,
-                            int x0_q4,
-                            int x_step_q4,
-                            int y0_q4,
-                            int y_step_q4,
-                            int w,
-                            int h);
-#define vpx_convolve8_vert vpx_convolve8_vert_vsx
+#define vpx_convolve8_vert vpx_convolve8_vert_c
 
 void vpx_convolve_avg_c(const uint8_t* src,
                         ptrdiff_t src_stride,
@@ -209,18 +137,7 @@ void vpx_convolve_avg_c(const uint8_t* src,
                         int y_step_q4,
                         int w,
                         int h);
-void vpx_convolve_avg_vsx(const uint8_t* src,
-                          ptrdiff_t src_stride,
-                          uint8_t* dst,
-                          ptrdiff_t dst_stride,
-                          const InterpKernel* filter,
-                          int x0_q4,
-                          int x_step_q4,
-                          int y0_q4,
-                          int y_step_q4,
-                          int w,
-                          int h);
-#define vpx_convolve_avg vpx_convolve_avg_vsx
+#define vpx_convolve_avg vpx_convolve_avg_c
 
 void vpx_convolve_copy_c(const uint8_t* src,
                          ptrdiff_t src_stride,
@@ -233,18 +150,7 @@ void vpx_convolve_copy_c(const uint8_t* src,
                          int y_step_q4,
                          int w,
                          int h);
-void vpx_convolve_copy_vsx(const uint8_t* src,
-                           ptrdiff_t src_stride,
-                           uint8_t* dst,
-                           ptrdiff_t dst_stride,
-                           const InterpKernel* filter,
-                           int x0_q4,
-                           int x_step_q4,
-                           int y0_q4,
-                           int y_step_q4,
-                           int w,
-                           int h);
-#define vpx_convolve_copy vpx_convolve_copy_vsx
+#define vpx_convolve_copy vpx_convolve_copy_c
 
 void vpx_d117_predictor_16x16_c(uint8_t* dst,
                                 ptrdiff_t stride,
@@ -346,21 +252,13 @@ void vpx_d45_predictor_16x16_c(uint8_t* dst,
                                ptrdiff_t stride,
                                const uint8_t* above,
                                const uint8_t* left);
-void vpx_d45_predictor_16x16_vsx(uint8_t* dst,
-                                 ptrdiff_t stride,
-                                 const uint8_t* above,
-                                 const uint8_t* left);
-#define vpx_d45_predictor_16x16 vpx_d45_predictor_16x16_vsx
+#define vpx_d45_predictor_16x16 vpx_d45_predictor_16x16_c
 
 void vpx_d45_predictor_32x32_c(uint8_t* dst,
                                ptrdiff_t stride,
                                const uint8_t* above,
                                const uint8_t* left);
-void vpx_d45_predictor_32x32_vsx(uint8_t* dst,
-                                 ptrdiff_t stride,
-                                 const uint8_t* above,
-                                 const uint8_t* left);
-#define vpx_d45_predictor_32x32 vpx_d45_predictor_32x32_vsx
+#define vpx_d45_predictor_32x32 vpx_d45_predictor_32x32_c
 
 void vpx_d45_predictor_4x4_c(uint8_t* dst,
                              ptrdiff_t stride,
@@ -384,21 +282,13 @@ void vpx_d63_predictor_16x16_c(uint8_t* dst,
                                ptrdiff_t stride,
                                const uint8_t* above,
                                const uint8_t* left);
-void vpx_d63_predictor_16x16_vsx(uint8_t* dst,
-                                 ptrdiff_t stride,
-                                 const uint8_t* above,
-                                 const uint8_t* left);
-#define vpx_d63_predictor_16x16 vpx_d63_predictor_16x16_vsx
+#define vpx_d63_predictor_16x16 vpx_d63_predictor_16x16_c
 
 void vpx_d63_predictor_32x32_c(uint8_t* dst,
                                ptrdiff_t stride,
                                const uint8_t* above,
                                const uint8_t* left);
-void vpx_d63_predictor_32x32_vsx(uint8_t* dst,
-                                 ptrdiff_t stride,
-                                 const uint8_t* above,
-                                 const uint8_t* left);
-#define vpx_d63_predictor_32x32 vpx_d63_predictor_32x32_vsx
+#define vpx_d63_predictor_32x32 vpx_d63_predictor_32x32_c
 
 void vpx_d63_predictor_4x4_c(uint8_t* dst,
                              ptrdiff_t stride,
@@ -422,21 +312,13 @@ void vpx_dc_128_predictor_16x16_c(uint8_t* dst,
                                   ptrdiff_t stride,
                                   const uint8_t* above,
                                   const uint8_t* left);
-void vpx_dc_128_predictor_16x16_vsx(uint8_t* dst,
-                                    ptrdiff_t stride,
-                                    const uint8_t* above,
-                                    const uint8_t* left);
-#define vpx_dc_128_predictor_16x16 vpx_dc_128_predictor_16x16_vsx
+#define vpx_dc_128_predictor_16x16 vpx_dc_128_predictor_16x16_c
 
 void vpx_dc_128_predictor_32x32_c(uint8_t* dst,
                                   ptrdiff_t stride,
                                   const uint8_t* above,
                                   const uint8_t* left);
-void vpx_dc_128_predictor_32x32_vsx(uint8_t* dst,
-                                    ptrdiff_t stride,
-                                    const uint8_t* above,
-                                    const uint8_t* left);
-#define vpx_dc_128_predictor_32x32 vpx_dc_128_predictor_32x32_vsx
+#define vpx_dc_128_predictor_32x32 vpx_dc_128_predictor_32x32_c
 
 void vpx_dc_128_predictor_4x4_c(uint8_t* dst,
                                 ptrdiff_t stride,
@@ -454,21 +336,13 @@ void vpx_dc_left_predictor_16x16_c(uint8_t* dst,
                                    ptrdiff_t stride,
                                    const uint8_t* above,
                                    const uint8_t* left);
-void vpx_dc_left_predictor_16x16_vsx(uint8_t* dst,
-                                     ptrdiff_t stride,
-                                     const uint8_t* above,
-                                     const uint8_t* left);
-#define vpx_dc_left_predictor_16x16 vpx_dc_left_predictor_16x16_vsx
+#define vpx_dc_left_predictor_16x16 vpx_dc_left_predictor_16x16_c
 
 void vpx_dc_left_predictor_32x32_c(uint8_t* dst,
                                    ptrdiff_t stride,
                                    const uint8_t* above,
                                    const uint8_t* left);
-void vpx_dc_left_predictor_32x32_vsx(uint8_t* dst,
-                                     ptrdiff_t stride,
-                                     const uint8_t* above,
-                                     const uint8_t* left);
-#define vpx_dc_left_predictor_32x32 vpx_dc_left_predictor_32x32_vsx
+#define vpx_dc_left_predictor_32x32 vpx_dc_left_predictor_32x32_c
 
 void vpx_dc_left_predictor_4x4_c(uint8_t* dst,
                                  ptrdiff_t stride,
@@ -486,21 +360,13 @@ void vpx_dc_predictor_16x16_c(uint8_t* dst,
                               ptrdiff_t stride,
                               const uint8_t* above,
                               const uint8_t* left);
-void vpx_dc_predictor_16x16_vsx(uint8_t* dst,
-                                ptrdiff_t stride,
-                                const uint8_t* above,
-                                const uint8_t* left);
-#define vpx_dc_predictor_16x16 vpx_dc_predictor_16x16_vsx
+#define vpx_dc_predictor_16x16 vpx_dc_predictor_16x16_c
 
 void vpx_dc_predictor_32x32_c(uint8_t* dst,
                               ptrdiff_t stride,
                               const uint8_t* above,
                               const uint8_t* left);
-void vpx_dc_predictor_32x32_vsx(uint8_t* dst,
-                                ptrdiff_t stride,
-                                const uint8_t* above,
-                                const uint8_t* left);
-#define vpx_dc_predictor_32x32 vpx_dc_predictor_32x32_vsx
+#define vpx_dc_predictor_32x32 vpx_dc_predictor_32x32_c
 
 void vpx_dc_predictor_4x4_c(uint8_t* dst,
                             ptrdiff_t stride,
@@ -518,162 +384,2401 @@ void vpx_dc_top_predictor_16x16_c(uint8_t* dst,
                                   ptrdiff_t stride,
                                   const uint8_t* above,
                                   const uint8_t* left);
-void vpx_dc_top_predictor_16x16_vsx(uint8_t* dst,
-                                    ptrdiff_t stride,
-                                    const uint8_t* above,
-                                    const uint8_t* left);
-#define vpx_dc_top_predictor_16x16 vpx_dc_top_predictor_16x16_vsx
+#define vpx_dc_top_predictor_16x16 vpx_dc_top_predictor_16x16_c
 
 void vpx_dc_top_predictor_32x32_c(uint8_t* dst,
                                   ptrdiff_t stride,
                                   const uint8_t* above,
                                   const uint8_t* left);
-void vpx_dc_top_predictor_32x32_vsx(uint8_t* dst,
-                                    ptrdiff_t stride,
-                                    const uint8_t* above,
-                                    const uint8_t* left);
-#define vpx_dc_top_predictor_32x32 vpx_dc_top_predictor_32x32_vsx
+#define vpx_dc_top_predictor_32x32 vpx_dc_top_predictor_32x32_c
+
+void vpx_dc_top_predictor_4x4_c(uint8_t* dst,
+                                ptrdiff_t stride,
+                                const uint8_t* above,
+                                const uint8_t* left);
+#define vpx_dc_top_predictor_4x4 vpx_dc_top_predictor_4x4_c
+
+void vpx_dc_top_predictor_8x8_c(uint8_t* dst,
+                                ptrdiff_t stride,
+                                const uint8_t* above,
+                                const uint8_t* left);
+#define vpx_dc_top_predictor_8x8 vpx_dc_top_predictor_8x8_c
+
+void vpx_fdct16x16_c(const int16_t* input, tran_low_t* output, int stride);
+#define vpx_fdct16x16 vpx_fdct16x16_c
+
+void vpx_fdct16x16_1_c(const int16_t* input, tran_low_t* output, int stride);
+#define vpx_fdct16x16_1 vpx_fdct16x16_1_c
+
+void vpx_fdct32x32_c(const int16_t* input, tran_low_t* output, int stride);
+#define vpx_fdct32x32 vpx_fdct32x32_c
+
+void vpx_fdct32x32_1_c(const int16_t* input, tran_low_t* output, int stride);
+#define vpx_fdct32x32_1 vpx_fdct32x32_1_c
+
+void vpx_fdct32x32_rd_c(const int16_t* input, tran_low_t* output, int stride);
+#define vpx_fdct32x32_rd vpx_fdct32x32_rd_c
+
+void vpx_fdct4x4_c(const int16_t* input, tran_low_t* output, int stride);
+#define vpx_fdct4x4 vpx_fdct4x4_c
+
+void vpx_fdct4x4_1_c(const int16_t* input, tran_low_t* output, int stride);
+#define vpx_fdct4x4_1 vpx_fdct4x4_1_c
+
+void vpx_fdct8x8_c(const int16_t* input, tran_low_t* output, int stride);
+#define vpx_fdct8x8 vpx_fdct8x8_c
+
+void vpx_fdct8x8_1_c(const int16_t* input, tran_low_t* output, int stride);
+#define vpx_fdct8x8_1 vpx_fdct8x8_1_c
+
+void vpx_get16x16var_c(const uint8_t* src_ptr,
+                       int src_stride,
+                       const uint8_t* ref_ptr,
+                       int ref_stride,
+                       unsigned int* sse,
+                       int* sum);
+#define vpx_get16x16var vpx_get16x16var_c
+
+unsigned int vpx_get4x4sse_cs_c(const unsigned char* src_ptr,
+                                int src_stride,
+                                const unsigned char* ref_ptr,
+                                int ref_stride);
+#define vpx_get4x4sse_cs vpx_get4x4sse_cs_c
+
+void vpx_get8x8var_c(const uint8_t* src_ptr,
+                     int src_stride,
+                     const uint8_t* ref_ptr,
+                     int ref_stride,
+                     unsigned int* sse,
+                     int* sum);
+#define vpx_get8x8var vpx_get8x8var_c
+
+unsigned int vpx_get_mb_ss_c(const int16_t*);
+#define vpx_get_mb_ss vpx_get_mb_ss_c
+
+void vpx_h_predictor_16x16_c(uint8_t* dst,
+                             ptrdiff_t stride,
+                             const uint8_t* above,
+                             const uint8_t* left);
+#define vpx_h_predictor_16x16 vpx_h_predictor_16x16_c
+
+void vpx_h_predictor_32x32_c(uint8_t* dst,
+                             ptrdiff_t stride,
+                             const uint8_t* above,
+                             const uint8_t* left);
+#define vpx_h_predictor_32x32 vpx_h_predictor_32x32_c
+
+void vpx_h_predictor_4x4_c(uint8_t* dst,
+                           ptrdiff_t stride,
+                           const uint8_t* above,
+                           const uint8_t* left);
+#define vpx_h_predictor_4x4 vpx_h_predictor_4x4_c
+
+void vpx_h_predictor_8x8_c(uint8_t* dst,
+                           ptrdiff_t stride,
+                           const uint8_t* above,
+                           const uint8_t* left);
+#define vpx_h_predictor_8x8 vpx_h_predictor_8x8_c
+
+void vpx_hadamard_16x16_c(const int16_t* src_diff,
+                          ptrdiff_t src_stride,
+                          tran_low_t* coeff);
+#define vpx_hadamard_16x16 vpx_hadamard_16x16_c
+
+void vpx_hadamard_32x32_c(const int16_t* src_diff,
+                          ptrdiff_t src_stride,
+                          tran_low_t* coeff);
+#define vpx_hadamard_32x32 vpx_hadamard_32x32_c
+
+void vpx_hadamard_8x8_c(const int16_t* src_diff,
+                        ptrdiff_t src_stride,
+                        tran_low_t* coeff);
+#define vpx_hadamard_8x8 vpx_hadamard_8x8_c
+
+void vpx_he_predictor_4x4_c(uint8_t* dst,
+                            ptrdiff_t stride,
+                            const uint8_t* above,
+                            const uint8_t* left);
+#define vpx_he_predictor_4x4 vpx_he_predictor_4x4_c
+
+void vpx_highbd_10_get16x16var_c(const uint8_t* src_ptr,
+                                 int src_stride,
+                                 const uint8_t* ref_ptr,
+                                 int ref_stride,
+                                 unsigned int* sse,
+                                 int* sum);
+#define vpx_highbd_10_get16x16var vpx_highbd_10_get16x16var_c
+
+void vpx_highbd_10_get8x8var_c(const uint8_t* src_ptr,
+                               int src_stride,
+                               const uint8_t* ref_ptr,
+                               int ref_stride,
+                               unsigned int* sse,
+                               int* sum);
+#define vpx_highbd_10_get8x8var vpx_highbd_10_get8x8var_c
+
+unsigned int vpx_highbd_10_mse16x16_c(const uint8_t* src_ptr,
+                                      int src_stride,
+                                      const uint8_t* ref_ptr,
+                                      int ref_stride,
+                                      unsigned int* sse);
+#define vpx_highbd_10_mse16x16 vpx_highbd_10_mse16x16_c
+
+unsigned int vpx_highbd_10_mse16x8_c(const uint8_t* src_ptr,
+                                     int src_stride,
+                                     const uint8_t* ref_ptr,
+                                     int ref_stride,
+                                     unsigned int* sse);
+#define vpx_highbd_10_mse16x8 vpx_highbd_10_mse16x8_c
+
+unsigned int vpx_highbd_10_mse8x16_c(const uint8_t* src_ptr,
+                                     int src_stride,
+                                     const uint8_t* ref_ptr,
+                                     int ref_stride,
+                                     unsigned int* sse);
+#define vpx_highbd_10_mse8x16 vpx_highbd_10_mse8x16_c
+
+unsigned int vpx_highbd_10_mse8x8_c(const uint8_t* src_ptr,
+                                    int src_stride,
+                                    const uint8_t* ref_ptr,
+                                    int ref_stride,
+                                    unsigned int* sse);
+#define vpx_highbd_10_mse8x8 vpx_highbd_10_mse8x8_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance16x16_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance16x16 \
+  vpx_highbd_10_sub_pixel_avg_variance16x16_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance16x32_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance16x32 \
+  vpx_highbd_10_sub_pixel_avg_variance16x32_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance16x8_c(const uint8_t* src_ptr,
+                                                    int src_stride,
+                                                    int x_offset,
+                                                    int y_offset,
+                                                    const uint8_t* ref_ptr,
+                                                    int ref_stride,
+                                                    uint32_t* sse,
+                                                    const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance16x8 \
+  vpx_highbd_10_sub_pixel_avg_variance16x8_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance32x16_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance32x16 \
+  vpx_highbd_10_sub_pixel_avg_variance32x16_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance32x32_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance32x32 \
+  vpx_highbd_10_sub_pixel_avg_variance32x32_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance32x64_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance32x64 \
+  vpx_highbd_10_sub_pixel_avg_variance32x64_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance4x4_c(const uint8_t* src_ptr,
+                                                   int src_stride,
+                                                   int x_offset,
+                                                   int y_offset,
+                                                   const uint8_t* ref_ptr,
+                                                   int ref_stride,
+                                                   uint32_t* sse,
+                                                   const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance4x4 \
+  vpx_highbd_10_sub_pixel_avg_variance4x4_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance4x8_c(const uint8_t* src_ptr,
+                                                   int src_stride,
+                                                   int x_offset,
+                                                   int y_offset,
+                                                   const uint8_t* ref_ptr,
+                                                   int ref_stride,
+                                                   uint32_t* sse,
+                                                   const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance4x8 \
+  vpx_highbd_10_sub_pixel_avg_variance4x8_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance64x32_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance64x32 \
+  vpx_highbd_10_sub_pixel_avg_variance64x32_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance64x64_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance64x64 \
+  vpx_highbd_10_sub_pixel_avg_variance64x64_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance8x16_c(const uint8_t* src_ptr,
+                                                    int src_stride,
+                                                    int x_offset,
+                                                    int y_offset,
+                                                    const uint8_t* ref_ptr,
+                                                    int ref_stride,
+                                                    uint32_t* sse,
+                                                    const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance8x16 \
+  vpx_highbd_10_sub_pixel_avg_variance8x16_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance8x4_c(const uint8_t* src_ptr,
+                                                   int src_stride,
+                                                   int x_offset,
+                                                   int y_offset,
+                                                   const uint8_t* ref_ptr,
+                                                   int ref_stride,
+                                                   uint32_t* sse,
+                                                   const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance8x4 \
+  vpx_highbd_10_sub_pixel_avg_variance8x4_c
+
+uint32_t vpx_highbd_10_sub_pixel_avg_variance8x8_c(const uint8_t* src_ptr,
+                                                   int src_stride,
+                                                   int x_offset,
+                                                   int y_offset,
+                                                   const uint8_t* ref_ptr,
+                                                   int ref_stride,
+                                                   uint32_t* sse,
+                                                   const uint8_t* second_pred);
+#define vpx_highbd_10_sub_pixel_avg_variance8x8 \
+  vpx_highbd_10_sub_pixel_avg_variance8x8_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance16x16_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance16x16 \
+  vpx_highbd_10_sub_pixel_variance16x16_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance16x32_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance16x32 \
+  vpx_highbd_10_sub_pixel_variance16x32_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance16x8_c(const uint8_t* src_ptr,
+                                                int src_stride,
+                                                int x_offset,
+                                                int y_offset,
+                                                const uint8_t* ref_ptr,
+                                                int ref_stride,
+                                                uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance16x8 \
+  vpx_highbd_10_sub_pixel_variance16x8_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance32x16_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance32x16 \
+  vpx_highbd_10_sub_pixel_variance32x16_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance32x32_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance32x32 \
+  vpx_highbd_10_sub_pixel_variance32x32_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance32x64_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance32x64 \
+  vpx_highbd_10_sub_pixel_variance32x64_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance4x4_c(const uint8_t* src_ptr,
+                                               int src_stride,
+                                               int x_offset,
+                                               int y_offset,
+                                               const uint8_t* ref_ptr,
+                                               int ref_stride,
+                                               uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance4x4 \
+  vpx_highbd_10_sub_pixel_variance4x4_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance4x8_c(const uint8_t* src_ptr,
+                                               int src_stride,
+                                               int x_offset,
+                                               int y_offset,
+                                               const uint8_t* ref_ptr,
+                                               int ref_stride,
+                                               uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance4x8 \
+  vpx_highbd_10_sub_pixel_variance4x8_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance64x32_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance64x32 \
+  vpx_highbd_10_sub_pixel_variance64x32_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance64x64_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance64x64 \
+  vpx_highbd_10_sub_pixel_variance64x64_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance8x16_c(const uint8_t* src_ptr,
+                                                int src_stride,
+                                                int x_offset,
+                                                int y_offset,
+                                                const uint8_t* ref_ptr,
+                                                int ref_stride,
+                                                uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance8x16 \
+  vpx_highbd_10_sub_pixel_variance8x16_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance8x4_c(const uint8_t* src_ptr,
+                                               int src_stride,
+                                               int x_offset,
+                                               int y_offset,
+                                               const uint8_t* ref_ptr,
+                                               int ref_stride,
+                                               uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance8x4 \
+  vpx_highbd_10_sub_pixel_variance8x4_c
+
+uint32_t vpx_highbd_10_sub_pixel_variance8x8_c(const uint8_t* src_ptr,
+                                               int src_stride,
+                                               int x_offset,
+                                               int y_offset,
+                                               const uint8_t* ref_ptr,
+                                               int ref_stride,
+                                               uint32_t* sse);
+#define vpx_highbd_10_sub_pixel_variance8x8 \
+  vpx_highbd_10_sub_pixel_variance8x8_c
+
+unsigned int vpx_highbd_10_variance16x16_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_10_variance16x16 vpx_highbd_10_variance16x16_c
+
+unsigned int vpx_highbd_10_variance16x32_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_10_variance16x32 vpx_highbd_10_variance16x32_c
+
+unsigned int vpx_highbd_10_variance16x8_c(const uint8_t* src_ptr,
+                                          int src_stride,
+                                          const uint8_t* ref_ptr,
+                                          int ref_stride,
+                                          unsigned int* sse);
+#define vpx_highbd_10_variance16x8 vpx_highbd_10_variance16x8_c
+
+unsigned int vpx_highbd_10_variance32x16_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_10_variance32x16 vpx_highbd_10_variance32x16_c
+
+unsigned int vpx_highbd_10_variance32x32_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_10_variance32x32 vpx_highbd_10_variance32x32_c
+
+unsigned int vpx_highbd_10_variance32x64_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_10_variance32x64 vpx_highbd_10_variance32x64_c
+
+unsigned int vpx_highbd_10_variance4x4_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride,
+                                         unsigned int* sse);
+#define vpx_highbd_10_variance4x4 vpx_highbd_10_variance4x4_c
+
+unsigned int vpx_highbd_10_variance4x8_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride,
+                                         unsigned int* sse);
+#define vpx_highbd_10_variance4x8 vpx_highbd_10_variance4x8_c
+
+unsigned int vpx_highbd_10_variance64x32_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_10_variance64x32 vpx_highbd_10_variance64x32_c
+
+unsigned int vpx_highbd_10_variance64x64_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_10_variance64x64 vpx_highbd_10_variance64x64_c
+
+unsigned int vpx_highbd_10_variance8x16_c(const uint8_t* src_ptr,
+                                          int src_stride,
+                                          const uint8_t* ref_ptr,
+                                          int ref_stride,
+                                          unsigned int* sse);
+#define vpx_highbd_10_variance8x16 vpx_highbd_10_variance8x16_c
+
+unsigned int vpx_highbd_10_variance8x4_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride,
+                                         unsigned int* sse);
+#define vpx_highbd_10_variance8x4 vpx_highbd_10_variance8x4_c
+
+unsigned int vpx_highbd_10_variance8x8_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride,
+                                         unsigned int* sse);
+#define vpx_highbd_10_variance8x8 vpx_highbd_10_variance8x8_c
+
+void vpx_highbd_12_get16x16var_c(const uint8_t* src_ptr,
+                                 int src_stride,
+                                 const uint8_t* ref_ptr,
+                                 int ref_stride,
+                                 unsigned int* sse,
+                                 int* sum);
+#define vpx_highbd_12_get16x16var vpx_highbd_12_get16x16var_c
+
+void vpx_highbd_12_get8x8var_c(const uint8_t* src_ptr,
+                               int src_stride,
+                               const uint8_t* ref_ptr,
+                               int ref_stride,
+                               unsigned int* sse,
+                               int* sum);
+#define vpx_highbd_12_get8x8var vpx_highbd_12_get8x8var_c
+
+unsigned int vpx_highbd_12_mse16x16_c(const uint8_t* src_ptr,
+                                      int src_stride,
+                                      const uint8_t* ref_ptr,
+                                      int ref_stride,
+                                      unsigned int* sse);
+#define vpx_highbd_12_mse16x16 vpx_highbd_12_mse16x16_c
+
+unsigned int vpx_highbd_12_mse16x8_c(const uint8_t* src_ptr,
+                                     int src_stride,
+                                     const uint8_t* ref_ptr,
+                                     int ref_stride,
+                                     unsigned int* sse);
+#define vpx_highbd_12_mse16x8 vpx_highbd_12_mse16x8_c
+
+unsigned int vpx_highbd_12_mse8x16_c(const uint8_t* src_ptr,
+                                     int src_stride,
+                                     const uint8_t* ref_ptr,
+                                     int ref_stride,
+                                     unsigned int* sse);
+#define vpx_highbd_12_mse8x16 vpx_highbd_12_mse8x16_c
+
+unsigned int vpx_highbd_12_mse8x8_c(const uint8_t* src_ptr,
+                                    int src_stride,
+                                    const uint8_t* ref_ptr,
+                                    int ref_stride,
+                                    unsigned int* sse);
+#define vpx_highbd_12_mse8x8 vpx_highbd_12_mse8x8_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance16x16_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance16x16 \
+  vpx_highbd_12_sub_pixel_avg_variance16x16_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance16x32_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance16x32 \
+  vpx_highbd_12_sub_pixel_avg_variance16x32_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance16x8_c(const uint8_t* src_ptr,
+                                                    int src_stride,
+                                                    int x_offset,
+                                                    int y_offset,
+                                                    const uint8_t* ref_ptr,
+                                                    int ref_stride,
+                                                    uint32_t* sse,
+                                                    const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance16x8 \
+  vpx_highbd_12_sub_pixel_avg_variance16x8_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance32x16_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance32x16 \
+  vpx_highbd_12_sub_pixel_avg_variance32x16_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance32x32_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance32x32 \
+  vpx_highbd_12_sub_pixel_avg_variance32x32_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance32x64_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance32x64 \
+  vpx_highbd_12_sub_pixel_avg_variance32x64_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance4x4_c(const uint8_t* src_ptr,
+                                                   int src_stride,
+                                                   int x_offset,
+                                                   int y_offset,
+                                                   const uint8_t* ref_ptr,
+                                                   int ref_stride,
+                                                   uint32_t* sse,
+                                                   const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance4x4 \
+  vpx_highbd_12_sub_pixel_avg_variance4x4_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance4x8_c(const uint8_t* src_ptr,
+                                                   int src_stride,
+                                                   int x_offset,
+                                                   int y_offset,
+                                                   const uint8_t* ref_ptr,
+                                                   int ref_stride,
+                                                   uint32_t* sse,
+                                                   const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance4x8 \
+  vpx_highbd_12_sub_pixel_avg_variance4x8_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance64x32_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance64x32 \
+  vpx_highbd_12_sub_pixel_avg_variance64x32_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance64x64_c(
+    const uint8_t* src_ptr,
+    int src_stride,
+    int x_offset,
+    int y_offset,
+    const uint8_t* ref_ptr,
+    int ref_stride,
+    uint32_t* sse,
+    const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance64x64 \
+  vpx_highbd_12_sub_pixel_avg_variance64x64_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance8x16_c(const uint8_t* src_ptr,
+                                                    int src_stride,
+                                                    int x_offset,
+                                                    int y_offset,
+                                                    const uint8_t* ref_ptr,
+                                                    int ref_stride,
+                                                    uint32_t* sse,
+                                                    const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance8x16 \
+  vpx_highbd_12_sub_pixel_avg_variance8x16_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance8x4_c(const uint8_t* src_ptr,
+                                                   int src_stride,
+                                                   int x_offset,
+                                                   int y_offset,
+                                                   const uint8_t* ref_ptr,
+                                                   int ref_stride,
+                                                   uint32_t* sse,
+                                                   const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance8x4 \
+  vpx_highbd_12_sub_pixel_avg_variance8x4_c
+
+uint32_t vpx_highbd_12_sub_pixel_avg_variance8x8_c(const uint8_t* src_ptr,
+                                                   int src_stride,
+                                                   int x_offset,
+                                                   int y_offset,
+                                                   const uint8_t* ref_ptr,
+                                                   int ref_stride,
+                                                   uint32_t* sse,
+                                                   const uint8_t* second_pred);
+#define vpx_highbd_12_sub_pixel_avg_variance8x8 \
+  vpx_highbd_12_sub_pixel_avg_variance8x8_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance16x16_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance16x16 \
+  vpx_highbd_12_sub_pixel_variance16x16_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance16x32_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance16x32 \
+  vpx_highbd_12_sub_pixel_variance16x32_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance16x8_c(const uint8_t* src_ptr,
+                                                int src_stride,
+                                                int x_offset,
+                                                int y_offset,
+                                                const uint8_t* ref_ptr,
+                                                int ref_stride,
+                                                uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance16x8 \
+  vpx_highbd_12_sub_pixel_variance16x8_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance32x16_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance32x16 \
+  vpx_highbd_12_sub_pixel_variance32x16_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance32x32_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance32x32 \
+  vpx_highbd_12_sub_pixel_variance32x32_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance32x64_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance32x64 \
+  vpx_highbd_12_sub_pixel_variance32x64_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance4x4_c(const uint8_t* src_ptr,
+                                               int src_stride,
+                                               int x_offset,
+                                               int y_offset,
+                                               const uint8_t* ref_ptr,
+                                               int ref_stride,
+                                               uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance4x4 \
+  vpx_highbd_12_sub_pixel_variance4x4_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance4x8_c(const uint8_t* src_ptr,
+                                               int src_stride,
+                                               int x_offset,
+                                               int y_offset,
+                                               const uint8_t* ref_ptr,
+                                               int ref_stride,
+                                               uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance4x8 \
+  vpx_highbd_12_sub_pixel_variance4x8_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance64x32_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance64x32 \
+  vpx_highbd_12_sub_pixel_variance64x32_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance64x64_c(const uint8_t* src_ptr,
+                                                 int src_stride,
+                                                 int x_offset,
+                                                 int y_offset,
+                                                 const uint8_t* ref_ptr,
+                                                 int ref_stride,
+                                                 uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance64x64 \
+  vpx_highbd_12_sub_pixel_variance64x64_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance8x16_c(const uint8_t* src_ptr,
+                                                int src_stride,
+                                                int x_offset,
+                                                int y_offset,
+                                                const uint8_t* ref_ptr,
+                                                int ref_stride,
+                                                uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance8x16 \
+  vpx_highbd_12_sub_pixel_variance8x16_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance8x4_c(const uint8_t* src_ptr,
+                                               int src_stride,
+                                               int x_offset,
+                                               int y_offset,
+                                               const uint8_t* ref_ptr,
+                                               int ref_stride,
+                                               uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance8x4 \
+  vpx_highbd_12_sub_pixel_variance8x4_c
+
+uint32_t vpx_highbd_12_sub_pixel_variance8x8_c(const uint8_t* src_ptr,
+                                               int src_stride,
+                                               int x_offset,
+                                               int y_offset,
+                                               const uint8_t* ref_ptr,
+                                               int ref_stride,
+                                               uint32_t* sse);
+#define vpx_highbd_12_sub_pixel_variance8x8 \
+  vpx_highbd_12_sub_pixel_variance8x8_c
+
+unsigned int vpx_highbd_12_variance16x16_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_12_variance16x16 vpx_highbd_12_variance16x16_c
+
+unsigned int vpx_highbd_12_variance16x32_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_12_variance16x32 vpx_highbd_12_variance16x32_c
+
+unsigned int vpx_highbd_12_variance16x8_c(const uint8_t* src_ptr,
+                                          int src_stride,
+                                          const uint8_t* ref_ptr,
+                                          int ref_stride,
+                                          unsigned int* sse);
+#define vpx_highbd_12_variance16x8 vpx_highbd_12_variance16x8_c
+
+unsigned int vpx_highbd_12_variance32x16_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_12_variance32x16 vpx_highbd_12_variance32x16_c
+
+unsigned int vpx_highbd_12_variance32x32_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_12_variance32x32 vpx_highbd_12_variance32x32_c
+
+unsigned int vpx_highbd_12_variance32x64_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_12_variance32x64 vpx_highbd_12_variance32x64_c
+
+unsigned int vpx_highbd_12_variance4x4_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride,
+                                         unsigned int* sse);
+#define vpx_highbd_12_variance4x4 vpx_highbd_12_variance4x4_c
+
+unsigned int vpx_highbd_12_variance4x8_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride,
+                                         unsigned int* sse);
+#define vpx_highbd_12_variance4x8 vpx_highbd_12_variance4x8_c
+
+unsigned int vpx_highbd_12_variance64x32_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_12_variance64x32 vpx_highbd_12_variance64x32_c
+
+unsigned int vpx_highbd_12_variance64x64_c(const uint8_t* src_ptr,
+                                           int src_stride,
+                                           const uint8_t* ref_ptr,
+                                           int ref_stride,
+                                           unsigned int* sse);
+#define vpx_highbd_12_variance64x64 vpx_highbd_12_variance64x64_c
+
+unsigned int vpx_highbd_12_variance8x16_c(const uint8_t* src_ptr,
+                                          int src_stride,
+                                          const uint8_t* ref_ptr,
+                                          int ref_stride,
+                                          unsigned int* sse);
+#define vpx_highbd_12_variance8x16 vpx_highbd_12_variance8x16_c
+
+unsigned int vpx_highbd_12_variance8x4_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride,
+                                         unsigned int* sse);
+#define vpx_highbd_12_variance8x4 vpx_highbd_12_variance8x4_c
+
+unsigned int vpx_highbd_12_variance8x8_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride,
+                                         unsigned int* sse);
+#define vpx_highbd_12_variance8x8 vpx_highbd_12_variance8x8_c
+
+void vpx_highbd_8_get16x16var_c(const uint8_t* src_ptr,
+                                int src_stride,
+                                const uint8_t* ref_ptr,
+                                int ref_stride,
+                                unsigned int* sse,
+                                int* sum);
+#define vpx_highbd_8_get16x16var vpx_highbd_8_get16x16var_c
+
+void vpx_highbd_8_get8x8var_c(const uint8_t* src_ptr,
+                              int src_stride,
+                              const uint8_t* ref_ptr,
+                              int ref_stride,
+                              unsigned int* sse,
+                              int* sum);
+#define vpx_highbd_8_get8x8var vpx_highbd_8_get8x8var_c
+
+unsigned int vpx_highbd_8_mse16x16_c(const uint8_t* src_ptr,
+                                     int src_stride,
+                                     const uint8_t* ref_ptr,
+                                     int ref_stride,
+                                     unsigned int* sse);
+#define vpx_highbd_8_mse16x16 vpx_highbd_8_mse16x16_c
+
+unsigned int vpx_highbd_8_mse16x8_c(const uint8_t* src_ptr,
+                                    int src_stride,
+                                    const uint8_t* ref_ptr,
+                                    int ref_stride,
+                                    unsigned int* sse);
+#define vpx_highbd_8_mse16x8 vpx_highbd_8_mse16x8_c
+
+unsigned int vpx_highbd_8_mse8x16_c(const uint8_t* src_ptr,
+                                    int src_stride,
+                                    const uint8_t* ref_ptr,
+                                    int ref_stride,
+                                    unsigned int* sse);
+#define vpx_highbd_8_mse8x16 vpx_highbd_8_mse8x16_c
+
+unsigned int vpx_highbd_8_mse8x8_c(const uint8_t* src_ptr,
+                                   int src_stride,
+                                   const uint8_t* ref_ptr,
+                                   int ref_stride,
+                                   unsigned int* sse);
+#define vpx_highbd_8_mse8x8 vpx_highbd_8_mse8x8_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance16x16_c(const uint8_t* src_ptr,
+                                                    int src_stride,
+                                                    int x_offset,
+                                                    int y_offset,
+                                                    const uint8_t* ref_ptr,
+                                                    int ref_stride,
+                                                    uint32_t* sse,
+                                                    const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance16x16 \
+  vpx_highbd_8_sub_pixel_avg_variance16x16_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance16x32_c(const uint8_t* src_ptr,
+                                                    int src_stride,
+                                                    int x_offset,
+                                                    int y_offset,
+                                                    const uint8_t* ref_ptr,
+                                                    int ref_stride,
+                                                    uint32_t* sse,
+                                                    const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance16x32 \
+  vpx_highbd_8_sub_pixel_avg_variance16x32_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance16x8_c(const uint8_t* src_ptr,
+                                                   int src_stride,
+                                                   int x_offset,
+                                                   int y_offset,
+                                                   const uint8_t* ref_ptr,
+                                                   int ref_stride,
+                                                   uint32_t* sse,
+                                                   const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance16x8 \
+  vpx_highbd_8_sub_pixel_avg_variance16x8_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance32x16_c(const uint8_t* src_ptr,
+                                                    int src_stride,
+                                                    int x_offset,
+                                                    int y_offset,
+                                                    const uint8_t* ref_ptr,
+                                                    int ref_stride,
+                                                    uint32_t* sse,
+                                                    const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance32x16 \
+  vpx_highbd_8_sub_pixel_avg_variance32x16_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance32x32_c(const uint8_t* src_ptr,
+                                                    int src_stride,
+                                                    int x_offset,
+                                                    int y_offset,
+                                                    const uint8_t* ref_ptr,
+                                                    int ref_stride,
+                                                    uint32_t* sse,
+                                                    const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance32x32 \
+  vpx_highbd_8_sub_pixel_avg_variance32x32_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance32x64_c(const uint8_t* src_ptr,
+                                                    int src_stride,
+                                                    int x_offset,
+                                                    int y_offset,
+                                                    const uint8_t* ref_ptr,
+                                                    int ref_stride,
+                                                    uint32_t* sse,
+                                                    const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance32x64 \
+  vpx_highbd_8_sub_pixel_avg_variance32x64_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance4x4_c(const uint8_t* src_ptr,
+                                                  int src_stride,
+                                                  int x_offset,
+                                                  int y_offset,
+                                                  const uint8_t* ref_ptr,
+                                                  int ref_stride,
+                                                  uint32_t* sse,
+                                                  const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance4x4 \
+  vpx_highbd_8_sub_pixel_avg_variance4x4_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance4x8_c(const uint8_t* src_ptr,
+                                                  int src_stride,
+                                                  int x_offset,
+                                                  int y_offset,
+                                                  const uint8_t* ref_ptr,
+                                                  int ref_stride,
+                                                  uint32_t* sse,
+                                                  const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance4x8 \
+  vpx_highbd_8_sub_pixel_avg_variance4x8_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance64x32_c(const uint8_t* src_ptr,
+                                                    int src_stride,
+                                                    int x_offset,
+                                                    int y_offset,
+                                                    const uint8_t* ref_ptr,
+                                                    int ref_stride,
+                                                    uint32_t* sse,
+                                                    const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance64x32 \
+  vpx_highbd_8_sub_pixel_avg_variance64x32_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance64x64_c(const uint8_t* src_ptr,
+                                                    int src_stride,
+                                                    int x_offset,
+                                                    int y_offset,
+                                                    const uint8_t* ref_ptr,
+                                                    int ref_stride,
+                                                    uint32_t* sse,
+                                                    const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance64x64 \
+  vpx_highbd_8_sub_pixel_avg_variance64x64_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance8x16_c(const uint8_t* src_ptr,
+                                                   int src_stride,
+                                                   int x_offset,
+                                                   int y_offset,
+                                                   const uint8_t* ref_ptr,
+                                                   int ref_stride,
+                                                   uint32_t* sse,
+                                                   const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance8x16 \
+  vpx_highbd_8_sub_pixel_avg_variance8x16_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance8x4_c(const uint8_t* src_ptr,
+                                                  int src_stride,
+                                                  int x_offset,
+                                                  int y_offset,
+                                                  const uint8_t* ref_ptr,
+                                                  int ref_stride,
+                                                  uint32_t* sse,
+                                                  const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance8x4 \
+  vpx_highbd_8_sub_pixel_avg_variance8x4_c
+
+uint32_t vpx_highbd_8_sub_pixel_avg_variance8x8_c(const uint8_t* src_ptr,
+                                                  int src_stride,
+                                                  int x_offset,
+                                                  int y_offset,
+                                                  const uint8_t* ref_ptr,
+                                                  int ref_stride,
+                                                  uint32_t* sse,
+                                                  const uint8_t* second_pred);
+#define vpx_highbd_8_sub_pixel_avg_variance8x8 \
+  vpx_highbd_8_sub_pixel_avg_variance8x8_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance16x16_c(const uint8_t* src_ptr,
+                                                int src_stride,
+                                                int x_offset,
+                                                int y_offset,
+                                                const uint8_t* ref_ptr,
+                                                int ref_stride,
+                                                uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance16x16 \
+  vpx_highbd_8_sub_pixel_variance16x16_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance16x32_c(const uint8_t* src_ptr,
+                                                int src_stride,
+                                                int x_offset,
+                                                int y_offset,
+                                                const uint8_t* ref_ptr,
+                                                int ref_stride,
+                                                uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance16x32 \
+  vpx_highbd_8_sub_pixel_variance16x32_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance16x8_c(const uint8_t* src_ptr,
+                                               int src_stride,
+                                               int x_offset,
+                                               int y_offset,
+                                               const uint8_t* ref_ptr,
+                                               int ref_stride,
+                                               uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance16x8 \
+  vpx_highbd_8_sub_pixel_variance16x8_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance32x16_c(const uint8_t* src_ptr,
+                                                int src_stride,
+                                                int x_offset,
+                                                int y_offset,
+                                                const uint8_t* ref_ptr,
+                                                int ref_stride,
+                                                uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance32x16 \
+  vpx_highbd_8_sub_pixel_variance32x16_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance32x32_c(const uint8_t* src_ptr,
+                                                int src_stride,
+                                                int x_offset,
+                                                int y_offset,
+                                                const uint8_t* ref_ptr,
+                                                int ref_stride,
+                                                uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance32x32 \
+  vpx_highbd_8_sub_pixel_variance32x32_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance32x64_c(const uint8_t* src_ptr,
+                                                int src_stride,
+                                                int x_offset,
+                                                int y_offset,
+                                                const uint8_t* ref_ptr,
+                                                int ref_stride,
+                                                uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance32x64 \
+  vpx_highbd_8_sub_pixel_variance32x64_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance4x4_c(const uint8_t* src_ptr,
+                                              int src_stride,
+                                              int x_offset,
+                                              int y_offset,
+                                              const uint8_t* ref_ptr,
+                                              int ref_stride,
+                                              uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance4x4 vpx_highbd_8_sub_pixel_variance4x4_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance4x8_c(const uint8_t* src_ptr,
+                                              int src_stride,
+                                              int x_offset,
+                                              int y_offset,
+                                              const uint8_t* ref_ptr,
+                                              int ref_stride,
+                                              uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance4x8 vpx_highbd_8_sub_pixel_variance4x8_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance64x32_c(const uint8_t* src_ptr,
+                                                int src_stride,
+                                                int x_offset,
+                                                int y_offset,
+                                                const uint8_t* ref_ptr,
+                                                int ref_stride,
+                                                uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance64x32 \
+  vpx_highbd_8_sub_pixel_variance64x32_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance64x64_c(const uint8_t* src_ptr,
+                                                int src_stride,
+                                                int x_offset,
+                                                int y_offset,
+                                                const uint8_t* ref_ptr,
+                                                int ref_stride,
+                                                uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance64x64 \
+  vpx_highbd_8_sub_pixel_variance64x64_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance8x16_c(const uint8_t* src_ptr,
+                                               int src_stride,
+                                               int x_offset,
+                                               int y_offset,
+                                               const uint8_t* ref_ptr,
+                                               int ref_stride,
+                                               uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance8x16 \
+  vpx_highbd_8_sub_pixel_variance8x16_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance8x4_c(const uint8_t* src_ptr,
+                                              int src_stride,
+                                              int x_offset,
+                                              int y_offset,
+                                              const uint8_t* ref_ptr,
+                                              int ref_stride,
+                                              uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance8x4 vpx_highbd_8_sub_pixel_variance8x4_c
+
+uint32_t vpx_highbd_8_sub_pixel_variance8x8_c(const uint8_t* src_ptr,
+                                              int src_stride,
+                                              int x_offset,
+                                              int y_offset,
+                                              const uint8_t* ref_ptr,
+                                              int ref_stride,
+                                              uint32_t* sse);
+#define vpx_highbd_8_sub_pixel_variance8x8 vpx_highbd_8_sub_pixel_variance8x8_c
+
+unsigned int vpx_highbd_8_variance16x16_c(const uint8_t* src_ptr,
+                                          int src_stride,
+                                          const uint8_t* ref_ptr,
+                                          int ref_stride,
+                                          unsigned int* sse);
+#define vpx_highbd_8_variance16x16 vpx_highbd_8_variance16x16_c
+
+unsigned int vpx_highbd_8_variance16x32_c(const uint8_t* src_ptr,
+                                          int src_stride,
+                                          const uint8_t* ref_ptr,
+                                          int ref_stride,
+                                          unsigned int* sse);
+#define vpx_highbd_8_variance16x32 vpx_highbd_8_variance16x32_c
+
+unsigned int vpx_highbd_8_variance16x8_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride,
+                                         unsigned int* sse);
+#define vpx_highbd_8_variance16x8 vpx_highbd_8_variance16x8_c
+
+unsigned int vpx_highbd_8_variance32x16_c(const uint8_t* src_ptr,
+                                          int src_stride,
+                                          const uint8_t* ref_ptr,
+                                          int ref_stride,
+                                          unsigned int* sse);
+#define vpx_highbd_8_variance32x16 vpx_highbd_8_variance32x16_c
+
+unsigned int vpx_highbd_8_variance32x32_c(const uint8_t* src_ptr,
+                                          int src_stride,
+                                          const uint8_t* ref_ptr,
+                                          int ref_stride,
+                                          unsigned int* sse);
+#define vpx_highbd_8_variance32x32 vpx_highbd_8_variance32x32_c
+
+unsigned int vpx_highbd_8_variance32x64_c(const uint8_t* src_ptr,
+                                          int src_stride,
+                                          const uint8_t* ref_ptr,
+                                          int ref_stride,
+                                          unsigned int* sse);
+#define vpx_highbd_8_variance32x64 vpx_highbd_8_variance32x64_c
+
+unsigned int vpx_highbd_8_variance4x4_c(const uint8_t* src_ptr,
+                                        int src_stride,
+                                        const uint8_t* ref_ptr,
+                                        int ref_stride,
+                                        unsigned int* sse);
+#define vpx_highbd_8_variance4x4 vpx_highbd_8_variance4x4_c
+
+unsigned int vpx_highbd_8_variance4x8_c(const uint8_t* src_ptr,
+                                        int src_stride,
+                                        const uint8_t* ref_ptr,
+                                        int ref_stride,
+                                        unsigned int* sse);
+#define vpx_highbd_8_variance4x8 vpx_highbd_8_variance4x8_c
+
+unsigned int vpx_highbd_8_variance64x32_c(const uint8_t* src_ptr,
+                                          int src_stride,
+                                          const uint8_t* ref_ptr,
+                                          int ref_stride,
+                                          unsigned int* sse);
+#define vpx_highbd_8_variance64x32 vpx_highbd_8_variance64x32_c
+
+unsigned int vpx_highbd_8_variance64x64_c(const uint8_t* src_ptr,
+                                          int src_stride,
+                                          const uint8_t* ref_ptr,
+                                          int ref_stride,
+                                          unsigned int* sse);
+#define vpx_highbd_8_variance64x64 vpx_highbd_8_variance64x64_c
+
+unsigned int vpx_highbd_8_variance8x16_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride,
+                                         unsigned int* sse);
+#define vpx_highbd_8_variance8x16 vpx_highbd_8_variance8x16_c
+
+unsigned int vpx_highbd_8_variance8x4_c(const uint8_t* src_ptr,
+                                        int src_stride,
+                                        const uint8_t* ref_ptr,
+                                        int ref_stride,
+                                        unsigned int* sse);
+#define vpx_highbd_8_variance8x4 vpx_highbd_8_variance8x4_c
+
+unsigned int vpx_highbd_8_variance8x8_c(const uint8_t* src_ptr,
+                                        int src_stride,
+                                        const uint8_t* ref_ptr,
+                                        int ref_stride,
+                                        unsigned int* sse);
+#define vpx_highbd_8_variance8x8 vpx_highbd_8_variance8x8_c
+
+unsigned int vpx_highbd_avg_4x4_c(const uint8_t* s8, int p);
+#define vpx_highbd_avg_4x4 vpx_highbd_avg_4x4_c
+
+unsigned int vpx_highbd_avg_8x8_c(const uint8_t* s8, int p);
+#define vpx_highbd_avg_8x8 vpx_highbd_avg_8x8_c
+
+void vpx_highbd_comp_avg_pred_c(uint16_t* comp_pred,
+                                const uint16_t* pred,
+                                int width,
+                                int height,
+                                const uint16_t* ref,
+                                int ref_stride);
+#define vpx_highbd_comp_avg_pred vpx_highbd_comp_avg_pred_c
+
+void vpx_highbd_convolve8_c(const uint16_t* src,
+                            ptrdiff_t src_stride,
+                            uint16_t* dst,
+                            ptrdiff_t dst_stride,
+                            const InterpKernel* filter,
+                            int x0_q4,
+                            int x_step_q4,
+                            int y0_q4,
+                            int y_step_q4,
+                            int w,
+                            int h,
+                            int bd);
+#define vpx_highbd_convolve8 vpx_highbd_convolve8_c
+
+void vpx_highbd_convolve8_avg_c(const uint16_t* src,
+                                ptrdiff_t src_stride,
+                                uint16_t* dst,
+                                ptrdiff_t dst_stride,
+                                const InterpKernel* filter,
+                                int x0_q4,
+                                int x_step_q4,
+                                int y0_q4,
+                                int y_step_q4,
+                                int w,
+                                int h,
+                                int bd);
+#define vpx_highbd_convolve8_avg vpx_highbd_convolve8_avg_c
+
+void vpx_highbd_convolve8_avg_horiz_c(const uint16_t* src,
+                                      ptrdiff_t src_stride,
+                                      uint16_t* dst,
+                                      ptrdiff_t dst_stride,
+                                      const InterpKernel* filter,
+                                      int x0_q4,
+                                      int x_step_q4,
+                                      int y0_q4,
+                                      int y_step_q4,
+                                      int w,
+                                      int h,
+                                      int bd);
+#define vpx_highbd_convolve8_avg_horiz vpx_highbd_convolve8_avg_horiz_c
+
+void vpx_highbd_convolve8_avg_vert_c(const uint16_t* src,
+                                     ptrdiff_t src_stride,
+                                     uint16_t* dst,
+                                     ptrdiff_t dst_stride,
+                                     const InterpKernel* filter,
+                                     int x0_q4,
+                                     int x_step_q4,
+                                     int y0_q4,
+                                     int y_step_q4,
+                                     int w,
+                                     int h,
+                                     int bd);
+#define vpx_highbd_convolve8_avg_vert vpx_highbd_convolve8_avg_vert_c
+
+void vpx_highbd_convolve8_horiz_c(const uint16_t* src,
+                                  ptrdiff_t src_stride,
+                                  uint16_t* dst,
+                                  ptrdiff_t dst_stride,
+                                  const InterpKernel* filter,
+                                  int x0_q4,
+                                  int x_step_q4,
+                                  int y0_q4,
+                                  int y_step_q4,
+                                  int w,
+                                  int h,
+                                  int bd);
+#define vpx_highbd_convolve8_horiz vpx_highbd_convolve8_horiz_c
+
+void vpx_highbd_convolve8_vert_c(const uint16_t* src,
+                                 ptrdiff_t src_stride,
+                                 uint16_t* dst,
+                                 ptrdiff_t dst_stride,
+                                 const InterpKernel* filter,
+                                 int x0_q4,
+                                 int x_step_q4,
+                                 int y0_q4,
+                                 int y_step_q4,
+                                 int w,
+                                 int h,
+                                 int bd);
+#define vpx_highbd_convolve8_vert vpx_highbd_convolve8_vert_c
+
+void vpx_highbd_convolve_avg_c(const uint16_t* src,
+                               ptrdiff_t src_stride,
+                               uint16_t* dst,
+                               ptrdiff_t dst_stride,
+                               const InterpKernel* filter,
+                               int x0_q4,
+                               int x_step_q4,
+                               int y0_q4,
+                               int y_step_q4,
+                               int w,
+                               int h,
+                               int bd);
+#define vpx_highbd_convolve_avg vpx_highbd_convolve_avg_c
+
+void vpx_highbd_convolve_copy_c(const uint16_t* src,
+                                ptrdiff_t src_stride,
+                                uint16_t* dst,
+                                ptrdiff_t dst_stride,
+                                const InterpKernel* filter,
+                                int x0_q4,
+                                int x_step_q4,
+                                int y0_q4,
+                                int y_step_q4,
+                                int w,
+                                int h,
+                                int bd);
+#define vpx_highbd_convolve_copy vpx_highbd_convolve_copy_c
+
+void vpx_highbd_d117_predictor_16x16_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_d117_predictor_16x16 vpx_highbd_d117_predictor_16x16_c
+
+void vpx_highbd_d117_predictor_32x32_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_d117_predictor_32x32 vpx_highbd_d117_predictor_32x32_c
+
+void vpx_highbd_d117_predictor_4x4_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_d117_predictor_4x4 vpx_highbd_d117_predictor_4x4_c
+
+void vpx_highbd_d117_predictor_8x8_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_d117_predictor_8x8 vpx_highbd_d117_predictor_8x8_c
+
+void vpx_highbd_d135_predictor_16x16_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_d135_predictor_16x16 vpx_highbd_d135_predictor_16x16_c
+
+void vpx_highbd_d135_predictor_32x32_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_d135_predictor_32x32 vpx_highbd_d135_predictor_32x32_c
+
+void vpx_highbd_d135_predictor_4x4_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_d135_predictor_4x4 vpx_highbd_d135_predictor_4x4_c
+
+void vpx_highbd_d135_predictor_8x8_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_d135_predictor_8x8 vpx_highbd_d135_predictor_8x8_c
+
+void vpx_highbd_d153_predictor_16x16_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_d153_predictor_16x16 vpx_highbd_d153_predictor_16x16_c
+
+void vpx_highbd_d153_predictor_32x32_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_d153_predictor_32x32 vpx_highbd_d153_predictor_32x32_c
+
+void vpx_highbd_d153_predictor_4x4_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_d153_predictor_4x4 vpx_highbd_d153_predictor_4x4_c
+
+void vpx_highbd_d153_predictor_8x8_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_d153_predictor_8x8 vpx_highbd_d153_predictor_8x8_c
+
+void vpx_highbd_d207_predictor_16x16_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_d207_predictor_16x16 vpx_highbd_d207_predictor_16x16_c
+
+void vpx_highbd_d207_predictor_32x32_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_d207_predictor_32x32 vpx_highbd_d207_predictor_32x32_c
+
+void vpx_highbd_d207_predictor_4x4_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_d207_predictor_4x4 vpx_highbd_d207_predictor_4x4_c
+
+void vpx_highbd_d207_predictor_8x8_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_d207_predictor_8x8 vpx_highbd_d207_predictor_8x8_c
+
+void vpx_highbd_d45_predictor_16x16_c(uint16_t* dst,
+                                      ptrdiff_t stride,
+                                      const uint16_t* above,
+                                      const uint16_t* left,
+                                      int bd);
+#define vpx_highbd_d45_predictor_16x16 vpx_highbd_d45_predictor_16x16_c
+
+void vpx_highbd_d45_predictor_32x32_c(uint16_t* dst,
+                                      ptrdiff_t stride,
+                                      const uint16_t* above,
+                                      const uint16_t* left,
+                                      int bd);
+#define vpx_highbd_d45_predictor_32x32 vpx_highbd_d45_predictor_32x32_c
+
+void vpx_highbd_d45_predictor_4x4_c(uint16_t* dst,
+                                    ptrdiff_t stride,
+                                    const uint16_t* above,
+                                    const uint16_t* left,
+                                    int bd);
+#define vpx_highbd_d45_predictor_4x4 vpx_highbd_d45_predictor_4x4_c
+
+void vpx_highbd_d45_predictor_8x8_c(uint16_t* dst,
+                                    ptrdiff_t stride,
+                                    const uint16_t* above,
+                                    const uint16_t* left,
+                                    int bd);
+#define vpx_highbd_d45_predictor_8x8 vpx_highbd_d45_predictor_8x8_c
+
+void vpx_highbd_d63_predictor_16x16_c(uint16_t* dst,
+                                      ptrdiff_t stride,
+                                      const uint16_t* above,
+                                      const uint16_t* left,
+                                      int bd);
+#define vpx_highbd_d63_predictor_16x16 vpx_highbd_d63_predictor_16x16_c
+
+void vpx_highbd_d63_predictor_32x32_c(uint16_t* dst,
+                                      ptrdiff_t stride,
+                                      const uint16_t* above,
+                                      const uint16_t* left,
+                                      int bd);
+#define vpx_highbd_d63_predictor_32x32 vpx_highbd_d63_predictor_32x32_c
+
+void vpx_highbd_d63_predictor_4x4_c(uint16_t* dst,
+                                    ptrdiff_t stride,
+                                    const uint16_t* above,
+                                    const uint16_t* left,
+                                    int bd);
+#define vpx_highbd_d63_predictor_4x4 vpx_highbd_d63_predictor_4x4_c
+
+void vpx_highbd_d63_predictor_8x8_c(uint16_t* dst,
+                                    ptrdiff_t stride,
+                                    const uint16_t* above,
+                                    const uint16_t* left,
+                                    int bd);
+#define vpx_highbd_d63_predictor_8x8 vpx_highbd_d63_predictor_8x8_c
+
+void vpx_highbd_dc_128_predictor_16x16_c(uint16_t* dst,
+                                         ptrdiff_t stride,
+                                         const uint16_t* above,
+                                         const uint16_t* left,
+                                         int bd);
+#define vpx_highbd_dc_128_predictor_16x16 vpx_highbd_dc_128_predictor_16x16_c
+
+void vpx_highbd_dc_128_predictor_32x32_c(uint16_t* dst,
+                                         ptrdiff_t stride,
+                                         const uint16_t* above,
+                                         const uint16_t* left,
+                                         int bd);
+#define vpx_highbd_dc_128_predictor_32x32 vpx_highbd_dc_128_predictor_32x32_c
+
+void vpx_highbd_dc_128_predictor_4x4_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_dc_128_predictor_4x4 vpx_highbd_dc_128_predictor_4x4_c
+
+void vpx_highbd_dc_128_predictor_8x8_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_dc_128_predictor_8x8 vpx_highbd_dc_128_predictor_8x8_c
+
+void vpx_highbd_dc_left_predictor_16x16_c(uint16_t* dst,
+                                          ptrdiff_t stride,
+                                          const uint16_t* above,
+                                          const uint16_t* left,
+                                          int bd);
+#define vpx_highbd_dc_left_predictor_16x16 vpx_highbd_dc_left_predictor_16x16_c
+
+void vpx_highbd_dc_left_predictor_32x32_c(uint16_t* dst,
+                                          ptrdiff_t stride,
+                                          const uint16_t* above,
+                                          const uint16_t* left,
+                                          int bd);
+#define vpx_highbd_dc_left_predictor_32x32 vpx_highbd_dc_left_predictor_32x32_c
+
+void vpx_highbd_dc_left_predictor_4x4_c(uint16_t* dst,
+                                        ptrdiff_t stride,
+                                        const uint16_t* above,
+                                        const uint16_t* left,
+                                        int bd);
+#define vpx_highbd_dc_left_predictor_4x4 vpx_highbd_dc_left_predictor_4x4_c
+
+void vpx_highbd_dc_left_predictor_8x8_c(uint16_t* dst,
+                                        ptrdiff_t stride,
+                                        const uint16_t* above,
+                                        const uint16_t* left,
+                                        int bd);
+#define vpx_highbd_dc_left_predictor_8x8 vpx_highbd_dc_left_predictor_8x8_c
+
+void vpx_highbd_dc_predictor_16x16_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_dc_predictor_16x16 vpx_highbd_dc_predictor_16x16_c
+
+void vpx_highbd_dc_predictor_32x32_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_dc_predictor_32x32 vpx_highbd_dc_predictor_32x32_c
+
+void vpx_highbd_dc_predictor_4x4_c(uint16_t* dst,
+                                   ptrdiff_t stride,
+                                   const uint16_t* above,
+                                   const uint16_t* left,
+                                   int bd);
+#define vpx_highbd_dc_predictor_4x4 vpx_highbd_dc_predictor_4x4_c
+
+void vpx_highbd_dc_predictor_8x8_c(uint16_t* dst,
+                                   ptrdiff_t stride,
+                                   const uint16_t* above,
+                                   const uint16_t* left,
+                                   int bd);
+#define vpx_highbd_dc_predictor_8x8 vpx_highbd_dc_predictor_8x8_c
+
+void vpx_highbd_dc_top_predictor_16x16_c(uint16_t* dst,
+                                         ptrdiff_t stride,
+                                         const uint16_t* above,
+                                         const uint16_t* left,
+                                         int bd);
+#define vpx_highbd_dc_top_predictor_16x16 vpx_highbd_dc_top_predictor_16x16_c
+
+void vpx_highbd_dc_top_predictor_32x32_c(uint16_t* dst,
+                                         ptrdiff_t stride,
+                                         const uint16_t* above,
+                                         const uint16_t* left,
+                                         int bd);
+#define vpx_highbd_dc_top_predictor_32x32 vpx_highbd_dc_top_predictor_32x32_c
+
+void vpx_highbd_dc_top_predictor_4x4_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_dc_top_predictor_4x4 vpx_highbd_dc_top_predictor_4x4_c
+
+void vpx_highbd_dc_top_predictor_8x8_c(uint16_t* dst,
+                                       ptrdiff_t stride,
+                                       const uint16_t* above,
+                                       const uint16_t* left,
+                                       int bd);
+#define vpx_highbd_dc_top_predictor_8x8 vpx_highbd_dc_top_predictor_8x8_c
+
+void vpx_highbd_fdct16x16_c(const int16_t* input,
+                            tran_low_t* output,
+                            int stride);
+#define vpx_highbd_fdct16x16 vpx_highbd_fdct16x16_c
+
+void vpx_highbd_fdct16x16_1_c(const int16_t* input,
+                              tran_low_t* output,
+                              int stride);
+#define vpx_highbd_fdct16x16_1 vpx_highbd_fdct16x16_1_c
+
+void vpx_highbd_fdct32x32_c(const int16_t* input,
+                            tran_low_t* output,
+                            int stride);
+#define vpx_highbd_fdct32x32 vpx_highbd_fdct32x32_c
+
+void vpx_highbd_fdct32x32_1_c(const int16_t* input,
+                              tran_low_t* output,
+                              int stride);
+#define vpx_highbd_fdct32x32_1 vpx_highbd_fdct32x32_1_c
+
+void vpx_highbd_fdct32x32_rd_c(const int16_t* input,
+                               tran_low_t* output,
+                               int stride);
+#define vpx_highbd_fdct32x32_rd vpx_highbd_fdct32x32_rd_c
+
+void vpx_highbd_fdct4x4_c(const int16_t* input, tran_low_t* output, int stride);
+#define vpx_highbd_fdct4x4 vpx_highbd_fdct4x4_c
+
+void vpx_highbd_fdct8x8_c(const int16_t* input, tran_low_t* output, int stride);
+#define vpx_highbd_fdct8x8 vpx_highbd_fdct8x8_c
+
+void vpx_highbd_fdct8x8_1_c(const int16_t* input,
+                            tran_low_t* output,
+                            int stride);
+#define vpx_highbd_fdct8x8_1 vpx_highbd_fdct8x8_1_c
+
+void vpx_highbd_h_predictor_16x16_c(uint16_t* dst,
+                                    ptrdiff_t stride,
+                                    const uint16_t* above,
+                                    const uint16_t* left,
+                                    int bd);
+#define vpx_highbd_h_predictor_16x16 vpx_highbd_h_predictor_16x16_c
+
+void vpx_highbd_h_predictor_32x32_c(uint16_t* dst,
+                                    ptrdiff_t stride,
+                                    const uint16_t* above,
+                                    const uint16_t* left,
+                                    int bd);
+#define vpx_highbd_h_predictor_32x32 vpx_highbd_h_predictor_32x32_c
+
+void vpx_highbd_h_predictor_4x4_c(uint16_t* dst,
+                                  ptrdiff_t stride,
+                                  const uint16_t* above,
+                                  const uint16_t* left,
+                                  int bd);
+#define vpx_highbd_h_predictor_4x4 vpx_highbd_h_predictor_4x4_c
+
+void vpx_highbd_h_predictor_8x8_c(uint16_t* dst,
+                                  ptrdiff_t stride,
+                                  const uint16_t* above,
+                                  const uint16_t* left,
+                                  int bd);
+#define vpx_highbd_h_predictor_8x8 vpx_highbd_h_predictor_8x8_c
+
+void vpx_highbd_hadamard_16x16_c(const int16_t* src_diff,
+                                 ptrdiff_t src_stride,
+                                 tran_low_t* coeff);
+#define vpx_highbd_hadamard_16x16 vpx_highbd_hadamard_16x16_c
+
+void vpx_highbd_hadamard_32x32_c(const int16_t* src_diff,
+                                 ptrdiff_t src_stride,
+                                 tran_low_t* coeff);
+#define vpx_highbd_hadamard_32x32 vpx_highbd_hadamard_32x32_c
+
+void vpx_highbd_hadamard_8x8_c(const int16_t* src_diff,
+                               ptrdiff_t src_stride,
+                               tran_low_t* coeff);
+#define vpx_highbd_hadamard_8x8 vpx_highbd_hadamard_8x8_c
+
+void vpx_highbd_idct16x16_10_add_c(const tran_low_t* input,
+                                   uint16_t* dest,
+                                   int stride,
+                                   int bd);
+#define vpx_highbd_idct16x16_10_add vpx_highbd_idct16x16_10_add_c
+
+void vpx_highbd_idct16x16_1_add_c(const tran_low_t* input,
+                                  uint16_t* dest,
+                                  int stride,
+                                  int bd);
+#define vpx_highbd_idct16x16_1_add vpx_highbd_idct16x16_1_add_c
+
+void vpx_highbd_idct16x16_256_add_c(const tran_low_t* input,
+                                    uint16_t* dest,
+                                    int stride,
+                                    int bd);
+#define vpx_highbd_idct16x16_256_add vpx_highbd_idct16x16_256_add_c
+
+void vpx_highbd_idct16x16_38_add_c(const tran_low_t* input,
+                                   uint16_t* dest,
+                                   int stride,
+                                   int bd);
+#define vpx_highbd_idct16x16_38_add vpx_highbd_idct16x16_38_add_c
+
+void vpx_highbd_idct32x32_1024_add_c(const tran_low_t* input,
+                                     uint16_t* dest,
+                                     int stride,
+                                     int bd);
+#define vpx_highbd_idct32x32_1024_add vpx_highbd_idct32x32_1024_add_c
+
+void vpx_highbd_idct32x32_135_add_c(const tran_low_t* input,
+                                    uint16_t* dest,
+                                    int stride,
+                                    int bd);
+#define vpx_highbd_idct32x32_135_add vpx_highbd_idct32x32_135_add_c
+
+void vpx_highbd_idct32x32_1_add_c(const tran_low_t* input,
+                                  uint16_t* dest,
+                                  int stride,
+                                  int bd);
+#define vpx_highbd_idct32x32_1_add vpx_highbd_idct32x32_1_add_c
+
+void vpx_highbd_idct32x32_34_add_c(const tran_low_t* input,
+                                   uint16_t* dest,
+                                   int stride,
+                                   int bd);
+#define vpx_highbd_idct32x32_34_add vpx_highbd_idct32x32_34_add_c
+
+void vpx_highbd_idct4x4_16_add_c(const tran_low_t* input,
+                                 uint16_t* dest,
+                                 int stride,
+                                 int bd);
+#define vpx_highbd_idct4x4_16_add vpx_highbd_idct4x4_16_add_c
+
+void vpx_highbd_idct4x4_1_add_c(const tran_low_t* input,
+                                uint16_t* dest,
+                                int stride,
+                                int bd);
+#define vpx_highbd_idct4x4_1_add vpx_highbd_idct4x4_1_add_c
+
+void vpx_highbd_idct8x8_12_add_c(const tran_low_t* input,
+                                 uint16_t* dest,
+                                 int stride,
+                                 int bd);
+#define vpx_highbd_idct8x8_12_add vpx_highbd_idct8x8_12_add_c
+
+void vpx_highbd_idct8x8_1_add_c(const tran_low_t* input,
+                                uint16_t* dest,
+                                int stride,
+                                int bd);
+#define vpx_highbd_idct8x8_1_add vpx_highbd_idct8x8_1_add_c
+
+void vpx_highbd_idct8x8_64_add_c(const tran_low_t* input,
+                                 uint16_t* dest,
+                                 int stride,
+                                 int bd);
+#define vpx_highbd_idct8x8_64_add vpx_highbd_idct8x8_64_add_c
+
+void vpx_highbd_iwht4x4_16_add_c(const tran_low_t* input,
+                                 uint16_t* dest,
+                                 int stride,
+                                 int bd);
+#define vpx_highbd_iwht4x4_16_add vpx_highbd_iwht4x4_16_add_c
+
+void vpx_highbd_iwht4x4_1_add_c(const tran_low_t* input,
+                                uint16_t* dest,
+                                int stride,
+                                int bd);
+#define vpx_highbd_iwht4x4_1_add vpx_highbd_iwht4x4_1_add_c
+
+void vpx_highbd_lpf_horizontal_16_c(uint16_t* s,
+                                    int pitch,
+                                    const uint8_t* blimit,
+                                    const uint8_t* limit,
+                                    const uint8_t* thresh,
+                                    int bd);
+#define vpx_highbd_lpf_horizontal_16 vpx_highbd_lpf_horizontal_16_c
+
+void vpx_highbd_lpf_horizontal_16_dual_c(uint16_t* s,
+                                         int pitch,
+                                         const uint8_t* blimit,
+                                         const uint8_t* limit,
+                                         const uint8_t* thresh,
+                                         int bd);
+#define vpx_highbd_lpf_horizontal_16_dual vpx_highbd_lpf_horizontal_16_dual_c
+
+void vpx_highbd_lpf_horizontal_4_c(uint16_t* s,
+                                   int pitch,
+                                   const uint8_t* blimit,
+                                   const uint8_t* limit,
+                                   const uint8_t* thresh,
+                                   int bd);
+#define vpx_highbd_lpf_horizontal_4 vpx_highbd_lpf_horizontal_4_c
+
+void vpx_highbd_lpf_horizontal_4_dual_c(uint16_t* s,
+                                        int pitch,
+                                        const uint8_t* blimit0,
+                                        const uint8_t* limit0,
+                                        const uint8_t* thresh0,
+                                        const uint8_t* blimit1,
+                                        const uint8_t* limit1,
+                                        const uint8_t* thresh1,
+                                        int bd);
+#define vpx_highbd_lpf_horizontal_4_dual vpx_highbd_lpf_horizontal_4_dual_c
+
+void vpx_highbd_lpf_horizontal_8_c(uint16_t* s,
+                                   int pitch,
+                                   const uint8_t* blimit,
+                                   const uint8_t* limit,
+                                   const uint8_t* thresh,
+                                   int bd);
+#define vpx_highbd_lpf_horizontal_8 vpx_highbd_lpf_horizontal_8_c
+
+void vpx_highbd_lpf_horizontal_8_dual_c(uint16_t* s,
+                                        int pitch,
+                                        const uint8_t* blimit0,
+                                        const uint8_t* limit0,
+                                        const uint8_t* thresh0,
+                                        const uint8_t* blimit1,
+                                        const uint8_t* limit1,
+                                        const uint8_t* thresh1,
+                                        int bd);
+#define vpx_highbd_lpf_horizontal_8_dual vpx_highbd_lpf_horizontal_8_dual_c
+
+void vpx_highbd_lpf_vertical_16_c(uint16_t* s,
+                                  int pitch,
+                                  const uint8_t* blimit,
+                                  const uint8_t* limit,
+                                  const uint8_t* thresh,
+                                  int bd);
+#define vpx_highbd_lpf_vertical_16 vpx_highbd_lpf_vertical_16_c
+
+void vpx_highbd_lpf_vertical_16_dual_c(uint16_t* s,
+                                       int pitch,
+                                       const uint8_t* blimit,
+                                       const uint8_t* limit,
+                                       const uint8_t* thresh,
+                                       int bd);
+#define vpx_highbd_lpf_vertical_16_dual vpx_highbd_lpf_vertical_16_dual_c
+
+void vpx_highbd_lpf_vertical_4_c(uint16_t* s,
+                                 int pitch,
+                                 const uint8_t* blimit,
+                                 const uint8_t* limit,
+                                 const uint8_t* thresh,
+                                 int bd);
+#define vpx_highbd_lpf_vertical_4 vpx_highbd_lpf_vertical_4_c
+
+void vpx_highbd_lpf_vertical_4_dual_c(uint16_t* s,
+                                      int pitch,
+                                      const uint8_t* blimit0,
+                                      const uint8_t* limit0,
+                                      const uint8_t* thresh0,
+                                      const uint8_t* blimit1,
+                                      const uint8_t* limit1,
+                                      const uint8_t* thresh1,
+                                      int bd);
+#define vpx_highbd_lpf_vertical_4_dual vpx_highbd_lpf_vertical_4_dual_c
+
+void vpx_highbd_lpf_vertical_8_c(uint16_t* s,
+                                 int pitch,
+                                 const uint8_t* blimit,
+                                 const uint8_t* limit,
+                                 const uint8_t* thresh,
+                                 int bd);
+#define vpx_highbd_lpf_vertical_8 vpx_highbd_lpf_vertical_8_c
+
+void vpx_highbd_lpf_vertical_8_dual_c(uint16_t* s,
+                                      int pitch,
+                                      const uint8_t* blimit0,
+                                      const uint8_t* limit0,
+                                      const uint8_t* thresh0,
+                                      const uint8_t* blimit1,
+                                      const uint8_t* limit1,
+                                      const uint8_t* thresh1,
+                                      int bd);
+#define vpx_highbd_lpf_vertical_8_dual vpx_highbd_lpf_vertical_8_dual_c
+
+void vpx_highbd_minmax_8x8_c(const uint8_t* s8,
+                             int p,
+                             const uint8_t* d8,
+                             int dp,
+                             int* min,
+                             int* max);
+#define vpx_highbd_minmax_8x8 vpx_highbd_minmax_8x8_c
+
+void vpx_highbd_quantize_b_c(const tran_low_t* coeff_ptr,
+                             intptr_t n_coeffs,
+                             const int16_t* zbin_ptr,
+                             const int16_t* round_ptr,
+                             const int16_t* quant_ptr,
+                             const int16_t* quant_shift_ptr,
+                             tran_low_t* qcoeff_ptr,
+                             tran_low_t* dqcoeff_ptr,
+                             const int16_t* dequant_ptr,
+                             uint16_t* eob_ptr,
+                             const int16_t* scan,
+                             const int16_t* iscan);
+#define vpx_highbd_quantize_b vpx_highbd_quantize_b_c
+
+void vpx_highbd_quantize_b_32x32_c(
+    const tran_low_t* coeff_ptr,
+    const struct macroblock_plane* const mb_plane,
+    tran_low_t* qcoeff_ptr,
+    tran_low_t* dqcoeff_ptr,
+    const int16_t* dequant_ptr,
+    uint16_t* eob_ptr,
+    const struct ScanOrder* const scan_order);
+#define vpx_highbd_quantize_b_32x32 vpx_highbd_quantize_b_32x32_c
+
+unsigned int vpx_highbd_sad16x16_c(const uint8_t* src_ptr,
+                                   int src_stride,
+                                   const uint8_t* ref_ptr,
+                                   int ref_stride);
+#define vpx_highbd_sad16x16 vpx_highbd_sad16x16_c
+
+unsigned int vpx_highbd_sad16x16_avg_c(const uint8_t* src_ptr,
+                                       int src_stride,
+                                       const uint8_t* ref_ptr,
+                                       int ref_stride,
+                                       const uint8_t* second_pred);
+#define vpx_highbd_sad16x16_avg vpx_highbd_sad16x16_avg_c
+
+void vpx_highbd_sad16x16x4d_c(const uint8_t* src_ptr,
+                              int src_stride,
+                              const uint8_t* const ref_array[4],
+                              int ref_stride,
+                              uint32_t sad_array[4]);
+#define vpx_highbd_sad16x16x4d vpx_highbd_sad16x16x4d_c
+
+unsigned int vpx_highbd_sad16x32_c(const uint8_t* src_ptr,
+                                   int src_stride,
+                                   const uint8_t* ref_ptr,
+                                   int ref_stride);
+#define vpx_highbd_sad16x32 vpx_highbd_sad16x32_c
+
+unsigned int vpx_highbd_sad16x32_avg_c(const uint8_t* src_ptr,
+                                       int src_stride,
+                                       const uint8_t* ref_ptr,
+                                       int ref_stride,
+                                       const uint8_t* second_pred);
+#define vpx_highbd_sad16x32_avg vpx_highbd_sad16x32_avg_c
+
+void vpx_highbd_sad16x32x4d_c(const uint8_t* src_ptr,
+                              int src_stride,
+                              const uint8_t* const ref_array[4],
+                              int ref_stride,
+                              uint32_t sad_array[4]);
+#define vpx_highbd_sad16x32x4d vpx_highbd_sad16x32x4d_c
+
+unsigned int vpx_highbd_sad16x8_c(const uint8_t* src_ptr,
+                                  int src_stride,
+                                  const uint8_t* ref_ptr,
+                                  int ref_stride);
+#define vpx_highbd_sad16x8 vpx_highbd_sad16x8_c
+
+unsigned int vpx_highbd_sad16x8_avg_c(const uint8_t* src_ptr,
+                                      int src_stride,
+                                      const uint8_t* ref_ptr,
+                                      int ref_stride,
+                                      const uint8_t* second_pred);
+#define vpx_highbd_sad16x8_avg vpx_highbd_sad16x8_avg_c
+
+void vpx_highbd_sad16x8x4d_c(const uint8_t* src_ptr,
+                             int src_stride,
+                             const uint8_t* const ref_array[4],
+                             int ref_stride,
+                             uint32_t sad_array[4]);
+#define vpx_highbd_sad16x8x4d vpx_highbd_sad16x8x4d_c
+
+unsigned int vpx_highbd_sad32x16_c(const uint8_t* src_ptr,
+                                   int src_stride,
+                                   const uint8_t* ref_ptr,
+                                   int ref_stride);
+#define vpx_highbd_sad32x16 vpx_highbd_sad32x16_c
+
+unsigned int vpx_highbd_sad32x16_avg_c(const uint8_t* src_ptr,
+                                       int src_stride,
+                                       const uint8_t* ref_ptr,
+                                       int ref_stride,
+                                       const uint8_t* second_pred);
+#define vpx_highbd_sad32x16_avg vpx_highbd_sad32x16_avg_c
+
+void vpx_highbd_sad32x16x4d_c(const uint8_t* src_ptr,
+                              int src_stride,
+                              const uint8_t* const ref_array[4],
+                              int ref_stride,
+                              uint32_t sad_array[4]);
+#define vpx_highbd_sad32x16x4d vpx_highbd_sad32x16x4d_c
+
+unsigned int vpx_highbd_sad32x32_c(const uint8_t* src_ptr,
+                                   int src_stride,
+                                   const uint8_t* ref_ptr,
+                                   int ref_stride);
+#define vpx_highbd_sad32x32 vpx_highbd_sad32x32_c
+
+unsigned int vpx_highbd_sad32x32_avg_c(const uint8_t* src_ptr,
+                                       int src_stride,
+                                       const uint8_t* ref_ptr,
+                                       int ref_stride,
+                                       const uint8_t* second_pred);
+#define vpx_highbd_sad32x32_avg vpx_highbd_sad32x32_avg_c
+
+void vpx_highbd_sad32x32x4d_c(const uint8_t* src_ptr,
+                              int src_stride,
+                              const uint8_t* const ref_array[4],
+                              int ref_stride,
+                              uint32_t sad_array[4]);
+#define vpx_highbd_sad32x32x4d vpx_highbd_sad32x32x4d_c
+
+unsigned int vpx_highbd_sad32x64_c(const uint8_t* src_ptr,
+                                   int src_stride,
+                                   const uint8_t* ref_ptr,
+                                   int ref_stride);
+#define vpx_highbd_sad32x64 vpx_highbd_sad32x64_c
+
+unsigned int vpx_highbd_sad32x64_avg_c(const uint8_t* src_ptr,
+                                       int src_stride,
+                                       const uint8_t* ref_ptr,
+                                       int ref_stride,
+                                       const uint8_t* second_pred);
+#define vpx_highbd_sad32x64_avg vpx_highbd_sad32x64_avg_c
+
+void vpx_highbd_sad32x64x4d_c(const uint8_t* src_ptr,
+                              int src_stride,
+                              const uint8_t* const ref_array[4],
+                              int ref_stride,
+                              uint32_t sad_array[4]);
+#define vpx_highbd_sad32x64x4d vpx_highbd_sad32x64x4d_c
+
+unsigned int vpx_highbd_sad4x4_c(const uint8_t* src_ptr,
+                                 int src_stride,
+                                 const uint8_t* ref_ptr,
+                                 int ref_stride);
+#define vpx_highbd_sad4x4 vpx_highbd_sad4x4_c
+
+unsigned int vpx_highbd_sad4x4_avg_c(const uint8_t* src_ptr,
+                                     int src_stride,
+                                     const uint8_t* ref_ptr,
+                                     int ref_stride,
+                                     const uint8_t* second_pred);
+#define vpx_highbd_sad4x4_avg vpx_highbd_sad4x4_avg_c
+
+void vpx_highbd_sad4x4x4d_c(const uint8_t* src_ptr,
+                            int src_stride,
+                            const uint8_t* const ref_array[4],
+                            int ref_stride,
+                            uint32_t sad_array[4]);
+#define vpx_highbd_sad4x4x4d vpx_highbd_sad4x4x4d_c
+
+unsigned int vpx_highbd_sad4x8_c(const uint8_t* src_ptr,
+                                 int src_stride,
+                                 const uint8_t* ref_ptr,
+                                 int ref_stride);
+#define vpx_highbd_sad4x8 vpx_highbd_sad4x8_c
+
+unsigned int vpx_highbd_sad4x8_avg_c(const uint8_t* src_ptr,
+                                     int src_stride,
+                                     const uint8_t* ref_ptr,
+                                     int ref_stride,
+                                     const uint8_t* second_pred);
+#define vpx_highbd_sad4x8_avg vpx_highbd_sad4x8_avg_c
+
+void vpx_highbd_sad4x8x4d_c(const uint8_t* src_ptr,
+                            int src_stride,
+                            const uint8_t* const ref_array[4],
+                            int ref_stride,
+                            uint32_t sad_array[4]);
+#define vpx_highbd_sad4x8x4d vpx_highbd_sad4x8x4d_c
+
+unsigned int vpx_highbd_sad64x32_c(const uint8_t* src_ptr,
+                                   int src_stride,
+                                   const uint8_t* ref_ptr,
+                                   int ref_stride);
+#define vpx_highbd_sad64x32 vpx_highbd_sad64x32_c
 
-void vpx_dc_top_predictor_4x4_c(uint8_t* dst,
-                                ptrdiff_t stride,
-                                const uint8_t* above,
-                                const uint8_t* left);
-#define vpx_dc_top_predictor_4x4 vpx_dc_top_predictor_4x4_c
+unsigned int vpx_highbd_sad64x32_avg_c(const uint8_t* src_ptr,
+                                       int src_stride,
+                                       const uint8_t* ref_ptr,
+                                       int ref_stride,
+                                       const uint8_t* second_pred);
+#define vpx_highbd_sad64x32_avg vpx_highbd_sad64x32_avg_c
 
-void vpx_dc_top_predictor_8x8_c(uint8_t* dst,
-                                ptrdiff_t stride,
-                                const uint8_t* above,
-                                const uint8_t* left);
-#define vpx_dc_top_predictor_8x8 vpx_dc_top_predictor_8x8_c
+void vpx_highbd_sad64x32x4d_c(const uint8_t* src_ptr,
+                              int src_stride,
+                              const uint8_t* const ref_array[4],
+                              int ref_stride,
+                              uint32_t sad_array[4]);
+#define vpx_highbd_sad64x32x4d vpx_highbd_sad64x32x4d_c
 
-void vpx_fdct16x16_c(const int16_t* input, tran_low_t* output, int stride);
-#define vpx_fdct16x16 vpx_fdct16x16_c
+unsigned int vpx_highbd_sad64x64_c(const uint8_t* src_ptr,
+                                   int src_stride,
+                                   const uint8_t* ref_ptr,
+                                   int ref_stride);
+#define vpx_highbd_sad64x64 vpx_highbd_sad64x64_c
 
-void vpx_fdct16x16_1_c(const int16_t* input, tran_low_t* output, int stride);
-#define vpx_fdct16x16_1 vpx_fdct16x16_1_c
+unsigned int vpx_highbd_sad64x64_avg_c(const uint8_t* src_ptr,
+                                       int src_stride,
+                                       const uint8_t* ref_ptr,
+                                       int ref_stride,
+                                       const uint8_t* second_pred);
+#define vpx_highbd_sad64x64_avg vpx_highbd_sad64x64_avg_c
 
-void vpx_fdct32x32_c(const int16_t* input, tran_low_t* output, int stride);
-#define vpx_fdct32x32 vpx_fdct32x32_c
+void vpx_highbd_sad64x64x4d_c(const uint8_t* src_ptr,
+                              int src_stride,
+                              const uint8_t* const ref_array[4],
+                              int ref_stride,
+                              uint32_t sad_array[4]);
+#define vpx_highbd_sad64x64x4d vpx_highbd_sad64x64x4d_c
 
-void vpx_fdct32x32_1_c(const int16_t* input, tran_low_t* output, int stride);
-#define vpx_fdct32x32_1 vpx_fdct32x32_1_c
+unsigned int vpx_highbd_sad8x16_c(const uint8_t* src_ptr,
+                                  int src_stride,
+                                  const uint8_t* ref_ptr,
+                                  int ref_stride);
+#define vpx_highbd_sad8x16 vpx_highbd_sad8x16_c
 
-void vpx_fdct32x32_rd_c(const int16_t* input, tran_low_t* output, int stride);
-void vpx_fdct32x32_rd_vsx(const int16_t* input, tran_low_t* output, int stride);
-#define vpx_fdct32x32_rd vpx_fdct32x32_rd_vsx
+unsigned int vpx_highbd_sad8x16_avg_c(const uint8_t* src_ptr,
+                                      int src_stride,
+                                      const uint8_t* ref_ptr,
+                                      int ref_stride,
+                                      const uint8_t* second_pred);
+#define vpx_highbd_sad8x16_avg vpx_highbd_sad8x16_avg_c
 
-void vpx_fdct4x4_c(const int16_t* input, tran_low_t* output, int stride);
-#define vpx_fdct4x4 vpx_fdct4x4_c
+void vpx_highbd_sad8x16x4d_c(const uint8_t* src_ptr,
+                             int src_stride,
+                             const uint8_t* const ref_array[4],
+                             int ref_stride,
+                             uint32_t sad_array[4]);
+#define vpx_highbd_sad8x16x4d vpx_highbd_sad8x16x4d_c
 
-void vpx_fdct4x4_1_c(const int16_t* input, tran_low_t* output, int stride);
-#define vpx_fdct4x4_1 vpx_fdct4x4_1_c
+unsigned int vpx_highbd_sad8x4_c(const uint8_t* src_ptr,
+                                 int src_stride,
+                                 const uint8_t* ref_ptr,
+                                 int ref_stride);
+#define vpx_highbd_sad8x4 vpx_highbd_sad8x4_c
 
-void vpx_fdct8x8_c(const int16_t* input, tran_low_t* output, int stride);
-#define vpx_fdct8x8 vpx_fdct8x8_c
+unsigned int vpx_highbd_sad8x4_avg_c(const uint8_t* src_ptr,
+                                     int src_stride,
+                                     const uint8_t* ref_ptr,
+                                     int ref_stride,
+                                     const uint8_t* second_pred);
+#define vpx_highbd_sad8x4_avg vpx_highbd_sad8x4_avg_c
 
-void vpx_fdct8x8_1_c(const int16_t* input, tran_low_t* output, int stride);
-#define vpx_fdct8x8_1 vpx_fdct8x8_1_c
+void vpx_highbd_sad8x4x4d_c(const uint8_t* src_ptr,
+                            int src_stride,
+                            const uint8_t* const ref_array[4],
+                            int ref_stride,
+                            uint32_t sad_array[4]);
+#define vpx_highbd_sad8x4x4d vpx_highbd_sad8x4x4d_c
 
-void vpx_get16x16var_c(const uint8_t* src_ptr,
-                       int src_stride,
-                       const uint8_t* ref_ptr,
-                       int ref_stride,
-                       unsigned int* sse,
-                       int* sum);
-void vpx_get16x16var_vsx(const uint8_t* src_ptr,
-                         int src_stride,
-                         const uint8_t* ref_ptr,
-                         int ref_stride,
-                         unsigned int* sse,
-                         int* sum);
-#define vpx_get16x16var vpx_get16x16var_vsx
+unsigned int vpx_highbd_sad8x8_c(const uint8_t* src_ptr,
+                                 int src_stride,
+                                 const uint8_t* ref_ptr,
+                                 int ref_stride);
+#define vpx_highbd_sad8x8 vpx_highbd_sad8x8_c
 
-unsigned int vpx_get4x4sse_cs_c(const unsigned char* src_ptr,
-                                int src_stride,
-                                const unsigned char* ref_ptr,
-                                int ref_stride);
-unsigned int vpx_get4x4sse_cs_vsx(const unsigned char* src_ptr,
-                                  int src_stride,
-                                  const unsigned char* ref_ptr,
-                                  int ref_stride);
-#define vpx_get4x4sse_cs vpx_get4x4sse_cs_vsx
+unsigned int vpx_highbd_sad8x8_avg_c(const uint8_t* src_ptr,
+                                     int src_stride,
+                                     const uint8_t* ref_ptr,
+                                     int ref_stride,
+                                     const uint8_t* second_pred);
+#define vpx_highbd_sad8x8_avg vpx_highbd_sad8x8_avg_c
 
-void vpx_get8x8var_c(const uint8_t* src_ptr,
-                     int src_stride,
-                     const uint8_t* ref_ptr,
-                     int ref_stride,
-                     unsigned int* sse,
-                     int* sum);
-void vpx_get8x8var_vsx(const uint8_t* src_ptr,
-                       int src_stride,
-                       const uint8_t* ref_ptr,
-                       int ref_stride,
-                       unsigned int* sse,
-                       int* sum);
-#define vpx_get8x8var vpx_get8x8var_vsx
+void vpx_highbd_sad8x8x4d_c(const uint8_t* src_ptr,
+                            int src_stride,
+                            const uint8_t* const ref_array[4],
+                            int ref_stride,
+                            uint32_t sad_array[4]);
+#define vpx_highbd_sad8x8x4d vpx_highbd_sad8x8x4d_c
 
-unsigned int vpx_get_mb_ss_c(const int16_t*);
-unsigned int vpx_get_mb_ss_vsx(const int16_t*);
-#define vpx_get_mb_ss vpx_get_mb_ss_vsx
+int vpx_highbd_satd_c(const tran_low_t* coeff, int length);
+#define vpx_highbd_satd vpx_highbd_satd_c
 
-void vpx_h_predictor_16x16_c(uint8_t* dst,
-                             ptrdiff_t stride,
-                             const uint8_t* above,
-                             const uint8_t* left);
-void vpx_h_predictor_16x16_vsx(uint8_t* dst,
-                               ptrdiff_t stride,
-                               const uint8_t* above,
-                               const uint8_t* left);
-#define vpx_h_predictor_16x16 vpx_h_predictor_16x16_vsx
+void vpx_highbd_subtract_block_c(int rows,
+                                 int cols,
+                                 int16_t* diff_ptr,
+                                 ptrdiff_t diff_stride,
+                                 const uint8_t* src8_ptr,
+                                 ptrdiff_t src_stride,
+                                 const uint8_t* pred8_ptr,
+                                 ptrdiff_t pred_stride,
+                                 int bd);
+#define vpx_highbd_subtract_block vpx_highbd_subtract_block_c
 
-void vpx_h_predictor_32x32_c(uint8_t* dst,
-                             ptrdiff_t stride,
-                             const uint8_t* above,
-                             const uint8_t* left);
-void vpx_h_predictor_32x32_vsx(uint8_t* dst,
-                               ptrdiff_t stride,
-                               const uint8_t* above,
-                               const uint8_t* left);
-#define vpx_h_predictor_32x32 vpx_h_predictor_32x32_vsx
+void vpx_highbd_tm_predictor_16x16_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_tm_predictor_16x16 vpx_highbd_tm_predictor_16x16_c
 
-void vpx_h_predictor_4x4_c(uint8_t* dst,
-                           ptrdiff_t stride,
-                           const uint8_t* above,
-                           const uint8_t* left);
-#define vpx_h_predictor_4x4 vpx_h_predictor_4x4_c
+void vpx_highbd_tm_predictor_32x32_c(uint16_t* dst,
+                                     ptrdiff_t stride,
+                                     const uint16_t* above,
+                                     const uint16_t* left,
+                                     int bd);
+#define vpx_highbd_tm_predictor_32x32 vpx_highbd_tm_predictor_32x32_c
 
-void vpx_h_predictor_8x8_c(uint8_t* dst,
-                           ptrdiff_t stride,
-                           const uint8_t* above,
-                           const uint8_t* left);
-#define vpx_h_predictor_8x8 vpx_h_predictor_8x8_c
+void vpx_highbd_tm_predictor_4x4_c(uint16_t* dst,
+                                   ptrdiff_t stride,
+                                   const uint16_t* above,
+                                   const uint16_t* left,
+                                   int bd);
+#define vpx_highbd_tm_predictor_4x4 vpx_highbd_tm_predictor_4x4_c
 
-void vpx_hadamard_16x16_c(const int16_t* src_diff,
-                          ptrdiff_t src_stride,
-                          int16_t* coeff);
-void vpx_hadamard_16x16_vsx(const int16_t* src_diff,
-                            ptrdiff_t src_stride,
-                            int16_t* coeff);
-#define vpx_hadamard_16x16 vpx_hadamard_16x16_vsx
+void vpx_highbd_tm_predictor_8x8_c(uint16_t* dst,
+                                   ptrdiff_t stride,
+                                   const uint16_t* above,
+                                   const uint16_t* left,
+                                   int bd);
+#define vpx_highbd_tm_predictor_8x8 vpx_highbd_tm_predictor_8x8_c
 
-void vpx_hadamard_32x32_c(const int16_t* src_diff,
-                          ptrdiff_t src_stride,
-                          int16_t* coeff);
-#define vpx_hadamard_32x32 vpx_hadamard_32x32_c
+void vpx_highbd_v_predictor_16x16_c(uint16_t* dst,
+                                    ptrdiff_t stride,
+                                    const uint16_t* above,
+                                    const uint16_t* left,
+                                    int bd);
+#define vpx_highbd_v_predictor_16x16 vpx_highbd_v_predictor_16x16_c
 
-void vpx_hadamard_8x8_c(const int16_t* src_diff,
-                        ptrdiff_t src_stride,
-                        int16_t* coeff);
-void vpx_hadamard_8x8_vsx(const int16_t* src_diff,
-                          ptrdiff_t src_stride,
-                          int16_t* coeff);
-#define vpx_hadamard_8x8 vpx_hadamard_8x8_vsx
+void vpx_highbd_v_predictor_32x32_c(uint16_t* dst,
+                                    ptrdiff_t stride,
+                                    const uint16_t* above,
+                                    const uint16_t* left,
+                                    int bd);
+#define vpx_highbd_v_predictor_32x32 vpx_highbd_v_predictor_32x32_c
 
-void vpx_he_predictor_4x4_c(uint8_t* dst,
-                            ptrdiff_t stride,
-                            const uint8_t* above,
-                            const uint8_t* left);
-#define vpx_he_predictor_4x4 vpx_he_predictor_4x4_c
+void vpx_highbd_v_predictor_4x4_c(uint16_t* dst,
+                                  ptrdiff_t stride,
+                                  const uint16_t* above,
+                                  const uint16_t* left,
+                                  int bd);
+#define vpx_highbd_v_predictor_4x4 vpx_highbd_v_predictor_4x4_c
+
+void vpx_highbd_v_predictor_8x8_c(uint16_t* dst,
+                                  ptrdiff_t stride,
+                                  const uint16_t* above,
+                                  const uint16_t* left,
+                                  int bd);
+#define vpx_highbd_v_predictor_8x8 vpx_highbd_v_predictor_8x8_c
 
 void vpx_idct16x16_10_add_c(const tran_low_t* input, uint8_t* dest, int stride);
 #define vpx_idct16x16_10_add vpx_idct16x16_10_add_c
@@ -684,10 +2789,7 @@ void vpx_idct16x16_1_add_c(const tran_low_t* input, uint8_t* dest, int stride);
 void vpx_idct16x16_256_add_c(const tran_low_t* input,
                              uint8_t* dest,
                              int stride);
-void vpx_idct16x16_256_add_vsx(const tran_low_t* input,
-                               uint8_t* dest,
-                               int stride);
-#define vpx_idct16x16_256_add vpx_idct16x16_256_add_vsx
+#define vpx_idct16x16_256_add vpx_idct16x16_256_add_c
 
 void vpx_idct16x16_38_add_c(const tran_low_t* input, uint8_t* dest, int stride);
 #define vpx_idct16x16_38_add vpx_idct16x16_38_add_c
@@ -695,10 +2797,7 @@ void vpx_idct16x16_38_add_c(const tran_low_t* input, uint8_t* dest, int stride);
 void vpx_idct32x32_1024_add_c(const tran_low_t* input,
                               uint8_t* dest,
                               int stride);
-void vpx_idct32x32_1024_add_vsx(const tran_low_t* input,
-                                uint8_t* dest,
-                                int stride);
-#define vpx_idct32x32_1024_add vpx_idct32x32_1024_add_vsx
+#define vpx_idct32x32_1024_add vpx_idct32x32_1024_add_c
 
 void vpx_idct32x32_135_add_c(const tran_low_t* input,
                              uint8_t* dest,
@@ -712,8 +2811,7 @@ void vpx_idct32x32_34_add_c(const tran_low_t* input, uint8_t* dest, int stride);
 #define vpx_idct32x32_34_add vpx_idct32x32_34_add_c
 
 void vpx_idct4x4_16_add_c(const tran_low_t* input, uint8_t* dest, int stride);
-void vpx_idct4x4_16_add_vsx(const tran_low_t* input, uint8_t* dest, int stride);
-#define vpx_idct4x4_16_add vpx_idct4x4_16_add_vsx
+#define vpx_idct4x4_16_add vpx_idct4x4_16_add_c
 
 void vpx_idct4x4_1_add_c(const tran_low_t* input, uint8_t* dest, int stride);
 #define vpx_idct4x4_1_add vpx_idct4x4_1_add_c
@@ -725,8 +2823,7 @@ void vpx_idct8x8_1_add_c(const tran_low_t* input, uint8_t* dest, int stride);
 #define vpx_idct8x8_1_add vpx_idct8x8_1_add_c
 
 void vpx_idct8x8_64_add_c(const tran_low_t* input, uint8_t* dest, int stride);
-void vpx_idct8x8_64_add_vsx(const tran_low_t* input, uint8_t* dest, int stride);
-#define vpx_idct8x8_64_add vpx_idct8x8_64_add_vsx
+#define vpx_idct8x8_64_add vpx_idct8x8_64_add_c
 
 int16_t vpx_int_pro_col_c(const uint8_t* ref, const int width);
 #define vpx_int_pro_col vpx_int_pro_col_c
@@ -738,8 +2835,7 @@ void vpx_int_pro_row_c(int16_t hbuf[16],
 #define vpx_int_pro_row vpx_int_pro_row_c
 
 void vpx_iwht4x4_16_add_c(const tran_low_t* input, uint8_t* dest, int stride);
-void vpx_iwht4x4_16_add_vsx(const tran_low_t* input, uint8_t* dest, int stride);
-#define vpx_iwht4x4_16_add vpx_iwht4x4_16_add_vsx
+#define vpx_iwht4x4_16_add vpx_iwht4x4_16_add_c
 
 void vpx_iwht4x4_1_add_c(const tran_low_t* input, uint8_t* dest, int stride);
 #define vpx_iwht4x4_1_add vpx_iwht4x4_1_add_c
@@ -845,24 +2941,14 @@ void vpx_mbpost_proc_across_ip_c(unsigned char* src,
                                  int rows,
                                  int cols,
                                  int flimit);
-void vpx_mbpost_proc_across_ip_vsx(unsigned char* src,
-                                   int pitch,
-                                   int rows,
-                                   int cols,
-                                   int flimit);
-#define vpx_mbpost_proc_across_ip vpx_mbpost_proc_across_ip_vsx
+#define vpx_mbpost_proc_across_ip vpx_mbpost_proc_across_ip_c
 
 void vpx_mbpost_proc_down_c(unsigned char* dst,
                             int pitch,
                             int rows,
                             int cols,
                             int flimit);
-void vpx_mbpost_proc_down_vsx(unsigned char* dst,
-                              int pitch,
-                              int rows,
-                              int cols,
-                              int flimit);
-#define vpx_mbpost_proc_down vpx_mbpost_proc_down_vsx
+#define vpx_mbpost_proc_down vpx_mbpost_proc_down_c
 
 void vpx_minmax_8x8_c(const uint8_t* s,
                       int p,
@@ -877,48 +2963,28 @@ unsigned int vpx_mse16x16_c(const uint8_t* src_ptr,
                             const uint8_t* ref_ptr,
                             int ref_stride,
                             unsigned int* sse);
-unsigned int vpx_mse16x16_vsx(const uint8_t* src_ptr,
-                              int src_stride,
-                              const uint8_t* ref_ptr,
-                              int ref_stride,
-                              unsigned int* sse);
-#define vpx_mse16x16 vpx_mse16x16_vsx
+#define vpx_mse16x16 vpx_mse16x16_c
 
 unsigned int vpx_mse16x8_c(const uint8_t* src_ptr,
                            int src_stride,
                            const uint8_t* ref_ptr,
                            int ref_stride,
                            unsigned int* sse);
-unsigned int vpx_mse16x8_vsx(const uint8_t* src_ptr,
-                             int src_stride,
-                             const uint8_t* ref_ptr,
-                             int ref_stride,
-                             unsigned int* sse);
-#define vpx_mse16x8 vpx_mse16x8_vsx
+#define vpx_mse16x8 vpx_mse16x8_c
 
 unsigned int vpx_mse8x16_c(const uint8_t* src_ptr,
                            int src_stride,
                            const uint8_t* ref_ptr,
                            int ref_stride,
                            unsigned int* sse);
-unsigned int vpx_mse8x16_vsx(const uint8_t* src_ptr,
-                             int src_stride,
-                             const uint8_t* ref_ptr,
-                             int ref_stride,
-                             unsigned int* sse);
-#define vpx_mse8x16 vpx_mse8x16_vsx
+#define vpx_mse8x16 vpx_mse8x16_c
 
 unsigned int vpx_mse8x8_c(const uint8_t* src_ptr,
                           int src_stride,
                           const uint8_t* ref_ptr,
                           int ref_stride,
                           unsigned int* sse);
-unsigned int vpx_mse8x8_vsx(const uint8_t* src_ptr,
-                            int src_stride,
-                            const uint8_t* ref_ptr,
-                            int ref_stride,
-                            unsigned int* sse);
-#define vpx_mse8x8 vpx_mse8x8_vsx
+#define vpx_mse8x8 vpx_mse8x8_c
 
 void vpx_plane_add_noise_c(uint8_t* start,
                            const int8_t* noise,
@@ -936,15 +3002,8 @@ void vpx_post_proc_down_and_across_mb_row_c(unsigned char* src,
                                             int cols,
                                             unsigned char* flimits,
                                             int size);
-void vpx_post_proc_down_and_across_mb_row_vsx(unsigned char* src,
-                                              unsigned char* dst,
-                                              int src_pitch,
-                                              int dst_pitch,
-                                              int cols,
-                                              unsigned char* flimits,
-                                              int size);
 #define vpx_post_proc_down_and_across_mb_row \
-  vpx_post_proc_down_and_across_mb_row_vsx
+  vpx_post_proc_down_and_across_mb_row_c
 
 void vpx_quantize_b_c(const tran_low_t* coeff_ptr,
                       intptr_t n_coeffs,
@@ -954,15 +3013,7 @@ void vpx_quantize_b_c(const tran_low_t* coeff_ptr,
                       const int16_t* dequant_ptr,
                       uint16_t* eob_ptr,
                       const struct ScanOrder* const scan_order);
-void vpx_quantize_b_vsx(const tran_low_t* coeff_ptr,
-                        intptr_t n_coeffs,
-                        const struct macroblock_plane* const mb_plane,
-                        tran_low_t* qcoeff_ptr,
-                        tran_low_t* dqcoeff_ptr,
-                        const int16_t* dequant_ptr,
-                        uint16_t* eob_ptr,
-                        const struct ScanOrder* const scan_order);
-#define vpx_quantize_b vpx_quantize_b_vsx
+#define vpx_quantize_b vpx_quantize_b_c
 
 void vpx_quantize_b_32x32_c(const tran_low_t* coeff_ptr,
                             const struct macroblock_plane* const mb_plane,
@@ -971,218 +3022,127 @@ void vpx_quantize_b_32x32_c(const tran_low_t* coeff_ptr,
                             const int16_t* dequant_ptr,
                             uint16_t* eob_ptr,
                             const struct ScanOrder* const scan_order);
-void vpx_quantize_b_32x32_vsx(const tran_low_t* coeff_ptr,
-                              const struct macroblock_plane* const mb_plane,
-                              tran_low_t* qcoeff_ptr,
-                              tran_low_t* dqcoeff_ptr,
-                              const int16_t* dequant_ptr,
-                              uint16_t* eob_ptr,
-                              const struct ScanOrder* const scan_order);
-#define vpx_quantize_b_32x32 vpx_quantize_b_32x32_vsx
+#define vpx_quantize_b_32x32 vpx_quantize_b_32x32_c
 
 unsigned int vpx_sad16x16_c(const uint8_t* src_ptr,
                             int src_stride,
                             const uint8_t* ref_ptr,
                             int ref_stride);
-unsigned int vpx_sad16x16_vsx(const uint8_t* src_ptr,
-                              int src_stride,
-                              const uint8_t* ref_ptr,
-                              int ref_stride);
-#define vpx_sad16x16 vpx_sad16x16_vsx
+#define vpx_sad16x16 vpx_sad16x16_c
 
 unsigned int vpx_sad16x16_avg_c(const uint8_t* src_ptr,
                                 int src_stride,
                                 const uint8_t* ref_ptr,
                                 int ref_stride,
                                 const uint8_t* second_pred);
-unsigned int vpx_sad16x16_avg_vsx(const uint8_t* src_ptr,
-                                  int src_stride,
-                                  const uint8_t* ref_ptr,
-                                  int ref_stride,
-                                  const uint8_t* second_pred);
-#define vpx_sad16x16_avg vpx_sad16x16_avg_vsx
+#define vpx_sad16x16_avg vpx_sad16x16_avg_c
 
 void vpx_sad16x16x4d_c(const uint8_t* src_ptr,
                        int src_stride,
                        const uint8_t* const ref_array[4],
                        int ref_stride,
                        uint32_t sad_array[4]);
-void vpx_sad16x16x4d_vsx(const uint8_t* src_ptr,
-                         int src_stride,
-                         const uint8_t* const ref_array[4],
-                         int ref_stride,
-                         uint32_t sad_array[4]);
-#define vpx_sad16x16x4d vpx_sad16x16x4d_vsx
+#define vpx_sad16x16x4d vpx_sad16x16x4d_c
 
 unsigned int vpx_sad16x32_c(const uint8_t* src_ptr,
                             int src_stride,
                             const uint8_t* ref_ptr,
                             int ref_stride);
-unsigned int vpx_sad16x32_vsx(const uint8_t* src_ptr,
-                              int src_stride,
-                              const uint8_t* ref_ptr,
-                              int ref_stride);
-#define vpx_sad16x32 vpx_sad16x32_vsx
+#define vpx_sad16x32 vpx_sad16x32_c
 
 unsigned int vpx_sad16x32_avg_c(const uint8_t* src_ptr,
                                 int src_stride,
                                 const uint8_t* ref_ptr,
                                 int ref_stride,
                                 const uint8_t* second_pred);
-unsigned int vpx_sad16x32_avg_vsx(const uint8_t* src_ptr,
-                                  int src_stride,
-                                  const uint8_t* ref_ptr,
-                                  int ref_stride,
-                                  const uint8_t* second_pred);
-#define vpx_sad16x32_avg vpx_sad16x32_avg_vsx
+#define vpx_sad16x32_avg vpx_sad16x32_avg_c
 
 void vpx_sad16x32x4d_c(const uint8_t* src_ptr,
                        int src_stride,
                        const uint8_t* const ref_array[4],
                        int ref_stride,
                        uint32_t sad_array[4]);
-void vpx_sad16x32x4d_vsx(const uint8_t* src_ptr,
-                         int src_stride,
-                         const uint8_t* const ref_array[4],
-                         int ref_stride,
-                         uint32_t sad_array[4]);
-#define vpx_sad16x32x4d vpx_sad16x32x4d_vsx
+#define vpx_sad16x32x4d vpx_sad16x32x4d_c
 
 unsigned int vpx_sad16x8_c(const uint8_t* src_ptr,
                            int src_stride,
                            const uint8_t* ref_ptr,
                            int ref_stride);
-unsigned int vpx_sad16x8_vsx(const uint8_t* src_ptr,
-                             int src_stride,
-                             const uint8_t* ref_ptr,
-                             int ref_stride);
-#define vpx_sad16x8 vpx_sad16x8_vsx
+#define vpx_sad16x8 vpx_sad16x8_c
 
 unsigned int vpx_sad16x8_avg_c(const uint8_t* src_ptr,
                                int src_stride,
                                const uint8_t* ref_ptr,
                                int ref_stride,
                                const uint8_t* second_pred);
-unsigned int vpx_sad16x8_avg_vsx(const uint8_t* src_ptr,
-                                 int src_stride,
-                                 const uint8_t* ref_ptr,
-                                 int ref_stride,
-                                 const uint8_t* second_pred);
-#define vpx_sad16x8_avg vpx_sad16x8_avg_vsx
+#define vpx_sad16x8_avg vpx_sad16x8_avg_c
 
 void vpx_sad16x8x4d_c(const uint8_t* src_ptr,
                       int src_stride,
                       const uint8_t* const ref_array[4],
                       int ref_stride,
                       uint32_t sad_array[4]);
-void vpx_sad16x8x4d_vsx(const uint8_t* src_ptr,
-                        int src_stride,
-                        const uint8_t* const ref_array[4],
-                        int ref_stride,
-                        uint32_t sad_array[4]);
-#define vpx_sad16x8x4d vpx_sad16x8x4d_vsx
+#define vpx_sad16x8x4d vpx_sad16x8x4d_c
 
 unsigned int vpx_sad32x16_c(const uint8_t* src_ptr,
                             int src_stride,
                             const uint8_t* ref_ptr,
                             int ref_stride);
-unsigned int vpx_sad32x16_vsx(const uint8_t* src_ptr,
-                              int src_stride,
-                              const uint8_t* ref_ptr,
-                              int ref_stride);
-#define vpx_sad32x16 vpx_sad32x16_vsx
+#define vpx_sad32x16 vpx_sad32x16_c
 
 unsigned int vpx_sad32x16_avg_c(const uint8_t* src_ptr,
                                 int src_stride,
                                 const uint8_t* ref_ptr,
                                 int ref_stride,
                                 const uint8_t* second_pred);
-unsigned int vpx_sad32x16_avg_vsx(const uint8_t* src_ptr,
-                                  int src_stride,
-                                  const uint8_t* ref_ptr,
-                                  int ref_stride,
-                                  const uint8_t* second_pred);
-#define vpx_sad32x16_avg vpx_sad32x16_avg_vsx
+#define vpx_sad32x16_avg vpx_sad32x16_avg_c
 
 void vpx_sad32x16x4d_c(const uint8_t* src_ptr,
                        int src_stride,
                        const uint8_t* const ref_array[4],
                        int ref_stride,
                        uint32_t sad_array[4]);
-void vpx_sad32x16x4d_vsx(const uint8_t* src_ptr,
-                         int src_stride,
-                         const uint8_t* const ref_array[4],
-                         int ref_stride,
-                         uint32_t sad_array[4]);
-#define vpx_sad32x16x4d vpx_sad32x16x4d_vsx
+#define vpx_sad32x16x4d vpx_sad32x16x4d_c
 
 unsigned int vpx_sad32x32_c(const uint8_t* src_ptr,
                             int src_stride,
                             const uint8_t* ref_ptr,
                             int ref_stride);
-unsigned int vpx_sad32x32_vsx(const uint8_t* src_ptr,
-                              int src_stride,
-                              const uint8_t* ref_ptr,
-                              int ref_stride);
-#define vpx_sad32x32 vpx_sad32x32_vsx
+#define vpx_sad32x32 vpx_sad32x32_c
 
 unsigned int vpx_sad32x32_avg_c(const uint8_t* src_ptr,
                                 int src_stride,
                                 const uint8_t* ref_ptr,
                                 int ref_stride,
                                 const uint8_t* second_pred);
-unsigned int vpx_sad32x32_avg_vsx(const uint8_t* src_ptr,
-                                  int src_stride,
-                                  const uint8_t* ref_ptr,
-                                  int ref_stride,
-                                  const uint8_t* second_pred);
-#define vpx_sad32x32_avg vpx_sad32x32_avg_vsx
+#define vpx_sad32x32_avg vpx_sad32x32_avg_c
 
 void vpx_sad32x32x4d_c(const uint8_t* src_ptr,
                        int src_stride,
                        const uint8_t* const ref_array[4],
                        int ref_stride,
                        uint32_t sad_array[4]);
-void vpx_sad32x32x4d_vsx(const uint8_t* src_ptr,
-                         int src_stride,
-                         const uint8_t* const ref_array[4],
-                         int ref_stride,
-                         uint32_t sad_array[4]);
-#define vpx_sad32x32x4d vpx_sad32x32x4d_vsx
+#define vpx_sad32x32x4d vpx_sad32x32x4d_c
 
 unsigned int vpx_sad32x64_c(const uint8_t* src_ptr,
                             int src_stride,
                             const uint8_t* ref_ptr,
                             int ref_stride);
-unsigned int vpx_sad32x64_vsx(const uint8_t* src_ptr,
-                              int src_stride,
-                              const uint8_t* ref_ptr,
-                              int ref_stride);
-#define vpx_sad32x64 vpx_sad32x64_vsx
+#define vpx_sad32x64 vpx_sad32x64_c
 
 unsigned int vpx_sad32x64_avg_c(const uint8_t* src_ptr,
                                 int src_stride,
                                 const uint8_t* ref_ptr,
                                 int ref_stride,
                                 const uint8_t* second_pred);
-unsigned int vpx_sad32x64_avg_vsx(const uint8_t* src_ptr,
-                                  int src_stride,
-                                  const uint8_t* ref_ptr,
-                                  int ref_stride,
-                                  const uint8_t* second_pred);
-#define vpx_sad32x64_avg vpx_sad32x64_avg_vsx
+#define vpx_sad32x64_avg vpx_sad32x64_avg_c
 
 void vpx_sad32x64x4d_c(const uint8_t* src_ptr,
                        int src_stride,
                        const uint8_t* const ref_array[4],
                        int ref_stride,
                        uint32_t sad_array[4]);
-void vpx_sad32x64x4d_vsx(const uint8_t* src_ptr,
-                         int src_stride,
-                         const uint8_t* const ref_array[4],
-                         int ref_stride,
-                         uint32_t sad_array[4]);
-#define vpx_sad32x64x4d vpx_sad32x64x4d_vsx
+#define vpx_sad32x64x4d vpx_sad32x64x4d_c
 
 unsigned int vpx_sad4x4_c(const uint8_t* src_ptr,
                           int src_stride,
@@ -1228,79 +3188,47 @@ unsigned int vpx_sad64x32_c(const uint8_t* src_ptr,
                             int src_stride,
                             const uint8_t* ref_ptr,
                             int ref_stride);
-unsigned int vpx_sad64x32_vsx(const uint8_t* src_ptr,
-                              int src_stride,
-                              const uint8_t* ref_ptr,
-                              int ref_stride);
-#define vpx_sad64x32 vpx_sad64x32_vsx
+#define vpx_sad64x32 vpx_sad64x32_c
 
 unsigned int vpx_sad64x32_avg_c(const uint8_t* src_ptr,
                                 int src_stride,
                                 const uint8_t* ref_ptr,
                                 int ref_stride,
                                 const uint8_t* second_pred);
-unsigned int vpx_sad64x32_avg_vsx(const uint8_t* src_ptr,
-                                  int src_stride,
-                                  const uint8_t* ref_ptr,
-                                  int ref_stride,
-                                  const uint8_t* second_pred);
-#define vpx_sad64x32_avg vpx_sad64x32_avg_vsx
+#define vpx_sad64x32_avg vpx_sad64x32_avg_c
 
 void vpx_sad64x32x4d_c(const uint8_t* src_ptr,
                        int src_stride,
                        const uint8_t* const ref_array[4],
                        int ref_stride,
                        uint32_t sad_array[4]);
-void vpx_sad64x32x4d_vsx(const uint8_t* src_ptr,
-                         int src_stride,
-                         const uint8_t* const ref_array[4],
-                         int ref_stride,
-                         uint32_t sad_array[4]);
-#define vpx_sad64x32x4d vpx_sad64x32x4d_vsx
+#define vpx_sad64x32x4d vpx_sad64x32x4d_c
 
 unsigned int vpx_sad64x64_c(const uint8_t* src_ptr,
                             int src_stride,
                             const uint8_t* ref_ptr,
                             int ref_stride);
-unsigned int vpx_sad64x64_vsx(const uint8_t* src_ptr,
-                              int src_stride,
-                              const uint8_t* ref_ptr,
-                              int ref_stride);
-#define vpx_sad64x64 vpx_sad64x64_vsx
+#define vpx_sad64x64 vpx_sad64x64_c
 
 unsigned int vpx_sad64x64_avg_c(const uint8_t* src_ptr,
                                 int src_stride,
                                 const uint8_t* ref_ptr,
                                 int ref_stride,
                                 const uint8_t* second_pred);
-unsigned int vpx_sad64x64_avg_vsx(const uint8_t* src_ptr,
-                                  int src_stride,
-                                  const uint8_t* ref_ptr,
-                                  int ref_stride,
-                                  const uint8_t* second_pred);
-#define vpx_sad64x64_avg vpx_sad64x64_avg_vsx
+#define vpx_sad64x64_avg vpx_sad64x64_avg_c
 
 void vpx_sad64x64x4d_c(const uint8_t* src_ptr,
                        int src_stride,
                        const uint8_t* const ref_array[4],
                        int ref_stride,
                        uint32_t sad_array[4]);
-void vpx_sad64x64x4d_vsx(const uint8_t* src_ptr,
-                         int src_stride,
-                         const uint8_t* const ref_array[4],
-                         int ref_stride,
-                         uint32_t sad_array[4]);
-#define vpx_sad64x64x4d vpx_sad64x64x4d_vsx
+#define vpx_sad64x64x4d vpx_sad64x64x4d_c
 
 unsigned int vpx_sad8x16_c(const uint8_t* src_ptr,
                            int src_stride,
                            const uint8_t* ref_ptr,
                            int ref_stride);
-unsigned int vpx_sad8x16_vsx(const uint8_t* src_ptr,
-                             int src_stride,
-                             const uint8_t* ref_ptr,
-                             int ref_stride);
-#define vpx_sad8x16 vpx_sad8x16_vsx
+#define vpx_sad8x16 vpx_sad8x16_c
 
 unsigned int vpx_sad8x16_avg_c(const uint8_t* src_ptr,
                                int src_stride,
@@ -1320,11 +3248,7 @@ unsigned int vpx_sad8x4_c(const uint8_t* src_ptr,
                           int src_stride,
                           const uint8_t* ref_ptr,
                           int ref_stride);
-unsigned int vpx_sad8x4_vsx(const uint8_t* src_ptr,
-                            int src_stride,
-                            const uint8_t* ref_ptr,
-                            int ref_stride);
-#define vpx_sad8x4 vpx_sad8x4_vsx
+#define vpx_sad8x4 vpx_sad8x4_c
 
 unsigned int vpx_sad8x4_avg_c(const uint8_t* src_ptr,
                               int src_stride,
@@ -1344,11 +3268,7 @@ unsigned int vpx_sad8x8_c(const uint8_t* src_ptr,
                           int src_stride,
                           const uint8_t* ref_ptr,
                           int ref_stride);
-unsigned int vpx_sad8x8_vsx(const uint8_t* src_ptr,
-                            int src_stride,
-                            const uint8_t* ref_ptr,
-                            int ref_stride);
-#define vpx_sad8x8 vpx_sad8x8_vsx
+#define vpx_sad8x8 vpx_sad8x8_c
 
 unsigned int vpx_sad8x8_avg_c(const uint8_t* src_ptr,
                               int src_stride,
@@ -1533,7 +3453,7 @@ void vpx_sad_skip_8x8x4d_c(const uint8_t* src_ptr,
                            uint32_t sad_array[4]);
 #define vpx_sad_skip_8x8x4d vpx_sad_skip_8x8x4d_c
 
-int vpx_satd_c(const int16_t* coeff, int length);
+int vpx_satd_c(const tran_low_t* coeff, int length);
 #define vpx_satd vpx_satd_c
 
 void vpx_scaled_2d_c(const uint8_t* src,
@@ -1877,15 +3797,7 @@ void vpx_subtract_block_c(int rows,
                           ptrdiff_t src_stride,
                           const uint8_t* pred_ptr,
                           ptrdiff_t pred_stride);
-void vpx_subtract_block_vsx(int rows,
-                            int cols,
-                            int16_t* diff_ptr,
-                            ptrdiff_t diff_stride,
-                            const uint8_t* src_ptr,
-                            ptrdiff_t src_stride,
-                            const uint8_t* pred_ptr,
-                            ptrdiff_t pred_stride);
-#define vpx_subtract_block vpx_subtract_block_vsx
+#define vpx_subtract_block vpx_subtract_block_c
 
 uint64_t vpx_sum_squares_2d_i16_c(const int16_t* src, int stride, int size);
 #define vpx_sum_squares_2d_i16 vpx_sum_squares_2d_i16_c
@@ -1894,21 +3806,13 @@ void vpx_tm_predictor_16x16_c(uint8_t* dst,
                               ptrdiff_t stride,
                               const uint8_t* above,
                               const uint8_t* left);
-void vpx_tm_predictor_16x16_vsx(uint8_t* dst,
-                                ptrdiff_t stride,
-                                const uint8_t* above,
-                                const uint8_t* left);
-#define vpx_tm_predictor_16x16 vpx_tm_predictor_16x16_vsx
+#define vpx_tm_predictor_16x16 vpx_tm_predictor_16x16_c
 
 void vpx_tm_predictor_32x32_c(uint8_t* dst,
                               ptrdiff_t stride,
                               const uint8_t* above,
                               const uint8_t* left);
-void vpx_tm_predictor_32x32_vsx(uint8_t* dst,
-                                ptrdiff_t stride,
-                                const uint8_t* above,
-                                const uint8_t* left);
-#define vpx_tm_predictor_32x32 vpx_tm_predictor_32x32_vsx
+#define vpx_tm_predictor_32x32 vpx_tm_predictor_32x32_c
 
 void vpx_tm_predictor_4x4_c(uint8_t* dst,
                             ptrdiff_t stride,
@@ -1926,21 +3830,13 @@ void vpx_v_predictor_16x16_c(uint8_t* dst,
                              ptrdiff_t stride,
                              const uint8_t* above,
                              const uint8_t* left);
-void vpx_v_predictor_16x16_vsx(uint8_t* dst,
-                               ptrdiff_t stride,
-                               const uint8_t* above,
-                               const uint8_t* left);
-#define vpx_v_predictor_16x16 vpx_v_predictor_16x16_vsx
+#define vpx_v_predictor_16x16 vpx_v_predictor_16x16_c
 
 void vpx_v_predictor_32x32_c(uint8_t* dst,
                              ptrdiff_t stride,
                              const uint8_t* above,
                              const uint8_t* left);
-void vpx_v_predictor_32x32_vsx(uint8_t* dst,
-                               ptrdiff_t stride,
-                               const uint8_t* above,
-                               const uint8_t* left);
-#define vpx_v_predictor_32x32 vpx_v_predictor_32x32_vsx
+#define vpx_v_predictor_32x32 vpx_v_predictor_32x32_c
 
 void vpx_v_predictor_4x4_c(uint8_t* dst,
                            ptrdiff_t stride,
@@ -1959,156 +3855,91 @@ unsigned int vpx_variance16x16_c(const uint8_t* src_ptr,
                                  const uint8_t* ref_ptr,
                                  int ref_stride,
                                  unsigned int* sse);
-unsigned int vpx_variance16x16_vsx(const uint8_t* src_ptr,
-                                   int src_stride,
-                                   const uint8_t* ref_ptr,
-                                   int ref_stride,
-                                   unsigned int* sse);
-#define vpx_variance16x16 vpx_variance16x16_vsx
+#define vpx_variance16x16 vpx_variance16x16_c
 
 unsigned int vpx_variance16x32_c(const uint8_t* src_ptr,
                                  int src_stride,
                                  const uint8_t* ref_ptr,
                                  int ref_stride,
                                  unsigned int* sse);
-unsigned int vpx_variance16x32_vsx(const uint8_t* src_ptr,
-                                   int src_stride,
-                                   const uint8_t* ref_ptr,
-                                   int ref_stride,
-                                   unsigned int* sse);
-#define vpx_variance16x32 vpx_variance16x32_vsx
+#define vpx_variance16x32 vpx_variance16x32_c
 
 unsigned int vpx_variance16x8_c(const uint8_t* src_ptr,
                                 int src_stride,
                                 const uint8_t* ref_ptr,
                                 int ref_stride,
                                 unsigned int* sse);
-unsigned int vpx_variance16x8_vsx(const uint8_t* src_ptr,
-                                  int src_stride,
-                                  const uint8_t* ref_ptr,
-                                  int ref_stride,
-                                  unsigned int* sse);
-#define vpx_variance16x8 vpx_variance16x8_vsx
+#define vpx_variance16x8 vpx_variance16x8_c
 
 unsigned int vpx_variance32x16_c(const uint8_t* src_ptr,
                                  int src_stride,
                                  const uint8_t* ref_ptr,
                                  int ref_stride,
                                  unsigned int* sse);
-unsigned int vpx_variance32x16_vsx(const uint8_t* src_ptr,
-                                   int src_stride,
-                                   const uint8_t* ref_ptr,
-                                   int ref_stride,
-                                   unsigned int* sse);
-#define vpx_variance32x16 vpx_variance32x16_vsx
+#define vpx_variance32x16 vpx_variance32x16_c
 
 unsigned int vpx_variance32x32_c(const uint8_t* src_ptr,
                                  int src_stride,
                                  const uint8_t* ref_ptr,
                                  int ref_stride,
                                  unsigned int* sse);
-unsigned int vpx_variance32x32_vsx(const uint8_t* src_ptr,
-                                   int src_stride,
-                                   const uint8_t* ref_ptr,
-                                   int ref_stride,
-                                   unsigned int* sse);
-#define vpx_variance32x32 vpx_variance32x32_vsx
+#define vpx_variance32x32 vpx_variance32x32_c
 
 unsigned int vpx_variance32x64_c(const uint8_t* src_ptr,
                                  int src_stride,
                                  const uint8_t* ref_ptr,
                                  int ref_stride,
                                  unsigned int* sse);
-unsigned int vpx_variance32x64_vsx(const uint8_t* src_ptr,
-                                   int src_stride,
-                                   const uint8_t* ref_ptr,
-                                   int ref_stride,
-                                   unsigned int* sse);
-#define vpx_variance32x64 vpx_variance32x64_vsx
+#define vpx_variance32x64 vpx_variance32x64_c
 
 unsigned int vpx_variance4x4_c(const uint8_t* src_ptr,
                                int src_stride,
                                const uint8_t* ref_ptr,
                                int ref_stride,
                                unsigned int* sse);
-unsigned int vpx_variance4x4_vsx(const uint8_t* src_ptr,
-                                 int src_stride,
-                                 const uint8_t* ref_ptr,
-                                 int ref_stride,
-                                 unsigned int* sse);
-#define vpx_variance4x4 vpx_variance4x4_vsx
+#define vpx_variance4x4 vpx_variance4x4_c
 
 unsigned int vpx_variance4x8_c(const uint8_t* src_ptr,
                                int src_stride,
                                const uint8_t* ref_ptr,
                                int ref_stride,
                                unsigned int* sse);
-unsigned int vpx_variance4x8_vsx(const uint8_t* src_ptr,
-                                 int src_stride,
-                                 const uint8_t* ref_ptr,
-                                 int ref_stride,
-                                 unsigned int* sse);
-#define vpx_variance4x8 vpx_variance4x8_vsx
+#define vpx_variance4x8 vpx_variance4x8_c
 
 unsigned int vpx_variance64x32_c(const uint8_t* src_ptr,
                                  int src_stride,
                                  const uint8_t* ref_ptr,
                                  int ref_stride,
                                  unsigned int* sse);
-unsigned int vpx_variance64x32_vsx(const uint8_t* src_ptr,
-                                   int src_stride,
-                                   const uint8_t* ref_ptr,
-                                   int ref_stride,
-                                   unsigned int* sse);
-#define vpx_variance64x32 vpx_variance64x32_vsx
+#define vpx_variance64x32 vpx_variance64x32_c
 
 unsigned int vpx_variance64x64_c(const uint8_t* src_ptr,
                                  int src_stride,
                                  const uint8_t* ref_ptr,
                                  int ref_stride,
                                  unsigned int* sse);
-unsigned int vpx_variance64x64_vsx(const uint8_t* src_ptr,
-                                   int src_stride,
-                                   const uint8_t* ref_ptr,
-                                   int ref_stride,
-                                   unsigned int* sse);
-#define vpx_variance64x64 vpx_variance64x64_vsx
+#define vpx_variance64x64 vpx_variance64x64_c
 
 unsigned int vpx_variance8x16_c(const uint8_t* src_ptr,
                                 int src_stride,
                                 const uint8_t* ref_ptr,
                                 int ref_stride,
                                 unsigned int* sse);
-unsigned int vpx_variance8x16_vsx(const uint8_t* src_ptr,
-                                  int src_stride,
-                                  const uint8_t* ref_ptr,
-                                  int ref_stride,
-                                  unsigned int* sse);
-#define vpx_variance8x16 vpx_variance8x16_vsx
+#define vpx_variance8x16 vpx_variance8x16_c
 
 unsigned int vpx_variance8x4_c(const uint8_t* src_ptr,
                                int src_stride,
                                const uint8_t* ref_ptr,
                                int ref_stride,
                                unsigned int* sse);
-unsigned int vpx_variance8x4_vsx(const uint8_t* src_ptr,
-                                 int src_stride,
-                                 const uint8_t* ref_ptr,
-                                 int ref_stride,
-                                 unsigned int* sse);
-#define vpx_variance8x4 vpx_variance8x4_vsx
+#define vpx_variance8x4 vpx_variance8x4_c
 
 unsigned int vpx_variance8x8_c(const uint8_t* src_ptr,
                                int src_stride,
                                const uint8_t* ref_ptr,
                                int ref_stride,
                                unsigned int* sse);
-unsigned int vpx_variance8x8_vsx(const uint8_t* src_ptr,
-                                 int src_stride,
-                                 const uint8_t* ref_ptr,
-                                 int ref_stride,
-                                 unsigned int* sse);
-#define vpx_variance8x8 vpx_variance8x8_vsx
+#define vpx_variance8x8 vpx_variance8x8_c
 
 void vpx_ve_predictor_4x4_c(uint8_t* dst,
                             ptrdiff_t stride,
@@ -2124,11 +3955,7 @@ void vpx_dsp_rtcd(void);
 #include "vpx_config.h"
 
 #ifdef RTCD_C
-#include "vpx_ports/ppc.h"
-static void setup_rtcd_internal(void) {
-  int flags = ppc_simd_caps();
-  (void)flags;
-}
+static void setup_rtcd_internal(void) {}
 #endif
 
 #ifdef __cplusplus
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_scale_rtcd.h b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_scale_rtcd.h
index ea868c5251..b6ade37dca 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_scale_rtcd.h
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_scale_rtcd.h
@@ -96,11 +96,7 @@ void vpx_scale_rtcd(void);
 #include "vpx_config.h"
 
 #ifdef RTCD_C
-#include "vpx_ports/ppc.h"
-static void setup_rtcd_internal(void) {
-  int flags = ppc_simd_caps();
-  (void)flags;
-}
+static void setup_rtcd_internal(void) {}
 #endif
 
 #ifdef __cplusplus
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/build/make/rtcd.pl b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/build/make/rtcd.pl
index 9f6aad8fe2..2c8b2ca8f3 100755
--- a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/build/make/rtcd.pl
+++ b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/build/make/rtcd.pl
@@ -509,8 +509,9 @@ if ($opts{arch} eq 'x86') {
   &require(@REQUIRES);
   arm;
 } elsif ($opts{arch} =~ /^ppc/ ) {
-  @ALL_ARCHS = filter(qw/vsx/);
-  ppc;
+  #@ALL_ARCHS = filter(qw/vsx/);
+  #ppc;
+  unoptimized;
 } elsif ($opts{arch} =~ /loongarch/ ) {
   @ALL_ARCHS = filter(qw/lsx lasx/);
   loongarch;
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vp9/encoder/ppc/vp9_quantize_vsx.c b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vp9/encoder/ppc/vp9_quantize_vsx.c
index 4d31558471..ed8d67fa68 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vp9/encoder/ppc/vp9_quantize_vsx.c
+++ b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vp9/encoder/ppc/vp9_quantize_vsx.c
@@ -38,6 +38,28 @@ static INLINE int16x8_t vec_max_across(int16x8_t a) {
   return vec_max(a, vec_perm(a, a, vec_perm16));
 }
 
+static INLINE void
+vec_u64_store(vector unsigned long long vecu64, unsigned long offset, void *ptr)
+{
+#ifndef WORDS_BIGENDIAN
+  __asm__ ("xxswapd %x0, %x1"
+	   : "=wa" (vecu64)
+	   : "wa" (vecu64));
+#endif
+#if __GNUC__ >= 4
+  if (__builtin_constant_p (offset) && offset == 0)
+    __asm__ ("stxvd2x %x0,0,%1\n\t"
+	     :
+	     : "wa" (vecu64), "r" ((uintptr_t)ptr)
+	     : "memory");
+  else
+#endif
+    __asm__ ("stxvd2x %x0,%1,%2\n\t"
+	     :
+	     : "wa" (vecu64), "r" (offset), "r" ((uintptr_t)ptr)
+	     : "memory", "r0");
+}
+
 void vp9_quantize_fp_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
                          const int16_t *round_ptr, const int16_t *quant_ptr,
                          tran_low_t *qcoeff_ptr, tran_low_t *dqcoeff_ptr,
@@ -60,10 +82,10 @@ void vp9_quantize_fp_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   qcoeff0 = vec_mulhi(vec_vaddshs(vec_abs(coeff0), round), quant);
   zero_coeff0 = vec_cmpeq(qcoeff0, vec_zeros_s16);
   qcoeff0 = vec_sign(qcoeff0, coeff0);
-  vec_vsx_st(qcoeff0, 0, qcoeff_ptr);
+  vec_u64_store(qcoeff0, 0, qcoeff_ptr);
 
   dqcoeff0 = vec_mladd(qcoeff0, dequant, vec_zeros_s16);
-  vec_vsx_st(dqcoeff0, 0, dqcoeff_ptr);
+  vec_u64_store(dqcoeff0, 0, dqcoeff_ptr);
 
   // Remove DC value from round and quant
   round = vec_splat(round, 1);
@@ -76,10 +98,10 @@ void vp9_quantize_fp_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   qcoeff1 = vec_mulhi(vec_vaddshs(vec_abs(coeff1), round), quant);
   zero_coeff1 = vec_cmpeq(qcoeff1, vec_zeros_s16);
   qcoeff1 = vec_sign(qcoeff1, coeff1);
-  vec_vsx_st(qcoeff1, 16, qcoeff_ptr);
+  vec_u64_store(qcoeff1, 16, qcoeff_ptr);
 
   dqcoeff1 = vec_mladd(qcoeff1, dequant, vec_zeros_s16);
-  vec_vsx_st(dqcoeff1, 16, dqcoeff_ptr);
+  vec_u64_store(dqcoeff1, 16, dqcoeff_ptr);
 
   eob = vec_max(vec_or(scan0, zero_coeff0), vec_or(scan1, zero_coeff1));
 
@@ -107,23 +129,23 @@ void vp9_quantize_fp_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
       qcoeff0 = vec_mulhi(vec_vaddshs(vec_abs(coeff0), round), quant);
       zero_coeff0 = vec_cmpeq(qcoeff0, vec_zeros_s16);
       qcoeff0 = vec_sign(qcoeff0, coeff0);
-      vec_vsx_st(qcoeff0, off0, qcoeff_ptr);
+      vec_u64_store(qcoeff0, off0, qcoeff_ptr);
       dqcoeff0 = vec_mladd(qcoeff0, dequant, vec_zeros_s16);
-      vec_vsx_st(dqcoeff0, off0, dqcoeff_ptr);
+      vec_u64_store(dqcoeff0, off0, dqcoeff_ptr);
 
       qcoeff1 = vec_mulhi(vec_vaddshs(vec_abs(coeff1), round), quant);
       zero_coeff1 = vec_cmpeq(qcoeff1, vec_zeros_s16);
       qcoeff1 = vec_sign(qcoeff1, coeff1);
-      vec_vsx_st(qcoeff1, off1, qcoeff_ptr);
+      vec_u64_store(qcoeff1, off1, qcoeff_ptr);
       dqcoeff1 = vec_mladd(qcoeff1, dequant, vec_zeros_s16);
-      vec_vsx_st(dqcoeff1, off1, dqcoeff_ptr);
+      vec_u64_store(dqcoeff1, off1, dqcoeff_ptr);
 
       qcoeff2 = vec_mulhi(vec_vaddshs(vec_abs(coeff2), round), quant);
       zero_coeff2 = vec_cmpeq(qcoeff2, vec_zeros_s16);
       qcoeff2 = vec_sign(qcoeff2, coeff2);
-      vec_vsx_st(qcoeff2, off2, qcoeff_ptr);
+      vec_u64_store(qcoeff2, off2, qcoeff_ptr);
       dqcoeff2 = vec_mladd(qcoeff2, dequant, vec_zeros_s16);
-      vec_vsx_st(dqcoeff2, off2, dqcoeff_ptr);
+      vec_u64_store(dqcoeff2, off2, dqcoeff_ptr);
 
       eob = vec_max(eob, vec_or(scan0, zero_coeff0));
       eob2 = vec_max(vec_or(scan1, zero_coeff1), vec_or(scan2, zero_coeff2));
@@ -200,10 +222,10 @@ void vp9_quantize_fp_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   qcoeff0 = vec_and(qcoeff0, mask0);
   zero_coeff0 = vec_cmpeq(qcoeff0, vec_zeros_s16);
   qcoeff0 = vec_sign(qcoeff0, coeff0);
-  vec_vsx_st(qcoeff0, 0, qcoeff_ptr);
+  vec_u64_store(qcoeff0, 0, qcoeff_ptr);
 
   dqcoeff0 = dequantize_coeff_32(qcoeff0, dequant);
-  vec_vsx_st(dqcoeff0, 0, dqcoeff_ptr);
+  vec_u64_store(dqcoeff0, 0, dqcoeff_ptr);
 
   // Remove DC value from thres, round, quant and dequant
   thres = vec_splat(thres, 1);
@@ -219,10 +241,10 @@ void vp9_quantize_fp_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   qcoeff1 = vec_and(qcoeff1, mask1);
   zero_coeff1 = vec_cmpeq(qcoeff1, vec_zeros_s16);
   qcoeff1 = vec_sign(qcoeff1, coeff1);
-  vec_vsx_st(qcoeff1, 16, qcoeff_ptr);
+  vec_u64_store(qcoeff1, 16, qcoeff_ptr);
 
   dqcoeff1 = dequantize_coeff_32(qcoeff1, dequant);
-  vec_vsx_st(dqcoeff1, 16, dqcoeff_ptr);
+  vec_u64_store(dqcoeff1, 16, dqcoeff_ptr);
 
   eob = vec_max(vec_or(scan0, zero_coeff0), vec_or(scan1, zero_coeff1));
 
@@ -260,17 +282,17 @@ void vp9_quantize_fp_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
     qcoeff1 = vec_sign(qcoeff1, coeff1);
     qcoeff2 = vec_sign(qcoeff2, coeff2);
 
-    vec_vsx_st(qcoeff0, off0, qcoeff_ptr);
-    vec_vsx_st(qcoeff1, off1, qcoeff_ptr);
-    vec_vsx_st(qcoeff2, off2, qcoeff_ptr);
+    vec_u64_store(qcoeff0, off0, qcoeff_ptr);
+    vec_u64_store(qcoeff1, off1, qcoeff_ptr);
+    vec_u64_store(qcoeff2, off2, qcoeff_ptr);
 
     dqcoeff0 = dequantize_coeff_32(qcoeff0, dequant);
     dqcoeff1 = dequantize_coeff_32(qcoeff1, dequant);
     dqcoeff2 = dequantize_coeff_32(qcoeff2, dequant);
 
-    vec_vsx_st(dqcoeff0, off0, dqcoeff_ptr);
-    vec_vsx_st(dqcoeff1, off1, dqcoeff_ptr);
-    vec_vsx_st(dqcoeff2, off2, dqcoeff_ptr);
+    vec_u64_store(dqcoeff0, off0, dqcoeff_ptr);
+    vec_u64_store(dqcoeff1, off1, dqcoeff_ptr);
+    vec_u64_store(dqcoeff2, off2, dqcoeff_ptr);
 
     eob = vec_max(eob, vec_or(scan0, zero_coeff0));
     eob2 = vec_max(vec_or(scan1, zero_coeff1), vec_or(scan2, zero_coeff2));
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/fdct32x32_vsx.c b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/fdct32x32_vsx.c
index 328b0e3130..f28664d7e1 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/fdct32x32_vsx.c
+++ b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/fdct32x32_vsx.c
@@ -15,6 +15,28 @@
 #include "vpx_dsp/ppc/txfm_common_vsx.h"
 #include "vpx_dsp/ppc/types_vsx.h"
 
+static INLINE void
+vec_u64_store(vector unsigned long long vecu64, unsigned long offset, void *ptr)
+{
+#ifndef WORDS_BIGENDIAN
+  __asm__ ("xxswapd %x0, %x1"
+	   : "=wa" (vecu64)
+	   : "wa" (vecu64));
+#endif
+#if __GNUC__ >= 4
+  if (__builtin_constant_p (offset) && offset == 0)
+    __asm__ ("stxvd2x %x0,0,%1\n\t"
+	     :
+	     : "wa" (vecu64), "r" ((uintptr_t)ptr)
+	     : "memory");
+  else
+#endif
+    __asm__ ("stxvd2x %x0,%1,%2\n\t"
+	     :
+	     : "wa" (vecu64), "r" (offset), "r" ((uintptr_t)ptr)
+	     : "memory", "r0");
+}
+
 // Returns ((a +/- b) * cospi16 + (2 << 13)) >> 14.
 static INLINE void single_butterfly(int16x8_t a, int16x8_t b, int16x8_t *add,
                                     int16x8_t *sub) {
@@ -164,45 +186,45 @@ static INLINE void load(const int16_t *a, int stride, int16x8_t *b) {
 }
 
 static INLINE void store(tran_low_t *a, const int16x8_t *b) {
-  vec_vsx_st(b[0], 0, a);
-  vec_vsx_st(b[8], 0, a + 8);
-  vec_vsx_st(b[16], 0, a + 16);
-  vec_vsx_st(b[24], 0, a + 24);
-
-  vec_vsx_st(b[1], 0, a + 32);
-  vec_vsx_st(b[9], 0, a + 40);
-  vec_vsx_st(b[17], 0, a + 48);
-  vec_vsx_st(b[25], 0, a + 56);
-
-  vec_vsx_st(b[2], 0, a + 64);
-  vec_vsx_st(b[10], 0, a + 72);
-  vec_vsx_st(b[18], 0, a + 80);
-  vec_vsx_st(b[26], 0, a + 88);
-
-  vec_vsx_st(b[3], 0, a + 96);
-  vec_vsx_st(b[11], 0, a + 104);
-  vec_vsx_st(b[19], 0, a + 112);
-  vec_vsx_st(b[27], 0, a + 120);
-
-  vec_vsx_st(b[4], 0, a + 128);
-  vec_vsx_st(b[12], 0, a + 136);
-  vec_vsx_st(b[20], 0, a + 144);
-  vec_vsx_st(b[28], 0, a + 152);
-
-  vec_vsx_st(b[5], 0, a + 160);
-  vec_vsx_st(b[13], 0, a + 168);
-  vec_vsx_st(b[21], 0, a + 176);
-  vec_vsx_st(b[29], 0, a + 184);
-
-  vec_vsx_st(b[6], 0, a + 192);
-  vec_vsx_st(b[14], 0, a + 200);
-  vec_vsx_st(b[22], 0, a + 208);
-  vec_vsx_st(b[30], 0, a + 216);
-
-  vec_vsx_st(b[7], 0, a + 224);
-  vec_vsx_st(b[15], 0, a + 232);
-  vec_vsx_st(b[23], 0, a + 240);
-  vec_vsx_st(b[31], 0, a + 248);
+  vec_u64_store(b[0], 0, a);
+  vec_u64_store(b[8], 0, a + 8);
+  vec_u64_store(b[16], 0, a + 16);
+  vec_u64_store(b[24], 0, a + 24);
+
+  vec_u64_store(b[1], 0, a + 32);
+  vec_u64_store(b[9], 0, a + 40);
+  vec_u64_store(b[17], 0, a + 48);
+  vec_u64_store(b[25], 0, a + 56);
+
+  vec_u64_store(b[2], 0, a + 64);
+  vec_u64_store(b[10], 0, a + 72);
+  vec_u64_store(b[18], 0, a + 80);
+  vec_u64_store(b[26], 0, a + 88);
+
+  vec_u64_store(b[3], 0, a + 96);
+  vec_u64_store(b[11], 0, a + 104);
+  vec_u64_store(b[19], 0, a + 112);
+  vec_u64_store(b[27], 0, a + 120);
+
+  vec_u64_store(b[4], 0, a + 128);
+  vec_u64_store(b[12], 0, a + 136);
+  vec_u64_store(b[20], 0, a + 144);
+  vec_u64_store(b[28], 0, a + 152);
+
+  vec_u64_store(b[5], 0, a + 160);
+  vec_u64_store(b[13], 0, a + 168);
+  vec_u64_store(b[21], 0, a + 176);
+  vec_u64_store(b[29], 0, a + 184);
+
+  vec_u64_store(b[6], 0, a + 192);
+  vec_u64_store(b[14], 0, a + 200);
+  vec_u64_store(b[22], 0, a + 208);
+  vec_u64_store(b[30], 0, a + 216);
+
+  vec_u64_store(b[7], 0, a + 224);
+  vec_u64_store(b[15], 0, a + 232);
+  vec_u64_store(b[23], 0, a + 240);
+  vec_u64_store(b[31], 0, a + 248);
 }
 
 // Returns 1 if negative 0 if positive
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/quantize_vsx.c b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/quantize_vsx.c
index ab71f6e235..3e9cff6146 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/quantize_vsx.c
+++ b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/quantize_vsx.c
@@ -13,6 +13,28 @@
 #include "./vpx_dsp_rtcd.h"
 #include "vpx_dsp/ppc/types_vsx.h"
 
+static INLINE void
+vec_u64_store(vector unsigned long long vecu64, unsigned long offset, void *ptr)
+{
+#ifndef WORDS_BIGENDIAN
+  __asm__ ("xxswapd %x0, %x1"
+	   : "=wa" (vecu64)
+	   : "wa" (vecu64));
+#endif
+#if __GNUC__ >= 4
+  if (__builtin_constant_p (offset) && offset == 0)
+    __asm__ ("stxvd2x %x0,0,%1\n\t"
+	     :
+	     : "wa" (vecu64), "r" ((uintptr_t)ptr)
+	     : "memory");
+  else
+#endif
+    __asm__ ("stxvd2x %x0,%1,%2\n\t"
+	     :
+	     : "wa" (vecu64), "r" (offset), "r" ((uintptr_t)ptr)
+	     : "memory", "r0");
+}
+
 // Negate 16-bit integers in a when the corresponding signed 16-bit
 // integer in b is negative.
 static INLINE int16x8_t vec_sign(int16x8_t a, int16x8_t b) {
@@ -124,19 +146,19 @@ void vpx_quantize_b_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
 
   qcoeff0 =
       quantize_coeff(coeff0, coeff0_abs, round, quant, quant_shift, zero_mask0);
-  vec_vsx_st(qcoeff0, 0, qcoeff_ptr);
+  vec_u64_store(qcoeff0, 0, qcoeff_ptr);
   round = vec_splat(round, 1);
   quant = vec_splat(quant, 1);
   quant_shift = vec_splat(quant_shift, 1);
   qcoeff1 =
       quantize_coeff(coeff1, coeff1_abs, round, quant, quant_shift, zero_mask1);
-  vec_vsx_st(qcoeff1, 16, qcoeff_ptr);
+  vec_u64_store(qcoeff1, 16, qcoeff_ptr);
 
   dqcoeff0 = vec_mladd(qcoeff0, dequant, vec_zeros_s16);
-  vec_vsx_st(dqcoeff0, 0, dqcoeff_ptr);
+  vec_u64_store(dqcoeff0, 0, dqcoeff_ptr);
   dequant = vec_splat(dequant, 1);
   dqcoeff1 = vec_mladd(qcoeff1, dequant, vec_zeros_s16);
-  vec_vsx_st(dqcoeff1, 16, dqcoeff_ptr);
+  vec_u64_store(dqcoeff1, 16, dqcoeff_ptr);
 
   eob = vec_max(nonzero_scanindex(qcoeff0, iscan_ptr, 0),
                 nonzero_scanindex(qcoeff1, iscan_ptr, 16));
@@ -164,17 +186,17 @@ void vpx_quantize_b_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
                                zero_mask1);
       qcoeff2 = quantize_coeff(coeff2, coeff2_abs, round, quant, quant_shift,
                                zero_mask2);
-      vec_vsx_st(qcoeff0, off0, qcoeff_ptr);
-      vec_vsx_st(qcoeff1, off1, qcoeff_ptr);
-      vec_vsx_st(qcoeff2, off2, qcoeff_ptr);
+      vec_u64_store(qcoeff0, off0, qcoeff_ptr);
+      vec_u64_store(qcoeff1, off1, qcoeff_ptr);
+      vec_u64_store(qcoeff2, off2, qcoeff_ptr);
 
       dqcoeff0 = vec_mladd(qcoeff0, dequant, vec_zeros_s16);
       dqcoeff1 = vec_mladd(qcoeff1, dequant, vec_zeros_s16);
       dqcoeff2 = vec_mladd(qcoeff2, dequant, vec_zeros_s16);
 
-      vec_vsx_st(dqcoeff0, off0, dqcoeff_ptr);
-      vec_vsx_st(dqcoeff1, off1, dqcoeff_ptr);
-      vec_vsx_st(dqcoeff2, off2, dqcoeff_ptr);
+      vec_u64_store(dqcoeff0, off0, dqcoeff_ptr);
+      vec_u64_store(dqcoeff1, off1, dqcoeff_ptr);
+      vec_u64_store(dqcoeff2, off2, dqcoeff_ptr);
 
       eob = vec_max(eob, nonzero_scanindex(qcoeff0, iscan_ptr, off0));
       eob2 = vec_max(nonzero_scanindex(qcoeff1, iscan_ptr, off1),
@@ -243,12 +265,12 @@ void vpx_quantize_b_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   qcoeff1 = quantize_coeff_32(coeff1, coeff1_abs, round, quant, quant_shift,
                               zero_mask1);
 
-  vec_vsx_st(qcoeff0, 0, qcoeff_ptr);
-  vec_vsx_st(qcoeff1, 16, qcoeff_ptr);
+  vec_u64_store(qcoeff0, 0, qcoeff_ptr);
+  vec_u64_store(qcoeff1, 16, qcoeff_ptr);
 
-  vec_vsx_st(dequantize_coeff_32(qcoeff0, dequant), 0, dqcoeff_ptr);
+  vec_u64_store(dequantize_coeff_32(qcoeff0, dequant), 0, dqcoeff_ptr);
   dequant = vec_splat(dequant, 1);  // remove DC from dequant
-  vec_vsx_st(dequantize_coeff_32(qcoeff1, dequant), 16, dqcoeff_ptr);
+  vec_u64_store(dequantize_coeff_32(qcoeff1, dequant), 16, dqcoeff_ptr);
 
   eob = vec_max(nonzero_scanindex(qcoeff0, iscan_ptr, 0),
                 nonzero_scanindex(qcoeff1, iscan_ptr, 16));
@@ -276,13 +298,13 @@ void vpx_quantize_b_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
     qcoeff2 = quantize_coeff_32(coeff2, coeff2_abs, round, quant, quant_shift,
                                 zero_mask2);
 
-    vec_vsx_st(qcoeff0, off0, qcoeff_ptr);
-    vec_vsx_st(qcoeff1, off1, qcoeff_ptr);
-    vec_vsx_st(qcoeff2, off2, qcoeff_ptr);
+    vec_u64_store(qcoeff0, off0, qcoeff_ptr);
+    vec_u64_store(qcoeff1, off1, qcoeff_ptr);
+    vec_u64_store(qcoeff2, off2, qcoeff_ptr);
 
-    vec_vsx_st(dequantize_coeff_32(qcoeff0, dequant), off0, dqcoeff_ptr);
-    vec_vsx_st(dequantize_coeff_32(qcoeff1, dequant), off1, dqcoeff_ptr);
-    vec_vsx_st(dequantize_coeff_32(qcoeff2, dequant), off2, dqcoeff_ptr);
+    vec_u64_store(dequantize_coeff_32(qcoeff0, dequant), off0, dqcoeff_ptr);
+    vec_u64_store(dequantize_coeff_32(qcoeff1, dequant), off1, dqcoeff_ptr);
+    vec_u64_store(dequantize_coeff_32(qcoeff2, dequant), off2, dqcoeff_ptr);
 
     eob = vec_max(eob, nonzero_scanindex(qcoeff0, iscan_ptr, off0));
     eob2 = vec_max(nonzero_scanindex(qcoeff1, iscan_ptr, off1),
-- 
2.52.0


From 76fe1d539bf141c16ab3882fc3c9bb9da2bcd21d Mon Sep 17 00:00:00 2001
From: Marcus Comstedt <marcus@mc.pp.se>
Date: Wed, 6 Jan 2021 13:25:36 +0100
Subject: [PATCH 2/5] Interpret "ppc64" as big endian

---
 .../chromium/third_party/libvpx/BUILD.gn      | 19 +++++++++++++++++-
 .../third_party/libvpx/generate_gni.sh        | 20 ++++++++++++++++---
 .../third_party/libvpx/libvpx_srcs.gni        | 19 ++++++++++++++++++
 .../source/config/linux/ppc64/vpx_config.asm  |  8 ++++----
 .../source/config/linux/ppc64/vpx_config.c    |  2 +-
 .../source/config/linux/ppc64/vpx_config.h    |  8 ++++----
 .../source/libvpx/build/make/configure.sh     |  7 +++++++
 .../libvpx/source/libvpx/configure            |  1 +
 8 files changed, 71 insertions(+), 13 deletions(-)

diff --git a/src/3rdparty/chromium/third_party/libvpx/BUILD.gn b/src/3rdparty/chromium/third_party/libvpx/BUILD.gn
index d8b2053f87..ba1049536a 100644
--- a/src/3rdparty/chromium/third_party/libvpx/BUILD.gn
+++ b/src/3rdparty/chromium/third_party/libvpx/BUILD.gn
@@ -315,8 +315,9 @@ if (current_cpu == "x86" || (current_cpu == "x64" && !is_msan)) {
     } else if (current_cpu == "x64") {
       deps = [ ":libvpx_x86_64_headers" ]
       sources = libvpx_srcs_x86_64_avx512
-    } else if (current_cpu == "ppc64") {
+    } else if (current_cpu == "ppc64" || current_cpu == "ppc64el") {
       sources = libvpx_srcs_ppc64
+      public_deps = [ ":libvpx_ppc64_headers" ]
     }
   }
 }
@@ -443,6 +444,19 @@ if (current_cpu == "arm") {
   }
 }
 
+if (current_cpu == "ppc64" || current_cpu == "ppc64el") {
+  source_set("libvpx_intrinsics_vsx") {
+    configs -= [ "//build/config/compiler:chromium_code" ]
+    configs += [ "//build/config/compiler:no_chromium_code" ]
+    configs += [ ":libvpx_config" ]
+    cflags = [
+      "-maltivec",
+      "-mvsx",
+    ]
+    sources = libvpx_srcs_ppc64_vsx
+  }
+}
+
 # Converts ARM assembly files to GAS style.
 if (current_cpu == "arm" && arm_assembly_sources != []) {
   action_foreach("convert_arm_assembly") {
@@ -633,6 +647,9 @@ static_library("bundled_libvpx") {
   if (current_cpu == "loong64") {
     deps += [ ":libvpx_loongarch_lsx" ]
   }
+  if (current_cpu == "ppc64" || current_cpu == "ppc64el") {
+    deps += [ ":libvpx_intrinsics_vsx" ]
+  }
 
   public_configs = [ ":libvpx_public_config" ]
 }
diff --git a/src/3rdparty/chromium/third_party/libvpx/generate_gni.sh b/src/3rdparty/chromium/third_party/libvpx/generate_gni.sh
index 5282b56d8c..8c8b4a40be 100755
--- a/src/3rdparty/chromium/third_party/libvpx/generate_gni.sh
+++ b/src/3rdparty/chromium/third_party/libvpx/generate_gni.sh
@@ -151,6 +151,11 @@ function convert_srcs_to_project_files() {
     local intrinsic_list=$(echo "$source_list" | egrep '(lsx).(c|h)$')
   fi
 
+  if [ "libvpx_srcs_ppc64" == "$2" ]; then
+    local intrinsic_list=$(echo "$source_list" | \
+      egrep 'vsx.*(\.c|\.asm)$')
+  fi
+
   # Remove these files from the main list.
   source_list=$(comm -23 <(echo "$source_list") <(echo "$intrinsic_list"))
 
@@ -203,12 +208,16 @@ function convert_srcs_to_project_files() {
         egrep '\.asm$')
       local neon_sources=$(echo "$intrinsic_list" | \
         grep -e '_neon\.c$' -e '_neon_asm\.c')
+      local vsx_sources=$(echo "$intrinsic_list" | grep '_vsx\.c$')
       write_gni c_sources $2 "$BASE_DIR/libvpx_srcs.gni"
       write_gni c_headers $2_headers "$BASE_DIR/libvpx_srcs.gni"
       write_gni assembly_sources $2_assembly "$BASE_DIR/libvpx_srcs.gni"
       if [ 0 -ne ${#neon_sources} ]; then
         write_gni neon_sources $2_neon "$BASE_DIR/libvpx_srcs.gni"
       fi
+      if [ 0 -ne ${#vsx_sources} ]; then
+        write_gni vsx_sources $2_vsx "$BASE_DIR/libvpx_srcs.gni"
+      fi
       if [[ "$2" =~ arm64 ]]; then
         local neon_dotprod_sources=$(echo "$intrinsic_list" | \
           grep '_neon_dotprod\.c$')
@@ -433,7 +442,8 @@ gen_config_files linux/mipsel "--target=mips32-linux-gcc ${all_platforms}"
 gen_config_files linux/mips64el "--target=mips64-linux-gcc ${all_platforms}"
 gen_config_files linux/loongarch \
   "--target=loongarch64-linux-gcc ${all_platforms}"
-gen_config_files linux/ppc64 "--target=generic-gnu $HIGHBD ${all_platforms}"
+gen_config_files linux/ppc64 "--target=ppc64-linux-gcc --enable-vsx $HIGHBD ${all_platforms}"
+gen_config_files linux/ppc64le "--target=ppc64le-linux-gcc --enable-vsx $HIGHBD ${all_platforms}"
 gen_config_files linux/generic "--target=generic-gnu $HIGHBD ${all_platforms}"
 gen_config_files win/arm64-highbd \
   "--target=arm64-win64-vs15 ${all_platforms} ${HIGHBD} ${disable_sve}"
@@ -467,6 +477,7 @@ lint_config linux/mipsel
 lint_config linux/mips64el
 lint_config linux/loongarch
 lint_config linux/ppc64
+lint_config linux/ppc64le
 lint_config linux/generic
 lint_config win/arm64-highbd
 lint_config win/ia32
@@ -498,7 +509,8 @@ gen_rtcd_header linux/arm64-highbd armv8 "${require_neon}"
 gen_rtcd_header linux/mipsel mipsel
 gen_rtcd_header linux/mips64el mips64el
 gen_rtcd_header linux/loongarch loongarch
-gen_rtcd_header linux/ppc64 ppc
+gen_rtcd_header linux/ppc64 ppc64
+gen_rtcd_header linux/ppc64le ppc64le
 gen_rtcd_header linux/generic generic
 gen_rtcd_header win/arm64-highbd armv8 "${require_neon} ${disable_sve}"
 gen_rtcd_header win/ia32 x86 "${require_sse2}"
@@ -593,12 +605,14 @@ if [[ -z $ONLY_CONFIGS ]]; then
   make libvpx_srcs.txt target=libs $config > /dev/null
   convert_srcs_to_project_files libvpx_srcs.txt libvpx_srcs_loongarch
 
-  echo "Generate ppc64 source list."
+  echo "Generate PPC64 source list."
   config=$(print_config_basic linux/ppc64)
   make_clean
   make libvpx_srcs.txt target=libs $config > /dev/null
   convert_srcs_to_project_files libvpx_srcs.txt libvpx_srcs_ppc64
 
+  echo "PPC64LE source list is identical to PPC64 source list. No need to generate it."
+
   echo "Generate NaCl source list."
   config=$(print_config_basic nacl)
   make_clean
diff --git a/src/3rdparty/chromium/third_party/libvpx/libvpx_srcs.gni b/src/3rdparty/chromium/third_party/libvpx/libvpx_srcs.gni
index 9bc0fd24ab..2708f00453 100644
--- a/src/3rdparty/chromium/third_party/libvpx/libvpx_srcs.gni
+++ b/src/3rdparty/chromium/third_party/libvpx/libvpx_srcs.gni
@@ -4673,6 +4673,10 @@ libvpx_srcs_ppc64_headers = [
   "//third_party/libvpx/source/libvpx/vpx_dsp/fwd_txfm.h",
   "//third_party/libvpx/source/libvpx/vpx_dsp/inv_txfm.h",
   "//third_party/libvpx/source/libvpx/vpx_dsp/postproc.h",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/bitdepth_conversion_vsx.h",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/transpose_vsx.h",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/txfm_common_vsx.h",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/types_vsx.h",
   "//third_party/libvpx/source/libvpx/vpx_dsp/prob.h",
   "//third_party/libvpx/source/libvpx/vpx_dsp/psnr.h",
   "//third_party/libvpx/source/libvpx/vpx_dsp/quantize.h",
@@ -4709,6 +4713,21 @@ libvpx_srcs_ppc64_headers = [
   "//third_party/libvpx/source/libvpx/vpx_util/vpx_write_yuv_frame.h",
 ]
 libvpx_srcs_ppc64_assembly = []
+libvpx_srcs_ppc64_vsx = [
+  "//third_party/libvpx/source/libvpx/vp9/common/ppc/vp9_idct_vsx.c",
+  "//third_party/libvpx/source/libvpx/vp9/encoder/ppc/vp9_quantize_vsx.c",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/deblock_vsx.c",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/fdct32x32_vsx.c",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/hadamard_vsx.c",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/intrapred_vsx.c",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/inv_txfm_vsx.c",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/quantize_vsx.c",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/sad_vsx.c",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/subtract_vsx.c",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/variance_vsx.c",
+  "//third_party/libvpx/source/libvpx/vpx_dsp/ppc/vpx_convolve_vsx.c",
+]
+
 libvpx_srcs_nacl = [
   "//third_party/libvpx/source/libvpx/vp8/common/alloccommon.c",
   "//third_party/libvpx/source/libvpx/vp8/common/blockd.c",
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.asm b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.asm
index b2b9ab7b5d..6655b82bf9 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.asm
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.asm
@@ -11,8 +11,8 @@
 .equ ARCH_X86 ,  0
 .equ VPX_ARCH_X86_64 ,  0
 .equ ARCH_X86_64 ,  0
-.equ VPX_ARCH_PPC ,  0
-.equ ARCH_PPC ,  0
+.equ VPX_ARCH_PPC ,  1
+.equ ARCH_PPC ,  1
 .equ VPX_ARCH_LOONGARCH ,  0
 .equ ARCH_LOONGARCH ,  0
 .equ HAVE_NEON_ASM ,  0
@@ -34,7 +34,7 @@
 .equ HAVE_AVX ,  0
 .equ HAVE_AVX2 ,  0
 .equ HAVE_AVX512 ,  0
-.equ HAVE_VSX ,  0
+.equ HAVE_VSX ,  1
 .equ HAVE_MMI ,  0
 .equ HAVE_LSX ,  0
 .equ HAVE_LASX ,  0
@@ -54,7 +54,7 @@
 .equ CONFIG_GCC ,  1
 .equ CONFIG_MSVS ,  0
 .equ CONFIG_PIC ,  0
-.equ CONFIG_BIG_ENDIAN ,  0
+.equ CONFIG_BIG_ENDIAN ,  1
 .equ CONFIG_CODEC_SRCS ,  0
 .equ CONFIG_DEBUG_LIBS ,  0
 .equ CONFIG_DEQUANT_TOKENS ,  0
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.c b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.c
index f8a8a3db51..d0d2458525 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.c
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.c
@@ -6,5 +6,5 @@
 /* in the file PATENTS.  All contributing project authors may */
 /* be found in the AUTHORS file in the root of the source tree. */
 #include "vpx/vpx_codec.h"
-static const char* const cfg = "--target=generic-gnu --enable-vp9-highbitdepth --enable-external-build --enable-postproc --enable-multi-res-encoding --enable-temporal-denoising --enable-vp9-temporal-denoising --enable-vp9-postproc --size-limit=16384x16384 --enable-realtime-only --disable-install-docs --disable-libyuv --enable-unit-tests";
+static const char* const cfg = "--target=ppc64-linux-gcc --enable-vsx --enable-vp9-highbitdepth --enable-external-build --enable-postproc --enable-multi-res-encoding --enable-temporal-denoising --enable-vp9-temporal-denoising --enable-vp9-postproc --size-limit=16384x16384 --enable-realtime-only --disable-install-docs --disable-libyuv --enable-unit-tests";
 const char *vpx_codec_build_config(void) {return cfg;}
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.h b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.h
index cf565e8d7f..fd54385a95 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.h
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_config.h
@@ -20,8 +20,8 @@
 #define ARCH_X86 0
 #define VPX_ARCH_X86_64 0
 #define ARCH_X86_64 0
-#define VPX_ARCH_PPC 0
-#define ARCH_PPC 0
+#define VPX_ARCH_PPC 1
+#define ARCH_PPC 1
 #define VPX_ARCH_LOONGARCH 0
 #define ARCH_LOONGARCH 0
 #define HAVE_NEON_ASM 0
@@ -43,7 +43,7 @@
 #define HAVE_AVX 0
 #define HAVE_AVX2 0
 #define HAVE_AVX512 0
-#define HAVE_VSX 0
+#define HAVE_VSX 1
 #define HAVE_MMI 0
 #define HAVE_LSX 0
 #define HAVE_LASX 0
@@ -63,7 +63,7 @@
 #define CONFIG_GCC 1
 #define CONFIG_MSVS 0
 #define CONFIG_PIC 0
-#define CONFIG_BIG_ENDIAN 0
+#define CONFIG_BIG_ENDIAN 1
 #define CONFIG_CODEC_SRCS 0
 #define CONFIG_DEBUG_LIBS 0
 #define CONFIG_DEQUANT_TOKENS 0
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/build/make/configure.sh b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/build/make/configure.sh
index d1d89aa696..9facbec4c5 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/build/make/configure.sh
+++ b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/build/make/configure.sh
@@ -811,6 +811,9 @@ process_common_toolchain() {
         ;;
       power*64le*-*)
         tgt_isa=ppc64le
+	;;
+      power*64*-*)
+        tgt_isa=ppc64
         ;;
       *mips64el*)
         tgt_isa=mips64
@@ -893,8 +896,12 @@ process_common_toolchain() {
     mips*)
       enable_feature mips
       ;;
+    ppc*le)
+      enable_feature ppc
+      ;;
     ppc*)
       enable_feature ppc
+      enable_feature big_endian
       ;;
     loongarch*)
       soft_enable lsx
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/configure b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/configure
index 457bd6b380..24ac48fa27 100755
--- a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/configure
+++ b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/configure
@@ -127,6 +127,7 @@ all_platforms="${all_platforms} loongarch32-linux-gcc"
 all_platforms="${all_platforms} loongarch64-linux-gcc"
 all_platforms="${all_platforms} mips32-linux-gcc"
 all_platforms="${all_platforms} mips64-linux-gcc"
+all_platforms="${all_platforms} ppc64-linux-gcc"
 all_platforms="${all_platforms} ppc64le-linux-gcc"
 all_platforms="${all_platforms} sparc-solaris-gcc"
 all_platforms="${all_platforms} x86-android-gcc"
-- 
2.52.0


From c8fcf1a37222410966a5e27e4214e992821e606d Mon Sep 17 00:00:00 2001
From: Marcus Comstedt <marcus@mc.pp.se>
Date: Mon, 3 Jul 2023 12:08:25 +0200
Subject: [PATCH 3/5] Fix VSX high bitdepth support

---
 .../libvpx/vp9/encoder/ppc/vp9_quantize_vsx.c |  83 ++++++--------
 .../source/libvpx/vpx_dsp/ppc/fdct32x32_vsx.c | 101 +++++++-----------
 .../source/libvpx/vpx_dsp/ppc/quantize_vsx.c  |  83 ++++++--------
 3 files changed, 102 insertions(+), 165 deletions(-)

diff --git a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vp9/encoder/ppc/vp9_quantize_vsx.c b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vp9/encoder/ppc/vp9_quantize_vsx.c
index ed8d67fa68..788cdaa960 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vp9/encoder/ppc/vp9_quantize_vsx.c
+++ b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vp9/encoder/ppc/vp9_quantize_vsx.c
@@ -12,6 +12,7 @@
 
 #include "./vp9_rtcd.h"
 #include "vpx_dsp/ppc/types_vsx.h"
+#include "vpx_dsp/ppc/bitdepth_conversion_vsx.h"
 
 // Multiply the packed 16-bit integers in a and b, producing intermediate 32-bit
 // integers, and return the high 16 bits of the intermediate integers.
@@ -38,28 +39,6 @@ static INLINE int16x8_t vec_max_across(int16x8_t a) {
   return vec_max(a, vec_perm(a, a, vec_perm16));
 }
 
-static INLINE void
-vec_u64_store(vector unsigned long long vecu64, unsigned long offset, void *ptr)
-{
-#ifndef WORDS_BIGENDIAN
-  __asm__ ("xxswapd %x0, %x1"
-	   : "=wa" (vecu64)
-	   : "wa" (vecu64));
-#endif
-#if __GNUC__ >= 4
-  if (__builtin_constant_p (offset) && offset == 0)
-    __asm__ ("stxvd2x %x0,0,%1\n\t"
-	     :
-	     : "wa" (vecu64), "r" ((uintptr_t)ptr)
-	     : "memory");
-  else
-#endif
-    __asm__ ("stxvd2x %x0,%1,%2\n\t"
-	     :
-	     : "wa" (vecu64), "r" (offset), "r" ((uintptr_t)ptr)
-	     : "memory", "r0");
-}
-
 void vp9_quantize_fp_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
                          const int16_t *round_ptr, const int16_t *quant_ptr,
                          tran_low_t *qcoeff_ptr, tran_low_t *dqcoeff_ptr,
@@ -71,8 +50,8 @@ void vp9_quantize_fp_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   int16x8_t round = vec_vsx_ld(0, round_ptr);
   int16x8_t quant = vec_vsx_ld(0, quant_ptr);
   int16x8_t dequant = vec_vsx_ld(0, dequant_ptr);
-  int16x8_t coeff0 = vec_vsx_ld(0, coeff_ptr);
-  int16x8_t coeff1 = vec_vsx_ld(16, coeff_ptr);
+  int16x8_t coeff0 = load_tran_low(0, coeff_ptr);
+  int16x8_t coeff1 = load_tran_low(16, coeff_ptr);
   int16x8_t scan0 = vec_vsx_ld(0, iscan);
   int16x8_t scan1 = vec_vsx_ld(16, iscan);
 
@@ -82,10 +61,10 @@ void vp9_quantize_fp_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   qcoeff0 = vec_mulhi(vec_vaddshs(vec_abs(coeff0), round), quant);
   zero_coeff0 = vec_cmpeq(qcoeff0, vec_zeros_s16);
   qcoeff0 = vec_sign(qcoeff0, coeff0);
-  vec_u64_store(qcoeff0, 0, qcoeff_ptr);
+  store_tran_low(qcoeff0, 0, qcoeff_ptr);
 
   dqcoeff0 = vec_mladd(qcoeff0, dequant, vec_zeros_s16);
-  vec_u64_store(dqcoeff0, 0, dqcoeff_ptr);
+  store_tran_low(dqcoeff0, 0, dqcoeff_ptr);
 
   // Remove DC value from round and quant
   round = vec_splat(round, 1);
@@ -98,10 +77,10 @@ void vp9_quantize_fp_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   qcoeff1 = vec_mulhi(vec_vaddshs(vec_abs(coeff1), round), quant);
   zero_coeff1 = vec_cmpeq(qcoeff1, vec_zeros_s16);
   qcoeff1 = vec_sign(qcoeff1, coeff1);
-  vec_u64_store(qcoeff1, 16, qcoeff_ptr);
+  store_tran_low(qcoeff1, 16, qcoeff_ptr);
 
   dqcoeff1 = vec_mladd(qcoeff1, dequant, vec_zeros_s16);
-  vec_u64_store(dqcoeff1, 16, dqcoeff_ptr);
+  store_tran_low(dqcoeff1, 16, dqcoeff_ptr);
 
   eob = vec_max(vec_or(scan0, zero_coeff0), vec_or(scan1, zero_coeff1));
 
@@ -119,9 +98,9 @@ void vp9_quantize_fp_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
     int off2 = 64;
 
     do {
-      coeff0 = vec_vsx_ld(off0, coeff_ptr);
-      coeff1 = vec_vsx_ld(off1, coeff_ptr);
-      coeff2 = vec_vsx_ld(off2, coeff_ptr);
+      coeff0 = load_tran_low(off0, coeff_ptr);
+      coeff1 = load_tran_low(off1, coeff_ptr);
+      coeff2 = load_tran_low(off2, coeff_ptr);
       scan0 = vec_vsx_ld(off0, iscan);
       scan1 = vec_vsx_ld(off1, iscan);
       scan2 = vec_vsx_ld(off2, iscan);
@@ -129,23 +108,23 @@ void vp9_quantize_fp_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
       qcoeff0 = vec_mulhi(vec_vaddshs(vec_abs(coeff0), round), quant);
       zero_coeff0 = vec_cmpeq(qcoeff0, vec_zeros_s16);
       qcoeff0 = vec_sign(qcoeff0, coeff0);
-      vec_u64_store(qcoeff0, off0, qcoeff_ptr);
+      store_tran_low(qcoeff0, off0, qcoeff_ptr);
       dqcoeff0 = vec_mladd(qcoeff0, dequant, vec_zeros_s16);
-      vec_u64_store(dqcoeff0, off0, dqcoeff_ptr);
+      store_tran_low(dqcoeff0, off0, dqcoeff_ptr);
 
       qcoeff1 = vec_mulhi(vec_vaddshs(vec_abs(coeff1), round), quant);
       zero_coeff1 = vec_cmpeq(qcoeff1, vec_zeros_s16);
       qcoeff1 = vec_sign(qcoeff1, coeff1);
-      vec_u64_store(qcoeff1, off1, qcoeff_ptr);
+      store_tran_low(qcoeff1, off1, qcoeff_ptr);
       dqcoeff1 = vec_mladd(qcoeff1, dequant, vec_zeros_s16);
-      vec_u64_store(dqcoeff1, off1, dqcoeff_ptr);
+      store_tran_low(dqcoeff1, off1, dqcoeff_ptr);
 
       qcoeff2 = vec_mulhi(vec_vaddshs(vec_abs(coeff2), round), quant);
       zero_coeff2 = vec_cmpeq(qcoeff2, vec_zeros_s16);
       qcoeff2 = vec_sign(qcoeff2, coeff2);
-      vec_u64_store(qcoeff2, off2, qcoeff_ptr);
+      store_tran_low(qcoeff2, off2, qcoeff_ptr);
       dqcoeff2 = vec_mladd(qcoeff2, dequant, vec_zeros_s16);
-      vec_u64_store(dqcoeff2, off2, dqcoeff_ptr);
+      store_tran_low(dqcoeff2, off2, dqcoeff_ptr);
 
       eob = vec_max(eob, vec_or(scan0, zero_coeff0));
       eob2 = vec_max(vec_or(scan1, zero_coeff1), vec_or(scan2, zero_coeff2));
@@ -204,8 +183,8 @@ void vp9_quantize_fp_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   int16x8_t round = vec_vsx_ld(0, round_ptr);
   int16x8_t quant = vec_vsx_ld(0, quant_ptr);
   int16x8_t dequant = vec_vsx_ld(0, dequant_ptr);
-  int16x8_t coeff0 = vec_vsx_ld(0, coeff_ptr);
-  int16x8_t coeff1 = vec_vsx_ld(16, coeff_ptr);
+  int16x8_t coeff0 = load_tran_low(0, coeff_ptr);
+  int16x8_t coeff1 = load_tran_low(16, coeff_ptr);
   int16x8_t scan0 = vec_vsx_ld(0, iscan);
   int16x8_t scan1 = vec_vsx_ld(16, iscan);
   int16x8_t thres = vec_sra(dequant, vec_splats((uint16_t)2));
@@ -222,10 +201,10 @@ void vp9_quantize_fp_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   qcoeff0 = vec_and(qcoeff0, mask0);
   zero_coeff0 = vec_cmpeq(qcoeff0, vec_zeros_s16);
   qcoeff0 = vec_sign(qcoeff0, coeff0);
-  vec_u64_store(qcoeff0, 0, qcoeff_ptr);
+  store_tran_low(qcoeff0, 0, qcoeff_ptr);
 
   dqcoeff0 = dequantize_coeff_32(qcoeff0, dequant);
-  vec_u64_store(dqcoeff0, 0, dqcoeff_ptr);
+  store_tran_low(dqcoeff0, 0, dqcoeff_ptr);
 
   // Remove DC value from thres, round, quant and dequant
   thres = vec_splat(thres, 1);
@@ -241,19 +220,19 @@ void vp9_quantize_fp_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   qcoeff1 = vec_and(qcoeff1, mask1);
   zero_coeff1 = vec_cmpeq(qcoeff1, vec_zeros_s16);
   qcoeff1 = vec_sign(qcoeff1, coeff1);
-  vec_u64_store(qcoeff1, 16, qcoeff_ptr);
+  store_tran_low(qcoeff1, 16, qcoeff_ptr);
 
   dqcoeff1 = dequantize_coeff_32(qcoeff1, dequant);
-  vec_u64_store(dqcoeff1, 16, dqcoeff_ptr);
+  store_tran_low(dqcoeff1, 16, dqcoeff_ptr);
 
   eob = vec_max(vec_or(scan0, zero_coeff0), vec_or(scan1, zero_coeff1));
 
   do {
     int16x8_t coeff2, abs_coeff2, qcoeff2, dqcoeff2, eob2, scan2;
     bool16x8_t zero_coeff2, mask2;
-    coeff0 = vec_vsx_ld(off0, coeff_ptr);
-    coeff1 = vec_vsx_ld(off1, coeff_ptr);
-    coeff2 = vec_vsx_ld(off2, coeff_ptr);
+    coeff0 = load_tran_low(off0, coeff_ptr);
+    coeff1 = load_tran_low(off1, coeff_ptr);
+    coeff2 = load_tran_low(off2, coeff_ptr);
     scan0 = vec_vsx_ld(off0, iscan);
     scan1 = vec_vsx_ld(off1, iscan);
     scan2 = vec_vsx_ld(off2, iscan);
@@ -282,17 +261,17 @@ void vp9_quantize_fp_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
     qcoeff1 = vec_sign(qcoeff1, coeff1);
     qcoeff2 = vec_sign(qcoeff2, coeff2);
 
-    vec_u64_store(qcoeff0, off0, qcoeff_ptr);
-    vec_u64_store(qcoeff1, off1, qcoeff_ptr);
-    vec_u64_store(qcoeff2, off2, qcoeff_ptr);
+    store_tran_low(qcoeff0, off0, qcoeff_ptr);
+    store_tran_low(qcoeff1, off1, qcoeff_ptr);
+    store_tran_low(qcoeff2, off2, qcoeff_ptr);
 
     dqcoeff0 = dequantize_coeff_32(qcoeff0, dequant);
     dqcoeff1 = dequantize_coeff_32(qcoeff1, dequant);
     dqcoeff2 = dequantize_coeff_32(qcoeff2, dequant);
 
-    vec_u64_store(dqcoeff0, off0, dqcoeff_ptr);
-    vec_u64_store(dqcoeff1, off1, dqcoeff_ptr);
-    vec_u64_store(dqcoeff2, off2, dqcoeff_ptr);
+    store_tran_low(dqcoeff0, off0, dqcoeff_ptr);
+    store_tran_low(dqcoeff1, off1, dqcoeff_ptr);
+    store_tran_low(dqcoeff2, off2, dqcoeff_ptr);
 
     eob = vec_max(eob, vec_or(scan0, zero_coeff0));
     eob2 = vec_max(vec_or(scan1, zero_coeff1), vec_or(scan2, zero_coeff2));
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/fdct32x32_vsx.c b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/fdct32x32_vsx.c
index f28664d7e1..b60d2fbb82 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/fdct32x32_vsx.c
+++ b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/fdct32x32_vsx.c
@@ -14,28 +14,7 @@
 #include "vpx_dsp/ppc/transpose_vsx.h"
 #include "vpx_dsp/ppc/txfm_common_vsx.h"
 #include "vpx_dsp/ppc/types_vsx.h"
-
-static INLINE void
-vec_u64_store(vector unsigned long long vecu64, unsigned long offset, void *ptr)
-{
-#ifndef WORDS_BIGENDIAN
-  __asm__ ("xxswapd %x0, %x1"
-	   : "=wa" (vecu64)
-	   : "wa" (vecu64));
-#endif
-#if __GNUC__ >= 4
-  if (__builtin_constant_p (offset) && offset == 0)
-    __asm__ ("stxvd2x %x0,0,%1\n\t"
-	     :
-	     : "wa" (vecu64), "r" ((uintptr_t)ptr)
-	     : "memory");
-  else
-#endif
-    __asm__ ("stxvd2x %x0,%1,%2\n\t"
-	     :
-	     : "wa" (vecu64), "r" (offset), "r" ((uintptr_t)ptr)
-	     : "memory", "r0");
-}
+#include "vpx_dsp/ppc/bitdepth_conversion_vsx.h"
 
 // Returns ((a +/- b) * cospi16 + (2 << 13)) >> 14.
 static INLINE void single_butterfly(int16x8_t a, int16x8_t b, int16x8_t *add,
@@ -186,45 +165,45 @@ static INLINE void load(const int16_t *a, int stride, int16x8_t *b) {
 }
 
 static INLINE void store(tran_low_t *a, const int16x8_t *b) {
-  vec_u64_store(b[0], 0, a);
-  vec_u64_store(b[8], 0, a + 8);
-  vec_u64_store(b[16], 0, a + 16);
-  vec_u64_store(b[24], 0, a + 24);
-
-  vec_u64_store(b[1], 0, a + 32);
-  vec_u64_store(b[9], 0, a + 40);
-  vec_u64_store(b[17], 0, a + 48);
-  vec_u64_store(b[25], 0, a + 56);
-
-  vec_u64_store(b[2], 0, a + 64);
-  vec_u64_store(b[10], 0, a + 72);
-  vec_u64_store(b[18], 0, a + 80);
-  vec_u64_store(b[26], 0, a + 88);
-
-  vec_u64_store(b[3], 0, a + 96);
-  vec_u64_store(b[11], 0, a + 104);
-  vec_u64_store(b[19], 0, a + 112);
-  vec_u64_store(b[27], 0, a + 120);
-
-  vec_u64_store(b[4], 0, a + 128);
-  vec_u64_store(b[12], 0, a + 136);
-  vec_u64_store(b[20], 0, a + 144);
-  vec_u64_store(b[28], 0, a + 152);
-
-  vec_u64_store(b[5], 0, a + 160);
-  vec_u64_store(b[13], 0, a + 168);
-  vec_u64_store(b[21], 0, a + 176);
-  vec_u64_store(b[29], 0, a + 184);
-
-  vec_u64_store(b[6], 0, a + 192);
-  vec_u64_store(b[14], 0, a + 200);
-  vec_u64_store(b[22], 0, a + 208);
-  vec_u64_store(b[30], 0, a + 216);
-
-  vec_u64_store(b[7], 0, a + 224);
-  vec_u64_store(b[15], 0, a + 232);
-  vec_u64_store(b[23], 0, a + 240);
-  vec_u64_store(b[31], 0, a + 248);
+  store_tran_low(b[0], 0, a);
+  store_tran_low(b[8], 0, a + 8);
+  store_tran_low(b[16], 0, a + 16);
+  store_tran_low(b[24], 0, a + 24);
+
+  store_tran_low(b[1], 0, a + 32);
+  store_tran_low(b[9], 0, a + 40);
+  store_tran_low(b[17], 0, a + 48);
+  store_tran_low(b[25], 0, a + 56);
+
+  store_tran_low(b[2], 0, a + 64);
+  store_tran_low(b[10], 0, a + 72);
+  store_tran_low(b[18], 0, a + 80);
+  store_tran_low(b[26], 0, a + 88);
+
+  store_tran_low(b[3], 0, a + 96);
+  store_tran_low(b[11], 0, a + 104);
+  store_tran_low(b[19], 0, a + 112);
+  store_tran_low(b[27], 0, a + 120);
+
+  store_tran_low(b[4], 0, a + 128);
+  store_tran_low(b[12], 0, a + 136);
+  store_tran_low(b[20], 0, a + 144);
+  store_tran_low(b[28], 0, a + 152);
+
+  store_tran_low(b[5], 0, a + 160);
+  store_tran_low(b[13], 0, a + 168);
+  store_tran_low(b[21], 0, a + 176);
+  store_tran_low(b[29], 0, a + 184);
+
+  store_tran_low(b[6], 0, a + 192);
+  store_tran_low(b[14], 0, a + 200);
+  store_tran_low(b[22], 0, a + 208);
+  store_tran_low(b[30], 0, a + 216);
+
+  store_tran_low(b[7], 0, a + 224);
+  store_tran_low(b[15], 0, a + 232);
+  store_tran_low(b[23], 0, a + 240);
+  store_tran_low(b[31], 0, a + 248);
 }
 
 // Returns 1 if negative 0 if positive
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/quantize_vsx.c b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/quantize_vsx.c
index 3e9cff6146..96ef40aa95 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/quantize_vsx.c
+++ b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/quantize_vsx.c
@@ -12,28 +12,7 @@
 
 #include "./vpx_dsp_rtcd.h"
 #include "vpx_dsp/ppc/types_vsx.h"
-
-static INLINE void
-vec_u64_store(vector unsigned long long vecu64, unsigned long offset, void *ptr)
-{
-#ifndef WORDS_BIGENDIAN
-  __asm__ ("xxswapd %x0, %x1"
-	   : "=wa" (vecu64)
-	   : "wa" (vecu64));
-#endif
-#if __GNUC__ >= 4
-  if (__builtin_constant_p (offset) && offset == 0)
-    __asm__ ("stxvd2x %x0,0,%1\n\t"
-	     :
-	     : "wa" (vecu64), "r" ((uintptr_t)ptr)
-	     : "memory");
-  else
-#endif
-    __asm__ ("stxvd2x %x0,%1,%2\n\t"
-	     :
-	     : "wa" (vecu64), "r" (offset), "r" ((uintptr_t)ptr)
-	     : "memory", "r0");
-}
+#include "vpx_dsp/ppc/bitdepth_conversion_vsx.h"
 
 // Negate 16-bit integers in a when the corresponding signed 16-bit
 // integer in b is negative.
@@ -132,8 +111,8 @@ void vpx_quantize_b_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   int16x8_t dequant = vec_vsx_ld(0, dequant_ptr);
   int16x8_t quant_shift = vec_vsx_ld(0, quant_shift_ptr);
 
-  int16x8_t coeff0 = vec_vsx_ld(0, coeff_ptr);
-  int16x8_t coeff1 = vec_vsx_ld(16, coeff_ptr);
+  int16x8_t coeff0 = load_tran_low(0, coeff_ptr);
+  int16x8_t coeff1 = load_tran_low(16, coeff_ptr);
 
   int16x8_t coeff0_abs = vec_abs(coeff0);
   int16x8_t coeff1_abs = vec_abs(coeff1);
@@ -146,19 +125,19 @@ void vpx_quantize_b_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
 
   qcoeff0 =
       quantize_coeff(coeff0, coeff0_abs, round, quant, quant_shift, zero_mask0);
-  vec_u64_store(qcoeff0, 0, qcoeff_ptr);
+  store_tran_low(qcoeff0, 0, qcoeff_ptr);
   round = vec_splat(round, 1);
   quant = vec_splat(quant, 1);
   quant_shift = vec_splat(quant_shift, 1);
   qcoeff1 =
       quantize_coeff(coeff1, coeff1_abs, round, quant, quant_shift, zero_mask1);
-  vec_u64_store(qcoeff1, 16, qcoeff_ptr);
+  store_tran_low(qcoeff1, 16, qcoeff_ptr);
 
   dqcoeff0 = vec_mladd(qcoeff0, dequant, vec_zeros_s16);
-  vec_u64_store(dqcoeff0, 0, dqcoeff_ptr);
+  store_tran_low(dqcoeff0, 0, dqcoeff_ptr);
   dequant = vec_splat(dequant, 1);
   dqcoeff1 = vec_mladd(qcoeff1, dequant, vec_zeros_s16);
-  vec_u64_store(dqcoeff1, 16, dqcoeff_ptr);
+  store_tran_low(dqcoeff1, 16, dqcoeff_ptr);
 
   eob = vec_max(nonzero_scanindex(qcoeff0, iscan_ptr, 0),
                 nonzero_scanindex(qcoeff1, iscan_ptr, 16));
@@ -171,9 +150,9 @@ void vpx_quantize_b_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
     do {
       int16x8_t coeff2, coeff2_abs, qcoeff2, dqcoeff2, eob2;
       bool16x8_t zero_mask2;
-      coeff0 = vec_vsx_ld(off0, coeff_ptr);
-      coeff1 = vec_vsx_ld(off1, coeff_ptr);
-      coeff2 = vec_vsx_ld(off2, coeff_ptr);
+      coeff0 = load_tran_low(off0, coeff_ptr);
+      coeff1 = load_tran_low(off1, coeff_ptr);
+      coeff2 = load_tran_low(off2, coeff_ptr);
       coeff0_abs = vec_abs(coeff0);
       coeff1_abs = vec_abs(coeff1);
       coeff2_abs = vec_abs(coeff2);
@@ -186,17 +165,17 @@ void vpx_quantize_b_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
                                zero_mask1);
       qcoeff2 = quantize_coeff(coeff2, coeff2_abs, round, quant, quant_shift,
                                zero_mask2);
-      vec_u64_store(qcoeff0, off0, qcoeff_ptr);
-      vec_u64_store(qcoeff1, off1, qcoeff_ptr);
-      vec_u64_store(qcoeff2, off2, qcoeff_ptr);
+      store_tran_low(qcoeff0, off0, qcoeff_ptr);
+      store_tran_low(qcoeff1, off1, qcoeff_ptr);
+      store_tran_low(qcoeff2, off2, qcoeff_ptr);
 
       dqcoeff0 = vec_mladd(qcoeff0, dequant, vec_zeros_s16);
       dqcoeff1 = vec_mladd(qcoeff1, dequant, vec_zeros_s16);
       dqcoeff2 = vec_mladd(qcoeff2, dequant, vec_zeros_s16);
 
-      vec_u64_store(dqcoeff0, off0, dqcoeff_ptr);
-      vec_u64_store(dqcoeff1, off1, dqcoeff_ptr);
-      vec_u64_store(dqcoeff2, off2, dqcoeff_ptr);
+      store_tran_low(dqcoeff0, off0, dqcoeff_ptr);
+      store_tran_low(dqcoeff1, off1, dqcoeff_ptr);
+      store_tran_low(dqcoeff2, off2, dqcoeff_ptr);
 
       eob = vec_max(eob, nonzero_scanindex(qcoeff0, iscan_ptr, off0));
       eob2 = vec_max(nonzero_scanindex(qcoeff1, iscan_ptr, off1),
@@ -240,8 +219,8 @@ void vpx_quantize_b_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   int16x8_t dequant = vec_vsx_ld(0, dequant_ptr);
   int16x8_t quant_shift = vec_vsx_ld(0, quant_shift_ptr);
 
-  int16x8_t coeff0 = vec_vsx_ld(0, coeff_ptr);
-  int16x8_t coeff1 = vec_vsx_ld(16, coeff_ptr);
+  int16x8_t coeff0 = load_tran_low(0, coeff_ptr);
+  int16x8_t coeff1 = load_tran_low(16, coeff_ptr);
 
   int16x8_t coeff0_abs = vec_abs(coeff0);
   int16x8_t coeff1_abs = vec_abs(coeff1);
@@ -265,12 +244,12 @@ void vpx_quantize_b_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
   qcoeff1 = quantize_coeff_32(coeff1, coeff1_abs, round, quant, quant_shift,
                               zero_mask1);
 
-  vec_u64_store(qcoeff0, 0, qcoeff_ptr);
-  vec_u64_store(qcoeff1, 16, qcoeff_ptr);
+  store_tran_low(qcoeff0, 0, qcoeff_ptr);
+  store_tran_low(qcoeff1, 16, qcoeff_ptr);
 
-  vec_u64_store(dequantize_coeff_32(qcoeff0, dequant), 0, dqcoeff_ptr);
+  store_tran_low(dequantize_coeff_32(qcoeff0, dequant), 0, dqcoeff_ptr);
   dequant = vec_splat(dequant, 1);  // remove DC from dequant
-  vec_u64_store(dequantize_coeff_32(qcoeff1, dequant), 16, dqcoeff_ptr);
+  store_tran_low(dequantize_coeff_32(qcoeff1, dequant), 16, dqcoeff_ptr);
 
   eob = vec_max(nonzero_scanindex(qcoeff0, iscan_ptr, 0),
                 nonzero_scanindex(qcoeff1, iscan_ptr, 16));
@@ -279,9 +258,9 @@ void vpx_quantize_b_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
     int16x8_t coeff2, coeff2_abs, qcoeff2, eob2;
     bool16x8_t zero_mask2;
 
-    coeff0 = vec_vsx_ld(off0, coeff_ptr);
-    coeff1 = vec_vsx_ld(off1, coeff_ptr);
-    coeff2 = vec_vsx_ld(off2, coeff_ptr);
+    coeff0 = load_tran_low(off0, coeff_ptr);
+    coeff1 = load_tran_low(off1, coeff_ptr);
+    coeff2 = load_tran_low(off2, coeff_ptr);
 
     coeff0_abs = vec_abs(coeff0);
     coeff1_abs = vec_abs(coeff1);
@@ -298,13 +277,13 @@ void vpx_quantize_b_32x32_vsx(const tran_low_t *coeff_ptr, intptr_t n_coeffs,
     qcoeff2 = quantize_coeff_32(coeff2, coeff2_abs, round, quant, quant_shift,
                                 zero_mask2);
 
-    vec_u64_store(qcoeff0, off0, qcoeff_ptr);
-    vec_u64_store(qcoeff1, off1, qcoeff_ptr);
-    vec_u64_store(qcoeff2, off2, qcoeff_ptr);
+    store_tran_low(qcoeff0, off0, qcoeff_ptr);
+    store_tran_low(qcoeff1, off1, qcoeff_ptr);
+    store_tran_low(qcoeff2, off2, qcoeff_ptr);
 
-    vec_u64_store(dequantize_coeff_32(qcoeff0, dequant), off0, dqcoeff_ptr);
-    vec_u64_store(dequantize_coeff_32(qcoeff1, dequant), off1, dqcoeff_ptr);
-    vec_u64_store(dequantize_coeff_32(qcoeff2, dequant), off2, dqcoeff_ptr);
+    store_tran_low(dequantize_coeff_32(qcoeff0, dequant), off0, dqcoeff_ptr);
+    store_tran_low(dequantize_coeff_32(qcoeff1, dequant), off1, dqcoeff_ptr);
+    store_tran_low(dequantize_coeff_32(qcoeff2, dequant), off2, dqcoeff_ptr);
 
     eob = vec_max(eob, nonzero_scanindex(qcoeff0, iscan_ptr, off0));
     eob2 = vec_max(nonzero_scanindex(qcoeff1, iscan_ptr, off1),
-- 
2.52.0


From 8f864b1134a49b21402b46056c84800232a76c18 Mon Sep 17 00:00:00 2001
From: Marcus Comstedt <marcus@mc.pp.se>
Date: Wed, 16 Jul 2025 19:35:38 +0200
Subject: [PATCH 4/5] Add missing declaration

---
 .../third_party/libvpx/source/libvpx/vpx_dsp/ppc/sad_vsx.c     | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/sad_vsx.c b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/sad_vsx.c
index a08ae12413..eec48980f1 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/sad_vsx.c
+++ b/src/3rdparty/chromium/third_party/libvpx/source/libvpx/vpx_dsp/ppc/sad_vsx.c
@@ -17,6 +17,9 @@
 #include "vpx/vpx_integer.h"
 #include "vpx_ports/mem.h"
 
+extern void vpx_comp_avg_pred_vsx(uint8_t *comp_pred, const uint8_t *pred, int width,
+				  int height, const uint8_t *ref, int ref_stride);
+
 #define PROCESS16(offset)      \
   v_a = vec_vsx_ld(offset, a); \
   v_b = vec_vsx_ld(offset, b); \
-- 
2.52.0


From f3ea2f65cd65f06dbb7f4e1a2a31b1eb8f2a2893 Mon Sep 17 00:00:00 2001
From: Marcus Comstedt <marcus@mc.pp.se>
Date: Thu, 17 Jul 2025 10:45:47 +0200
Subject: [PATCH 5/5] More fix VSX high bitdepth support

---
 .../source/config/linux/ppc64/vp9_rtcd.h      |  22 +--
 .../source/config/linux/ppc64/vpx_dsp_rtcd.h  | 185 +++++++++++++++++-
 2 files changed, 188 insertions(+), 19 deletions(-)

diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp9_rtcd.h b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp9_rtcd.h
index 0bf248cfe1..375e72a76f 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp9_rtcd.h
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vp9_rtcd.h
@@ -190,26 +190,22 @@ void vp9_highbd_post_proc_down_and_across_c(const uint16_t* src_ptr,
 
 void vp9_highbd_quantize_fp_c(const tran_low_t* coeff_ptr,
                               intptr_t n_coeffs,
-                              const int16_t* round_ptr,
-                              const int16_t* quant_ptr,
+                              const struct macroblock_plane* const mb_plane,
                               tran_low_t* qcoeff_ptr,
                               tran_low_t* dqcoeff_ptr,
                               const int16_t* dequant_ptr,
                               uint16_t* eob_ptr,
-                              const int16_t* scan,
-                              const int16_t* iscan);
+                              const struct ScanOrder* const scan_order);
 #define vp9_highbd_quantize_fp vp9_highbd_quantize_fp_c
 
 void vp9_highbd_quantize_fp_32x32_c(const tran_low_t* coeff_ptr,
-                                    intptr_t n_coeffs,
-                                    const int16_t* round_ptr,
-                                    const int16_t* quant_ptr,
-                                    tran_low_t* qcoeff_ptr,
-                                    tran_low_t* dqcoeff_ptr,
-                                    const int16_t* dequant_ptr,
-                                    uint16_t* eob_ptr,
-                                    const int16_t* scan,
-                                    const int16_t* iscan);
+				    intptr_t n_coeffs,
+				    const struct macroblock_plane* const mb_plane,
+				    tran_low_t* qcoeff_ptr,
+				    tran_low_t* dqcoeff_ptr,
+				    const int16_t* dequant_ptr,
+				    uint16_t* eob_ptr,
+				    const struct ScanOrder* const scan_order);
 #define vp9_highbd_quantize_fp_32x32 vp9_highbd_quantize_fp_32x32_c
 
 void vp9_highbd_temporal_filter_apply_c(const uint8_t* frame1,
diff --git a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_dsp_rtcd.h b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_dsp_rtcd.h
index 6044863934..e4b4ae7f15 100644
--- a/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_dsp_rtcd.h
+++ b/src/3rdparty/chromium/third_party/libvpx/source/config/linux/ppc64/vpx_dsp_rtcd.h
@@ -2428,16 +2428,12 @@ void vpx_highbd_minmax_8x8_c(const uint8_t* s8,
 
 void vpx_highbd_quantize_b_c(const tran_low_t* coeff_ptr,
                              intptr_t n_coeffs,
-                             const int16_t* zbin_ptr,
-                             const int16_t* round_ptr,
-                             const int16_t* quant_ptr,
-                             const int16_t* quant_shift_ptr,
+                             const struct macroblock_plane* const mb_plane,
                              tran_low_t* qcoeff_ptr,
                              tran_low_t* dqcoeff_ptr,
                              const int16_t* dequant_ptr,
                              uint16_t* eob_ptr,
-                             const int16_t* scan,
-                             const int16_t* iscan);
+                             const struct ScanOrder* const scan_order);
 #define vpx_highbd_quantize_b vpx_highbd_quantize_b_c
 
 void vpx_highbd_quantize_b_32x32_c(
@@ -2710,9 +2706,186 @@ void vpx_highbd_sad8x8x4d_c(const uint8_t* src_ptr,
                             uint32_t sad_array[4]);
 #define vpx_highbd_sad8x8x4d vpx_highbd_sad8x8x4d_c
 
+unsigned int vpx_highbd_sad_skip_16x16_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride);
+#define vpx_highbd_sad_skip_16x16 vpx_highbd_sad_skip_16x16_c
+
+void vpx_highbd_sad_skip_16x16x4d_c(const uint8_t* src_ptr,
+                                    int src_stride,
+                                    const uint8_t* const ref_array[4],
+                                    int ref_stride,
+                                    uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_16x16x4d vpx_highbd_sad_skip_16x16x4d_c
+
+unsigned int vpx_highbd_sad_skip_16x32_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride);
+#define vpx_highbd_sad_skip_16x32 vpx_highbd_sad_skip_16x32_c
+
+void vpx_highbd_sad_skip_16x32x4d_c(const uint8_t* src_ptr,
+                                    int src_stride,
+                                    const uint8_t* const ref_array[4],
+                                    int ref_stride,
+                                    uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_16x32x4d vpx_highbd_sad_skip_16x32x4d_c
+
+unsigned int vpx_highbd_sad_skip_16x8_c(const uint8_t* src_ptr,
+                                        int src_stride,
+                                        const uint8_t* ref_ptr,
+                                        int ref_stride);
+#define vpx_highbd_sad_skip_16x8 vpx_highbd_sad_skip_16x8_c
+
+void vpx_highbd_sad_skip_16x8x4d_c(const uint8_t* src_ptr,
+                                   int src_stride,
+                                   const uint8_t* const ref_array[4],
+                                   int ref_stride,
+                                   uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_16x8x4d vpx_highbd_sad_skip_16x8x4d_c
+
+unsigned int vpx_highbd_sad_skip_32x16_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride);
+#define vpx_highbd_sad_skip_32x16 vpx_highbd_sad_skip_32x16_c
+
+void vpx_highbd_sad_skip_32x16x4d_c(const uint8_t* src_ptr,
+                                    int src_stride,
+                                    const uint8_t* const ref_array[4],
+                                    int ref_stride,
+                                    uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_32x16x4d vpx_highbd_sad_skip_32x16x4d_c
+
+unsigned int vpx_highbd_sad_skip_32x32_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride);
+#define vpx_highbd_sad_skip_32x32 vpx_highbd_sad_skip_32x32_c
+
+void vpx_highbd_sad_skip_32x32x4d_c(const uint8_t* src_ptr,
+                                    int src_stride,
+                                    const uint8_t* const ref_array[4],
+                                    int ref_stride,
+                                    uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_32x32x4d vpx_highbd_sad_skip_32x32x4d_c
+
+unsigned int vpx_highbd_sad_skip_32x64_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride);
+#define vpx_highbd_sad_skip_32x64 vpx_highbd_sad_skip_32x64_c
+
+void vpx_highbd_sad_skip_32x64x4d_c(const uint8_t* src_ptr,
+                                    int src_stride,
+                                    const uint8_t* const ref_array[4],
+                                    int ref_stride,
+                                    uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_32x64x4d vpx_highbd_sad_skip_32x64x4d_c
+
+unsigned int vpx_highbd_sad_skip_4x4_c(const uint8_t* src_ptr,
+                                       int src_stride,
+                                       const uint8_t* ref_ptr,
+                                       int ref_stride);
+#define vpx_highbd_sad_skip_4x4 vpx_highbd_sad_skip_4x4_c
+
+void vpx_highbd_sad_skip_4x4x4d_c(const uint8_t* src_ptr,
+                                  int src_stride,
+                                  const uint8_t* const ref_array[4],
+                                  int ref_stride,
+                                  uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_4x4x4d vpx_highbd_sad_skip_4x4x4d_c
+
+unsigned int vpx_highbd_sad_skip_4x8_c(const uint8_t* src_ptr,
+                                       int src_stride,
+                                       const uint8_t* ref_ptr,
+                                       int ref_stride);
+#define vpx_highbd_sad_skip_4x8 vpx_highbd_sad_skip_4x8_c
+
+void vpx_highbd_sad_skip_4x8x4d_c(const uint8_t* src_ptr,
+                                  int src_stride,
+                                  const uint8_t* const ref_array[4],
+                                  int ref_stride,
+                                  uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_4x8x4d vpx_highbd_sad_skip_4x8x4d_c
+
+unsigned int vpx_highbd_sad_skip_64x32_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride);
+#define vpx_highbd_sad_skip_64x32 vpx_highbd_sad_skip_64x32_c
+
+void vpx_highbd_sad_skip_64x32x4d_c(const uint8_t* src_ptr,
+                                    int src_stride,
+                                    const uint8_t* const ref_array[4],
+                                    int ref_stride,
+                                    uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_64x32x4d vpx_highbd_sad_skip_64x32x4d_c
+
+unsigned int vpx_highbd_sad_skip_64x64_c(const uint8_t* src_ptr,
+                                         int src_stride,
+                                         const uint8_t* ref_ptr,
+                                         int ref_stride);
+#define vpx_highbd_sad_skip_64x64 vpx_highbd_sad_skip_64x64_c
+
+void vpx_highbd_sad_skip_64x64x4d_c(const uint8_t* src_ptr,
+                                    int src_stride,
+                                    const uint8_t* const ref_array[4],
+                                    int ref_stride,
+                                    uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_64x64x4d vpx_highbd_sad_skip_64x64x4d_c
+
+unsigned int vpx_highbd_sad_skip_8x16_c(const uint8_t* src_ptr,
+                                        int src_stride,
+                                        const uint8_t* ref_ptr,
+                                        int ref_stride);
+#define vpx_highbd_sad_skip_8x16 vpx_highbd_sad_skip_8x16_c
+
+void vpx_highbd_sad_skip_8x16x4d_c(const uint8_t* src_ptr,
+                                   int src_stride,
+                                   const uint8_t* const ref_array[4],
+                                   int ref_stride,
+                                   uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_8x16x4d vpx_highbd_sad_skip_8x16x4d_c
+
+unsigned int vpx_highbd_sad_skip_8x4_c(const uint8_t* src_ptr,
+                                       int src_stride,
+                                       const uint8_t* ref_ptr,
+                                       int ref_stride);
+#define vpx_highbd_sad_skip_8x4 vpx_highbd_sad_skip_8x4_c
+
+void vpx_highbd_sad_skip_8x4x4d_c(const uint8_t* src_ptr,
+                                  int src_stride,
+                                  const uint8_t* const ref_array[4],
+                                  int ref_stride,
+                                  uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_8x4x4d vpx_highbd_sad_skip_8x4x4d_c
+
+unsigned int vpx_highbd_sad_skip_8x8_c(const uint8_t* src_ptr,
+                                       int src_stride,
+                                       const uint8_t* ref_ptr,
+                                       int ref_stride);
+#define vpx_highbd_sad_skip_8x8 vpx_highbd_sad_skip_8x8_c
+
+void vpx_highbd_sad_skip_8x8x4d_c(const uint8_t* src_ptr,
+                                  int src_stride,
+                                  const uint8_t* const ref_array[4],
+                                  int ref_stride,
+                                  uint32_t sad_array[4]);
+#define vpx_highbd_sad_skip_8x8x4d vpx_highbd_sad_skip_8x8x4d_c
+
 int vpx_highbd_satd_c(const tran_low_t* coeff, int length);
 #define vpx_highbd_satd vpx_highbd_satd_c
 
+int64_t vpx_highbd_sse_c(const uint8_t* a8,
+                         int a_stride,
+                         const uint8_t* b8,
+                         int b_stride,
+                         int width,
+                         int height);
+#define vpx_highbd_sse vpx_highbd_sse_c
+
 void vpx_highbd_subtract_block_c(int rows,
                                  int cols,
                                  int16_t* diff_ptr,
-- 
2.52.0

